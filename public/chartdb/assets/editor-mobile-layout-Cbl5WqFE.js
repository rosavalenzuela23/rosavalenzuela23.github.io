import{g as r,r as ve,j as P,b as ue}from"./index-DngGMs-x.js";import{S as Rt}from"./side-panel-aBVC53K4.js";import{S as Tt,C as Dt}from"./canvas-VkQ5DD9m.js";import{u as xt}from"./canvas-utils-Bo482CbG.js";import{T as Et,D as Ot,R as Ct,P as $t,C as Pt,O as Mt}from"./code-editor-ZE9xhkVa.js";import"./label-B61IYMRO.js";import"./theme-provider-Bg5O9Ay7.js";import"./colors-D1Sckjvp.js";import"./database-type-C2NNW5SW.js";import"./storage-provider-BC0RSelR.js";import"./use-storage-CxjMvB6O.js";import"./link-wq2K7Eu_.js";import"./spinner-D6am5q-Y.js";function At(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}const Ve=r.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),ce=()=>{const e=r.useContext(Ve);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};At(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const Nt=24,It=typeof window<"u"?ve.useLayoutEffect:ve.useEffect;function Ue(...e){return(...n)=>{for(let t of e)typeof t=="function"&&t(...n)}}function Ht(){return Me(/^Mac/)}function _t(){return Me(/^iPhone/)}function Fe(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Lt(){return Me(/^iPad/)||Ht()&&navigator.maxTouchPoints>1}function Ye(){return _t()||Lt()}function Me(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const xe=typeof document<"u"&&window.visualViewport;function ze(e){let n=window.getComputedStyle(e);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function qe(e){for(ze(e)&&(e=e.parentElement);e&&!ze(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const kt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let we=0,Ee;function Bt(e={}){let{isDisabled:n}=e;It(()=>{if(!n)return we++,we===1&&Ye()&&(Ee=jt()),()=>{we--,we===0&&(Ee==null||Ee())}},[n])}function jt(){let e,n=0,t=p=>{e=qe(p.target),!(e===document.documentElement&&e===document.body)&&(n=p.changedTouches[0].pageY)},a=p=>{if(!e||e===document.documentElement||e===document.body){p.preventDefault();return}let w=p.changedTouches[0].pageY,L=e.scrollTop,F=e.scrollHeight-e.clientHeight;F!==0&&((L<=0&&w>n||L>=F&&w<n)&&p.preventDefault(),n=w)},i=p=>{let w=p.target;$e(w)&&w!==document.activeElement&&(p.preventDefault(),w.style.transform="translateY(-2000px)",w.focus(),requestAnimationFrame(()=>{w.style.transform=""}))},o=p=>{let w=p.target;$e(w)&&(w.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{w.style.transform="",xe&&(xe.height<window.innerHeight?requestAnimationFrame(()=>{We(w)}):xe.addEventListener("resize",()=>We(w),{once:!0}))}))},h=()=>{window.scrollTo(0,0)},m=window.pageXOffset,S=window.pageYOffset,D=Ue(Ut(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let g=Ue(se(document,"touchstart",t,{passive:!1,capture:!0}),se(document,"touchmove",a,{passive:!1,capture:!0}),se(document,"touchend",i,{passive:!1,capture:!0}),se(document,"focus",o,!0),se(window,"scroll",h));return()=>{D(),g(),window.scrollTo(m,S)}}function Ut(e,n,t){let a=e.style[n];return e.style[n]=t,()=>{e.style[n]=a}}function se(e,n,t,a){return e.addEventListener(n,t,a),()=>{e.removeEventListener(n,t,a)}}function We(e){let n=document.scrollingElement||document.documentElement;for(;e&&e!==n;){let t=qe(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let a=t.getBoundingClientRect().top,i=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const h=t.getBoundingClientRect().bottom+Nt;o>h&&(t.scrollTop+=i-a)}e=t.parentElement}}function $e(e){return e instanceof HTMLInputElement&&!kt.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Ft(e,n){typeof e=="function"?e(n):e!=null&&(e.current=n)}function zt(...e){return n=>e.forEach(t=>Ft(t,n))}function Xe(...e){return ve.useCallback(zt(...e),e)}const Ke=new WeakMap;function C(e,n,t=!1){if(!e||!(e instanceof HTMLElement))return;let a={};Object.entries(n).forEach(([i,o])=>{if(i.startsWith("--")){e.style.setProperty(i,o);return}a[i]=e.style[i],e.style[i]=o}),!t&&Ke.set(e,a)}function Wt(e,n){if(!e||!(e instanceof HTMLElement))return;let t=Ke.get(e);t&&(e.style[n]=t[n])}const $=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function he(e,n){if(!e)return null;const t=window.getComputedStyle(e),a=t.transform||t.webkitTransform||t.mozTransform;let i=a.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[$(n)?13:12]):(i=a.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[$(n)?5:4]):null)}function Vt(e){return 8*(Math.log(e+1)-2)}function Oe(e,n){if(!e)return()=>{};const t=e.style.cssText;return Object.assign(e.style,n),()=>{e.style.cssText=t}}function Yt(...e){return(...n)=>{for(const t of e)typeof t=="function"&&t(...n)}}const E={DURATION:.5,EASE:[.32,.72,0,1]},Ge=.4,qt=.25,Xt=100,Je=8,ge=16,Pe=26,Ce="vaul-dragging";function Qe(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e}),r.useMemo(()=>(...t)=>n.current==null?void 0:n.current.call(n,...t),[])}function Kt({defaultProp:e,onChange:n}){const t=r.useState(e),[a]=t,i=r.useRef(a),o=Qe(n);return r.useEffect(()=>{i.current!==a&&(o(a),i.current=a)},[a,i,o]),t}function Ze({prop:e,defaultProp:n,onChange:t=()=>{}}){const[a,i]=Kt({defaultProp:n,onChange:t}),o=e!==void 0,h=o?e:a,m=Qe(t),S=r.useCallback(D=>{if(o){const p=typeof D=="function"?D(e):D;p!==e&&m(p)}else i(D)},[o,e,i,m]);return[h,S]}function Gt({activeSnapPointProp:e,setActiveSnapPointProp:n,snapPoints:t,drawerRef:a,overlayRef:i,fadeFromIndex:o,onSnapPointChange:h,direction:m="bottom",container:S,snapToSequentialPoint:D}){const[g,p]=Ze({prop:e,defaultProp:t==null?void 0:t[0],onChange:n}),[w,L]=r.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);r.useEffect(()=>{function d(){L({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const F=r.useMemo(()=>g===(t==null?void 0:t[t.length-1])||null,[t,g]),O=r.useMemo(()=>t==null?void 0:t.findIndex(d=>d===g),[t,g]),W=t&&t.length>0&&(o||o===0)&&!Number.isNaN(o)&&t[o]===g||!t,f=r.useMemo(()=>{const d=S?{width:S.getBoundingClientRect().width,height:S.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var R;return(R=t==null?void 0:t.map(v=>{const H=typeof v=="string";let s=0;if(H&&(s=parseInt(v,10)),$(m)){const A=H?s:w?v*d.height:0;return w?m==="bottom"?d.height-A:-d.height+A:A}const N=H?s:w?v*d.width:0;return w?m==="right"?d.width-N:-d.width+N:N}))!=null?R:[]},[t,w,S]),k=r.useMemo(()=>O!==null?f==null?void 0:f[O]:null,[f,O]),M=r.useCallback(d=>{var R;const v=(R=f==null?void 0:f.findIndex(H=>H===d))!=null?R:null;h(v),C(a.current,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:$(m)?`translate3d(0, ${d}px, 0)`:`translate3d(${d}px, 0, 0)`}),f&&v!==f.length-1&&v!==o&&v<o?C(i.current,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"0"}):C(i.current,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"1"}),p(t==null?void 0:t[Math.max(v,0)])},[a.current,t,f,o,i,p]);r.useEffect(()=>{if(g||e){var d;const R=(d=t==null?void 0:t.findIndex(v=>v===e||v===g))!=null?d:-1;f&&R!==-1&&typeof f[R]=="number"&&M(f[R])}},[g,e,t,f,M]);function c({draggedDistance:d,closeDrawer:R,velocity:v,dismissible:H}){if(o===void 0)return;const s=m==="bottom"||m==="right"?(k??0)-d:(k??0)+d,N=O===o-1,A=O===0,B=d>0;if(N&&C(i.current,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`}),!D&&v>2&&!B){H?R():M(f[0]);return}if(!D&&v>2&&B&&f&&t){M(f[t.length-1]);return}const j=f==null?void 0:f.reduce((U,Q)=>typeof U!="number"||typeof Q!="number"?U:Math.abs(Q-s)<Math.abs(U-s)?Q:U),G=$(m)?window.innerHeight:window.innerWidth;if(v>Ge&&Math.abs(d)<G*.4){const U=B?1:-1;if(U>0&&F){M(f[t.length-1]);return}if(A&&U<0&&H&&R(),O===null)return;M(f[O+U]);return}M(j)}function I({draggedDistance:d}){if(k===null)return;const R=m==="bottom"||m==="right"?k-d:k+d;(m==="bottom"||m==="right")&&R<f[f.length-1]||(m==="top"||m==="left")&&R>f[f.length-1]||C(a.current,{transform:$(m)?`translate3d(0, ${R}px, 0)`:`translate3d(${R}px, 0, 0)`})}function X(d,R){if(!t||typeof O!="number"||!f||o===void 0)return null;const v=O===o-1;if(O>=o&&R)return 0;if(v&&!R)return 1;if(!W&&!v)return null;const s=v?O+1:O-1,N=v?f[s]-f[s-1]:f[s+1]-f[s],A=d/Math.abs(N);return v?1-A:A}return{isLastSnapPoint:F,activeSnapPoint:g,shouldFade:W,getPercentageDragged:X,setActiveSnapPoint:p,activeSnapPointIndex:O,onRelease:c,onDrag:I,snapPointsOffset:f}}const Jt=()=>()=>{};function Qt(){const{direction:e,isOpen:n,shouldScaleBackground:t,setBackgroundColorOnScale:a,noBodyStyles:i}=ce(),o=r.useRef(null),h=ve.useMemo(()=>document.body.style.backgroundColor,[]);function m(){return(window.innerWidth-Pe)/window.innerWidth}r.useEffect(()=>{if(n&&t){o.current&&clearTimeout(o.current);const S=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!S)return;Yt(a&&!i?Oe(document.body,{background:"black"}):Jt,Oe(S,{transformOrigin:$(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${E.DURATION}s`,transitionTimingFunction:`cubic-bezier(${E.EASE.join(",")})`}));const D=Oe(S,{borderRadius:`${Je}px`,overflow:"hidden",...$(e)?{transform:`scale(${m()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${m()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{D(),o.current=window.setTimeout(()=>{h?document.body.style.background=h:document.body.style.removeProperty("background")},E.DURATION*1e3)}}},[n,t,h])}let le=null;function Zt({isOpen:e,modal:n,nested:t,hasBeenOpened:a,preventScrollRestoration:i,noBodyStyles:o}){const[h,m]=r.useState(()=>typeof window<"u"?window.location.href:""),S=r.useRef(0),D=r.useCallback(()=>{if(Fe()&&le===null&&e&&!o){le={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:p,innerHeight:w}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-S.current}px`,left:`${-p}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const L=w-window.innerHeight;L&&S.current>=w&&(document.body.style.top=`${-(S.current+L)}px`)}),300)}},[e]),g=r.useCallback(()=>{if(Fe()&&le!==null&&!o){const p=-parseInt(document.body.style.top,10),w=-parseInt(document.body.style.left,10);Object.assign(document.body.style,le),window.requestAnimationFrame(()=>{if(i&&h!==window.location.href){m(window.location.href);return}window.scrollTo(w,p)}),le=null}},[h]);return r.useEffect(()=>{function p(){S.current=window.scrollY}return p(),window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),r.useEffect(()=>{t||!a||(e?(!window.matchMedia("(display-mode: standalone)").matches&&D(),n||window.setTimeout(()=>{g()},500)):g())},[e,a,h,n,t,D,g]),{restorePositionSetting:g}}function en({open:e,onOpenChange:n,children:t,onDrag:a,onRelease:i,snapPoints:o,shouldScaleBackground:h=!1,setBackgroundColorOnScale:m=!0,closeThreshold:S=qt,scrollLockTimeout:D=Xt,dismissible:g=!0,handleOnly:p=!1,fadeFromIndex:w=o&&o.length-1,activeSnapPoint:L,setActiveSnapPoint:F,fixed:O,modal:W=!0,onClose:f,nested:k,noBodyStyles:M,direction:c="bottom",defaultOpen:I=!1,disablePreventScroll:X=!0,snapToSequentialPoint:d=!1,preventScrollRestoration:R=!1,repositionInputs:v=!0,onAnimationEnd:H,container:s,autoFocus:N=!1}){var A,B;const[j=!1,G]=Ze({defaultProp:I,prop:e,onChange:l=>{n==null||n(l),!l&&!k&&pt(),setTimeout(()=>{H==null||H(l)},E.DURATION*1e3),l&&!W&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),l||(document.body.style.pointerEvents="auto")}}),[U,Q]=r.useState(!1),[ne,ye]=r.useState(!1),[lt,Ae]=r.useState(!1),ee=r.useRef(null),de=r.useRef(null),be=r.useRef(null),Se=r.useRef(null),fe=r.useRef(null),re=r.useRef(!1),Re=r.useRef(null),Te=r.useRef(0),te=r.useRef(!1),Ne=r.useRef(0),u=r.useRef(null),Ie=r.useRef(((A=u.current)==null?void 0:A.getBoundingClientRect().height)||0),He=r.useRef(((B=u.current)==null?void 0:B.getBoundingClientRect().width)||0),De=r.useRef(0),ut=r.useCallback(l=>{o&&l===oe.length-1&&(de.current=new Date)},[]),{activeSnapPoint:ct,activeSnapPointIndex:ae,setActiveSnapPoint:_e,onRelease:dt,snapPointsOffset:oe,onDrag:ft,shouldFade:Le,getPercentageDragged:mt}=Gt({snapPoints:o,activeSnapPointProp:L,setActiveSnapPointProp:F,drawerRef:u,fadeFromIndex:w,overlayRef:ee,onSnapPointChange:ut,direction:c,container:s,snapToSequentialPoint:d});Bt({isDisabled:!j||ne||!W||lt||!U||!v||!X});const{restorePositionSetting:pt}=Zt({isOpen:j,modal:W,nested:k,hasBeenOpened:U,preventScrollRestoration:R,noBodyStyles:M});function me(){return(window.innerWidth-Pe)/window.innerWidth}function wt(l){var y,T;!g&&!o||u.current&&!u.current.contains(l.target)||(Ie.current=((y=u.current)==null?void 0:y.getBoundingClientRect().height)||0,He.current=((T=u.current)==null?void 0:T.getBoundingClientRect().width)||0,ye(!0),be.current=new Date,Ye()&&window.addEventListener("touchend",()=>re.current=!1,{once:!0}),l.target.setPointerCapture(l.pointerId),Te.current=$(c)?l.pageY:l.pageX)}function ke(l,y){var T,x;let b=l;const V=(T=window.getSelection())==null?void 0:T.toString(),_=u.current?he(u.current,c):null,z=new Date;if(b.hasAttribute("data-vaul-no-drag")||b.closest("[data-vaul-no-drag]"))return!1;if(c==="right"||c==="left")return!0;if(de.current&&z.getTime()-de.current.getTime()<500)return!1;if(_!==null&&(c==="bottom"?_>0:_<0))return!0;if(V&&V.length>0)return!1;if(z.getTime()-((x=fe.current)==null?void 0:x.getTime())<D&&_===0||y)return fe.current=z,!1;for(;b;){if(b.scrollHeight>b.clientHeight){if(b.scrollTop!==0)return fe.current=new Date,!1;if(b.getAttribute("role")==="dialog")return!0}b=b.parentNode}return!0}function ht(l){if(u.current&&ne){const y=c==="bottom"||c==="right"?1:-1,T=(Te.current-($(c)?l.pageY:l.pageX))*y,x=T>0,b=o&&!g&&!x;if(b&&ae===0)return;const V=Math.abs(T),_=document.querySelector("[data-vaul-drawer-wrapper]"),z=c==="bottom"||c==="top"?Ie.current:He.current;let Y=V/z;const Z=mt(V,x);if(Z!==null&&(Y=Z),b&&Y>=1||!re.current&&!ke(l.target,x))return;if(u.current.classList.add(Ce),re.current=!0,C(u.current,{transition:"none"}),C(ee.current,{transition:"none"}),o&&ft({draggedDistance:T}),x&&!o){const q=Vt(T),pe=Math.min(q*-1,0)*y;C(u.current,{transform:$(c)?`translate3d(0, ${pe}px, 0)`:`translate3d(${pe}px, 0, 0)`});return}const J=1-Y;if((Le||w&&ae===w-1)&&(a==null||a(l,Y),C(ee.current,{opacity:`${J}`,transition:"none"},!0)),_&&ee.current&&h){const q=Math.min(me()+Y*(1-me()),1),pe=8-Y*8,je=Math.max(0,14-Y*14);C(_,{borderRadius:`${pe}px`,transform:$(c)?`scale(${q}) translate3d(0, ${je}px, 0)`:`scale(${q}) translate3d(${je}px, 0, 0)`,transition:"none"},!0)}if(!o){const q=V*y;C(u.current,{transform:$(c)?`translate3d(0, ${q}px, 0)`:`translate3d(${q}px, 0, 0)`})}}}r.useEffect(()=>{var l;function y(){if(!u.current||!v)return;const T=document.activeElement;if($e(T)||te.current){var x;const b=((x=window.visualViewport)==null?void 0:x.height)||0,V=window.innerHeight;let _=V-b;const z=u.current.getBoundingClientRect().height||0,Y=z>V*.8;De.current||(De.current=z);const Z=u.current.getBoundingClientRect().top;if(Math.abs(Ne.current-_)>60&&(te.current=!te.current),o&&o.length>0&&oe&&ae){const J=oe[ae]||0;_+=J}if(Ne.current=_,z>b||te.current){const J=u.current.getBoundingClientRect().height;let q=J;J>b&&(q=b-(Y?Z:Pe)),O?u.current.style.height=`${J-Math.max(_,0)}px`:u.current.style.height=`${Math.max(q,b-Z)}px`}else u.current.style.height=`${De.current}px`;o&&o.length>0&&!te.current?u.current.style.bottom="0px":u.current.style.bottom=`${Math.max(_,0)}px`}}return(l=window.visualViewport)==null||l.addEventListener("resize",y),()=>{var T;return(T=window.visualViewport)==null?void 0:T.removeEventListener("resize",y)}},[ae,o,oe]);function ie(l){gt(),f==null||f(),l||G(!1),setTimeout(()=>{o&&_e(o[0])},E.DURATION*1e3)}function Be(){if(!u.current)return;const l=document.querySelector("[data-vaul-drawer-wrapper]"),y=he(u.current,c);C(u.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`}),C(ee.current,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"1"}),h&&y&&y>0&&j&&C(l,{borderRadius:`${Je}px`,overflow:"hidden",...$(c)?{transform:`scale(${me()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${me()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${E.DURATION}s`,transitionTimingFunction:`cubic-bezier(${E.EASE.join(",")})`},!0)}function gt(){!ne||!u.current||(u.current.classList.remove(Ce),re.current=!1,ye(!1),Se.current=new Date)}function vt(l){if(!ne||!u.current)return;u.current.classList.remove(Ce),re.current=!1,ye(!1),Se.current=new Date;const y=he(u.current,c);if(!ke(l.target,!1)||!y||Number.isNaN(y)||be.current===null)return;const T=Se.current.getTime()-be.current.getTime(),x=Te.current-($(c)?l.pageY:l.pageX),b=Math.abs(x)/T;if(b>.05&&(Ae(!0),setTimeout(()=>{Ae(!1)},200)),o){dt({draggedDistance:x*(c==="bottom"||c==="right"?1:-1),closeDrawer:ie,velocity:b,dismissible:g}),i==null||i(l,!0);return}if(c==="bottom"||c==="right"?x>0:x<0){Be(),i==null||i(l,!0);return}if(b>Ge){ie(),i==null||i(l,!1);return}var V;const _=Math.min((V=u.current.getBoundingClientRect().height)!=null?V:0,window.innerHeight);var z;const Y=Math.min((z=u.current.getBoundingClientRect().width)!=null?z:0,window.innerWidth),Z=c==="left"||c==="right";if(Math.abs(y)>=(Z?Y:_)*S){ie(),i==null||i(l,!1);return}i==null||i(l,!0),Be()}r.useEffect(()=>(j&&(C(document.documentElement,{scrollBehavior:"auto"}),de.current=new Date),()=>{Wt(document.documentElement,"scrollBehavior")}),[j]);function yt(l){const y=l?(window.innerWidth-ge)/window.innerWidth:1,T=l?-16:0;Re.current&&window.clearTimeout(Re.current),C(u.current,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:`scale(${y}) translate3d(0, ${T}px, 0)`}),!l&&u.current&&(Re.current=setTimeout(()=>{const x=he(u.current,c);C(u.current,{transition:"none",transform:$(c)?`translate3d(0, ${x}px, 0)`:`translate3d(${x}px, 0, 0)`})},500))}function bt(l,y){if(y<0)return;const T=(window.innerWidth-ge)/window.innerWidth,x=T+y*(1-T),b=-16+y*ge;C(u.current,{transform:$(c)?`scale(${x}) translate3d(0, ${b}px, 0)`:`scale(${x}) translate3d(${b}px, 0, 0)`,transition:"none"})}function St(l,y){const T=$(c)?window.innerHeight:window.innerWidth,x=y?(T-ge)/T:1,b=y?-16:0;y&&C(u.current,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:$(c)?`scale(${x}) translate3d(0, ${b}px, 0)`:`scale(${x}) translate3d(${b}px, 0, 0)`})}return r.createElement(Ct,{defaultOpen:I,onOpenChange:l=>{!g&&!l||(l?Q(!0):ie(!0),G(l))},open:j},r.createElement(Ve.Provider,{value:{activeSnapPoint:ct,snapPoints:o,setActiveSnapPoint:_e,drawerRef:u,overlayRef:ee,onOpenChange:n,onPress:wt,onRelease:vt,onDrag:ht,dismissible:g,handleOnly:p,isOpen:j,isDragging:ne,shouldFade:Le,closeDrawer:ie,onNestedDrag:bt,onNestedOpenChange:yt,onNestedRelease:St,keyboardIsOpen:te,modal:W,snapPointsOffset:oe,direction:c,shouldScaleBackground:h,setBackgroundColorOnScale:m,noBodyStyles:M,container:s,autoFocus:N}},t))}const et=r.forwardRef(function({...e},n){const{overlayRef:t,snapPoints:a,onRelease:i,shouldFade:o,isOpen:h,modal:m}=ce(),S=Xe(n,t),D=a&&a.length>0;return m?r.createElement(Mt,{onMouseUp:i,ref:S,"data-vaul-overlay":"","data-vaul-snap-points":h&&D?"true":"false","data-vaul-snap-points-overlay":h&&o?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});et.displayName="Drawer.Overlay";const tt=r.forwardRef(function({onPointerDownOutside:e,style:n,onOpenAutoFocus:t,...a},i){const{drawerRef:o,onPress:h,onRelease:m,onDrag:S,keyboardIsOpen:D,snapPointsOffset:g,modal:p,isOpen:w,direction:L,snapPoints:F,container:O,handleOnly:W,autoFocus:f}=ce(),[k,M]=r.useState(!1),c=Xe(i,o),I=r.useRef(null),X=r.useRef(null),d=r.useRef(!1),R=F&&F.length>0;Qt();const v=(s,N,A=0)=>{if(d.current)return!0;const B=Math.abs(s.y),j=Math.abs(s.x),G=j>B,U=["bottom","right"].includes(N)?1:-1;if(N==="left"||N==="right"){if(!(s.x*U<0)&&j>=0&&j<=A)return G}else if(!(s.y*U<0)&&B>=0&&B<=A)return!G;return d.current=!0,!0};r.useEffect(()=>{R&&window.requestAnimationFrame(()=>{M(!0)})},[]);function H(s){I.current=null,d.current=!1,m(s)}return r.createElement(Pt,{"data-vaul-drawer-direction":L,"data-vaul-drawer":"","data-vaul-delayed-snap-points":k?"true":"false","data-vaul-snap-points":w&&R?"true":"false","data-vaul-custom-container":O?"true":"false",...a,ref:c,style:g&&g.length>0?{"--snap-point-height":`${g[0]}px`,...n}:n,onPointerDown:s=>{W||(a.onPointerDown==null||a.onPointerDown.call(a,s),I.current={x:s.pageX,y:s.pageY},h(s))},onOpenAutoFocus:s=>{t==null||t(s),f||s.preventDefault()},onPointerDownOutside:s=>{if(e==null||e(s),!p||s.defaultPrevented){s.preventDefault();return}D.current&&(D.current=!1)},onFocusOutside:s=>{if(!p){s.preventDefault();return}},onPointerMove:s=>{if(X.current=s,W||(a.onPointerMove==null||a.onPointerMove.call(a,s),!I.current))return;const N=s.pageY-I.current.y,A=s.pageX-I.current.x,B=s.pointerType==="touch"?10:2;v({x:A,y:N},L,B)?S(s):(Math.abs(A)>B||Math.abs(N)>B)&&(I.current=null)},onPointerUp:s=>{a.onPointerUp==null||a.onPointerUp.call(a,s),I.current=null,d.current=!1,m(s)},onPointerOut:s=>{a.onPointerOut==null||a.onPointerOut.call(a,s),H(X.current)},onContextMenu:s=>{a.onContextMenu==null||a.onContextMenu.call(a,s),H(X.current)}})});tt.displayName="Drawer.Content";const tn=250,nn=120,rn=r.forwardRef(function({preventCycle:e=!1,children:n,...t},a){const{closeDrawer:i,isDragging:o,snapPoints:h,activeSnapPoint:m,setActiveSnapPoint:S,dismissible:D,handleOnly:g,isOpen:p,onPress:w,onDrag:L}=ce(),F=r.useRef(null),O=r.useRef(!1);function W(){if(O.current){M();return}window.setTimeout(()=>{f()},nn)}function f(){if(o||e||O.current){M();return}if(M(),(!h||h.length===0)&&D){i();return}if(m===h[h.length-1]&&D){i();return}const I=h.findIndex(d=>d===m);if(I===-1)return;const X=h[I+1];S(X)}function k(){F.current=window.setTimeout(()=>{O.current=!0},tn)}function M(){window.clearTimeout(F.current),O.current=!1}return r.createElement("div",{onClick:W,onPointerCancel:M,onPointerDown:c=>{g&&w(c),k()},onPointerMove:c=>{g&&L(c)},ref:a,"data-vaul-drawer-visible":p?"true":"false","data-vaul-handle":"","aria-hidden":"true",...t},r.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});rn.displayName="Drawer.Handle";function an(e){const n=ce(),{container:t=n.container,...a}=e;return r.createElement($t,{container:t,...a})}const K={Root:en,Content:tt,Overlay:et,Portal:an,Title:Et,Description:Ot},nt=({shouldScaleBackground:e=!0,...n})=>P.jsx(K.Root,{shouldScaleBackground:e,...n});nt.displayName="Drawer";const on=K.Portal,rt=r.forwardRef(({className:e,...n},t)=>P.jsx(K.Overlay,{ref:t,className:ue("fixed inset-0 z-50 bg-black/80",e),...n}));rt.displayName=K.Overlay.displayName;const at=r.forwardRef(({className:e,children:n,fullScreen:t,...a},i)=>P.jsxs(on,{children:[t?null:P.jsx(rt,{}),P.jsxs(K.Content,{ref:i,className:ue("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...a,children:[P.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]}));at.displayName="DrawerContent";const ot=({className:e,...n})=>P.jsx("div",{className:ue("grid gap-1.5 p-4 text-center sm:text-left",e),...n});ot.displayName="DrawerHeader";const it=r.forwardRef(({className:e,...n},t)=>P.jsx(K.Title,{ref:t,className:ue("text-lg font-semibold leading-none tracking-tight",e),...n}));it.displayName=K.Title.displayName;const st=r.forwardRef(({className:e,...n},t)=>P.jsx(K.Description,{ref:t,className:ue("text-sm text-muted-foreground",e),...n}));st.displayName=K.Description.displayName;const bn=({initialDiagram:e})=>{const{isSidePanelShowed:n,hideSidePanel:t}=xt();return P.jsxs(P.Fragment,{children:[P.jsx(nt,{open:n,onClose:()=>t(),children:P.jsxs(at,{className:"h-full",fullScreen:!0,children:[P.jsxs(ot,{children:[P.jsx(it,{children:"Manage Diagram"}),P.jsx(st,{children:"Manage your diagram objects"})]}),P.jsx(Tt,{orientation:"horizontal"}),P.jsx(Rt,{"data-vaul-no-drag":!0})]})}),P.jsx(Dt,{initialTables:(e==null?void 0:e.tables)??[]})]})};export{bn as EditorMobileLayout,bn as default};
