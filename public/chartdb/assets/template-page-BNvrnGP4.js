import{r as l,j as e,b as i,S as v,d as y,u as w,a as B,H as D,T as C,e as T,f as $}from"./index-DngGMs-x.js";import{u as k,C as L,a as S,d as R,b as P}from"./colors-D1Sckjvp.js";import{c as _,L as H,T as M}from"./theme-provider-Bg5O9Ay7.js";import{B as z}from"./label-B61IYMRO.js";import{C as F,R as I,a as E}from"./canvas-utils-Bo482CbG.js";import{S as U}from"./spinner-D6am5q-Y.js";import{S as c,C as A}from"./canvas-VkQ5DD9m.js";import{H as m,L as G,B as O}from"./link-wq2K7Eu_.js";import"./database-type-C2NNW5SW.js";import"./use-storage-CxjMvB6O.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=_("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),g=l.forwardRef(({...s},t)=>e.jsx("nav",{ref:t,"aria-label":"breadcrumb",...s}));g.displayName="Breadcrumb";const u=l.forwardRef(({className:s,...t},r)=>e.jsx("ol",{ref:r,className:i("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...t}));u.displayName="BreadcrumbList";const o=l.forwardRef(({className:s,...t},r)=>e.jsx("li",{ref:r,className:i("inline-flex items-center gap-1.5",s),...t}));o.displayName="BreadcrumbItem";const d=l.forwardRef(({asChild:s,className:t,...r},a)=>{const n=s?v:"a";return e.jsx(n,{ref:a,className:i("transition-colors hover:text-foreground",t),...r})});d.displayName="BreadcrumbLink";const J=l.forwardRef(({className:s,...t},r)=>e.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:i("font-normal text-foreground",s),...t}));J.displayName="BreadcrumbPage";const b=({children:s,className:t,...r})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:i("[&>svg]:w-3.5 [&>svg]:h-3.5",t),...r,children:s??e.jsx(F,{})});b.displayName="BreadcrumbSeparator";const K=()=>{var x,h,f,p;const{templateSlug:s}=y(),t=w(),a=B().template;l.useEffect(()=>{a||t("/templates")},[a,t]);const{effectiveTheme:n}=k(),N=l.useCallback(async()=>{t(`/templates/clone/${s}`)},[t,s]);return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:a?e.jsxs(e.Fragment,{children:[e.jsx("link",{rel:"canonical",href:`https://chartdb.io/templates/${s}`}),e.jsx("title",{children:`Database schema diagram for - ${a.name} | ChartDB`}),e.jsx("meta",{name:"description",content:`${a.shortDescription}: ${a.description}`}),e.jsx("meta",{property:"og:title",content:`Database schema diagram for - ${a.name} | ChartDB`}),e.jsx("meta",{property:"og:url",content:`${m}/templates/${s}`}),e.jsx("meta",{property:"og:description",content:`${a.shortDescription}: ${a.description}`}),e.jsx("meta",{property:"og:image",content:`${m}${a.image}`}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:site_name",content:"ChartDB"}),e.jsx("meta",{name:"twitter:title",content:`Database schema for - ${a.name} | ChartDB`}),e.jsx("meta",{name:"twitter:description",content:`${a.shortDescription}: ${a.description}`}),e.jsx("meta",{name:"twitter:image",content:`${m}${a.image}`}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:site",content:"@ChartDB_io"}),e.jsx("meta",{name:"twitter:creator",content:"@ChartDB_io"})]}):e.jsx("title",{children:"Database Schema Diagram | ChartDB"})}),e.jsxs("section",{className:"flex h-screen w-screen flex-col bg-background",children:[e.jsxs("nav",{className:"flex h-12 shrink-0 flex-row items-center justify-between border-b px-4",children:[e.jsx("div",{className:"flex flex-1 justify-start gap-x-3",children:e.jsx("div",{className:"flex items-center font-primary",children:e.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:e.jsx("img",{src:n==="light"?L:S,alt:"chartDB",className:"h-4 max-w-fit"})})})}),e.jsx("div",{className:"flex flex-1 justify-end",children:e.jsx("iframe",{src:"https://ghbtns.com/github-btn.html?user=chartdb&repo=chartdb&type=star&size=large&text=false",width:"40",height:"30",title:"GitHub"})})]}),a?e.jsxs("div",{className:"flex flex-1 flex-col p-3 pb-5 text-center md:px-28 md:text-left",children:[e.jsx(g,{className:"mb-2",children:e.jsxs(u,{children:[e.jsx(o,{children:e.jsx(d,{href:"/templates",children:"Templates"})}),e.jsx(b,{}),e.jsx(o,{children:e.jsx(d,{href:`/templates/${s}`,children:s})})]})}),e.jsxs("div",{className:"flex flex-col items-center gap-4 md:flex-row md:items-start md:justify-between md:gap-0",children:[e.jsxs("div",{className:"flex flex-col pr-0 md:pr-20",children:[e.jsxs("h1",{className:"flex flex-col font-primary text-2xl font-bold",children:[a==null?void 0:a.name,e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Database schema diagram"})]}),e.jsxs("h2",{className:"mt-3",children:[e.jsxs("span",{className:"font-semibold",children:[a==null?void 0:a.shortDescription,": "]}),a==null?void 0:a.description]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(z,{onClick:N,children:[e.jsx(q,{className:"mr-2",size:"16"}),"Clone Template"]})})]}),e.jsx(c,{className:"my-5"}),e.jsxs("div",{className:"flex w-full flex-1 flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"relative top-0 flex h-fit w-full shrink-0 flex-col gap-4 md:sticky md:top-1 md:w-60",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1 text-base font-semibold md:text-left",children:"Metadata"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsxs("div",{className:"inline-flex",children:[e.jsx("span",{className:"mr-2",children:"Database:"}),e.jsxs(C,{children:[e.jsx(T,{asChild:!0,children:e.jsx("img",{src:R[a.diagram.databaseType],className:"h-5 max-w-fit",alt:"database"})}),e.jsx($,{children:P[a.diagram.databaseType]})]})]})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{children:"Tables:"}),e.jsx("span",{className:"ml-2 font-semibold",children:((h=(x=a==null?void 0:a.diagram)==null?void 0:x.tables)==null?void 0:h.length)??0})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{children:"Relationships:"}),e.jsx("span",{className:"ml-2 font-semibold",children:((p=(f=a==null?void 0:a.diagram)==null?void 0:f.relationships)==null?void 0:p.length)??0})]})]}),e.jsx(c,{}),a.url?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1 text-base font-semibold md:text-left",children:"Url"}),e.jsx(G,{className:"break-all text-sm text-muted-foreground",href:`${a.url}?ref=chartdb`,target:"_blank",children:a.url})]}),e.jsx(c,{})]}):null,e.jsxs("div",{children:[e.jsx("h4",{className:"mb-1 text-base font-semibold md:text-left",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1 md:justify-start",children:a.tags.map(j=>e.jsx(O,{variant:"outline",children:j},`${a.slug}_${j}`))})]})]}),e.jsx("div",{className:"flex min-h-96 overflow-hidden rounded border md:flex-1 md:rounded-lg",children:e.jsx("div",{className:"size-full",children:e.jsx(E,{diagram:a.diagram,readonly:!0,children:e.jsx(A,{readonly:!0,initialTables:a.diagram.tables??[]})})})})]})]}):e.jsx(U,{size:"large",className:"mt-20 text-pink-600"})]})]})},re=()=>e.jsx(H,{children:e.jsx(M,{children:e.jsx(I,{children:e.jsx(K,{})})})});export{re as TemplatePage};
