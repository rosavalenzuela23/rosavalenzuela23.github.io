import{d as pd,c as _e,u as gd}from"./theme-provider-Bg5O9Ay7.js";import{r as m,y as yd,K as xd,j as x,P as Oe,L as vd,M as wd,g as be,b as Ne,N as bd,i as B,v as ar,x as Ke,S as io,C as pt,w as so,z as de,s as _d,q as zs,t as Bs,A as Cd,G as cr,O as Ed,Q as Sd,D as Md,E as Nd,F as Td,o as kd,l as Ge,U as ao,h as Id,W as Rd,X as Dd,T as Vs,e as Xs,f as Ys,I as Ad}from"./index-DngGMs-x.js";import{r as Gs,m as Pd,v as $d}from"./colors-D1Sckjvp.js";import{D as me}from"./database-type-C2NNW5SW.js";import{u as jd,d as Ld,a as Ws,e as Od,z as ie,s as Mt}from"./use-storage-CxjMvB6O.js";import{B as Qt,L as Fd}from"./label-B61IYMRO.js";var Hd="Portal",Us=m.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[o,i]=m.useState(!1);yd(()=>i(!0),[]);const s=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?xd.createPortal(x.jsx(Oe.div,{...r,ref:t}),s):null});Us.displayName=Hd;const zd=(e,t,n,r)=>{var i,s,a,c;const o=[n,{code:t,...r||{}}];if((s=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&s.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);ft(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(c=(a=e==null?void 0:e.services)==null?void 0:a.logger)!=null&&c.warn?e.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},di={},co=(e,t,n,r)=>{ft(n)&&di[n]||(ft(n)&&(di[n]=new Date),zd(e,t,n,r))},Ks=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},uo=(e,t,n)=>{e.loadNamespaces(t,Ks(e,n))},fi=(e,t,n,r)=>{if(ft(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return uo(e,n,r);n.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,Ks(e,r))},Bd=(e,t,n={})=>!t.languages||!t.languages.length?(co(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,o)=>{var i;if(((i=n.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,e))return!1}}),ft=e=>typeof e=="string",Vd=e=>typeof e=="object"&&e!==null,Xd=m.createContext();class Yd{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Gd=(e,t)=>{const n=m.useRef();return m.useEffect(()=>{n.current=e},[e,t]),n.current},qs=(e,t,n,r)=>e.getFixedT(t,n,r),Wd=(e,t,n,r)=>m.useCallback(qs(e,t,n,r),[e,t,n,r]),Zs=(e,t={})=>{var v,M,P,S;const{i18n:n}=t,{i18n:r,defaultNS:o}=m.useContext(Xd)||{},i=n||r||vd();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new Yd),!i){co(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const I=(A,O)=>ft(O)?O:Vd(O)&&ft(O.defaultValue)?O.defaultValue:Array.isArray(A)?A[A.length-1]:A,R=[I,{},!1];return R.t=I,R.i18n={},R.ready=!1,R}(v=i.options.react)!=null&&v.wait&&co(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...wd(),...i.options.react,...t},{useSuspense:a,keyPrefix:c}=s;let l=o||((M=i.options)==null?void 0:M.defaultNS);l=ft(l)?[l]:l||["translation"],(S=(P=i.reportNamespaces).addUsedNamespaces)==null||S.call(P,l);const u=(i.isInitialized||i.initializedStoreOnce)&&l.every(I=>Bd(I,i,s)),d=Wd(i,t.lng||null,s.nsMode==="fallback"?l:l[0],c),f=()=>d,h=()=>qs(i,t.lng||null,s.nsMode==="fallback"?l:l[0],c),[p,g]=m.useState(f);let w=l.join();t.lng&&(w=`${t.lng}${w}`);const y=Gd(w),C=m.useRef(!0);m.useEffect(()=>{const{bindI18n:I,bindI18nStore:R}=s;C.current=!0,!u&&!a&&(t.lng?fi(i,t.lng,l,()=>{C.current&&g(h)}):uo(i,l,()=>{C.current&&g(h)})),u&&y&&y!==w&&C.current&&g(h);const A=()=>{C.current&&g(h)};return I&&(i==null||i.on(I,A)),R&&(i==null||i.store.on(R,A)),()=>{C.current=!1,i&&(I==null||I.split(" ").forEach(O=>i.off(O,A))),R&&i&&R.split(" ").forEach(O=>i.store.off(O,A))}},[i,w]),m.useEffect(()=>{C.current&&u&&g(f)},[i,c,u]);const b=[p,i,u];if(b.t=p,b.i18n=i,b.ready=u,u||!u&&!a)return b;throw new Promise(I=>{t.lng?fi(i,t.lng,l,()=>I()):uo(i,l,()=>I())})},Ud={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1400px"};function Kd(e){const t=pd({query:`(min-width: ${Ud[e]})`});return{[`is${e[0].toUpperCase()+e.substring(1)}`]:t}}/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=_e("ChevronsLeftRight",[["path",{d:"m9 7-5 5 5 5",key:"j5w590"}],["path",{d:"m15 7 5 5-5 5",key:"1bl6da"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=_e("ChevronsRightLeft",[["path",{d:"m20 17-5-5 5-5",key:"30x0n2"}],["path",{d:"m4 17 5-5-5-5",key:"16spf4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=_e("CircleDotDashed",[["path",{d:"M10.1 2.18a9.93 9.93 0 0 1 3.8 0",key:"1qdqn0"}],["path",{d:"M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7",key:"1bq7p6"}],["path",{d:"M21.82 10.1a9.93 9.93 0 0 1 0 3.8",key:"1rlaqf"}],["path",{d:"M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69",key:"1xk03u"}],["path",{d:"M13.9 21.82a9.94 9.94 0 0 1-3.8 0",key:"l7re25"}],["path",{d:"M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7",key:"1v18p6"}],["path",{d:"M2.18 13.9a9.93 9.93 0 0 1 0-3.8",key:"xdo6bj"}],["path",{d:"M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69",key:"1jjmaz"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=_e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=_e("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=_e("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=_e("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=_e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=_e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=_e("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=_e("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),Ao=be.forwardRef(({className:e,type:t,...n},r)=>x.jsx("input",{type:t,className:Ne("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Ao.displayName="Input";var ea={},lo=function(e,t){return lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},lo(e,t)};function ta(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");lo(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ke=function(){return ke=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ke.apply(this,arguments)};function ur(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function na(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function ra(e,t){return function(n,r){t(n,r,e)}}function oa(e,t,n,r,o,i){function s(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,h=n.length-1;h>=0;h--){var p={};for(var g in r)p[g]=g==="access"?{}:r[g];for(var g in r.access)p.access[g]=r.access[g];p.addInitializer=function(y){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(y||null))};var w=(0,n[h])(a==="accessor"?{get:u.get,set:u.set}:u[c],p);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=s(w.get))&&(u.get=d),(d=s(w.set))&&(u.set=d),(d=s(w.init))&&o.unshift(d)}else(d=s(w))&&(a==="field"?o.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0}function ia(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function sa(e){return typeof e=="symbol"?e:"".concat(e)}function aa(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function ca(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ua(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function la(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],o=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var lr=Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function da(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&lr(t,e,n)}function tn(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Po(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function fa(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Po(arguments[t]));return e}function ha(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function $o(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function Rt(e){return this instanceof Rt?(this.v=e,this):new Rt(e)}function ma(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(o[h]=function(g){return new Promise(function(w,y){i.push([h,g,w,y])>1||c(h,g)})},p&&(o[h]=p(o[h])))}function c(h,p){try{l(r[h](p))}catch(g){f(i[0][3],g)}}function l(h){h.value instanceof Rt?Promise.resolve(h.value.v).then(u,d):f(i[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function pa(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,i){t[o]=e[o]?function(s){return(n=!n)?{value:Rt(e[o](s)),done:!1}:i?i(s):s}:i}}function ga(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof tn=="function"?tn(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}function ya(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var cf=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},fo=function(e){return fo=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},fo(e)};function xa(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=fo(e),r=0;r<n.length;r++)n[r]!=="default"&&lr(t,e,n[r]);return cf(t,e),t}function va(e){return e&&e.__esModule?e:{default:e}}function wa(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function ba(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function _a(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Ca(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var uf=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Ea(e){function t(i){e.error=e.hasError?new uf(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var n,r=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(o,function(s){return t(s),o()})}else r|=1}catch(s){t(s)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function Sa(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,i,s){return r?t?".jsx":".js":o&&(!i||!s)?n:o+i+"."+s.toLowerCase()+"js"}):e}const lf={__extends:ta,__assign:ke,__rest:ur,__decorate:na,__param:ra,__esDecorate:oa,__runInitializers:ia,__propKey:sa,__setFunctionName:aa,__metadata:ca,__awaiter:ua,__generator:la,__createBinding:lr,__exportStar:da,__values:tn,__read:Po,__spread:fa,__spreadArrays:ha,__spreadArray:$o,__await:Rt,__asyncGenerator:ma,__asyncDelegator:pa,__asyncValues:ga,__makeTemplateObject:ya,__importStar:xa,__importDefault:va,__classPrivateFieldGet:wa,__classPrivateFieldSet:ba,__classPrivateFieldIn:_a,__addDisposableResource:Ca,__disposeResources:Ea,__rewriteRelativeImportExtension:Sa},df=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ca,get __assign(){return ke},__asyncDelegator:pa,__asyncGenerator:ma,__asyncValues:ga,__await:Rt,__awaiter:ua,__classPrivateFieldGet:wa,__classPrivateFieldIn:_a,__classPrivateFieldSet:ba,__createBinding:lr,__decorate:na,__disposeResources:Ea,__esDecorate:oa,__exportStar:da,__extends:ta,__generator:la,__importDefault:va,__importStar:xa,__makeTemplateObject:ya,__metadata:ca,__param:ra,__propKey:sa,__read:Po,__rest:ur,__rewriteRelativeImportExtension:Sa,__runInitializers:ia,__setFunctionName:aa,__spread:fa,__spreadArray:$o,__spreadArrays:ha,__values:tn,default:lf},Symbol.toStringTag,{value:"Module"})),ff=bd(df);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.default=o;var t=ff,n=m,r=e.EventEmitter=function(){function i(){var s=this;this.subscriptions=new Set,this.emit=function(a){var c,l;try{for(var u=(0,t.__values)(s.subscriptions),d=u.next();!d.done;d=u.next()){var f=d.value;f(a)}}catch(h){c={error:h}}finally{try{d&&!d.done&&(l=u.return)&&l.call(u)}finally{if(c)throw c.error}}},this.useSubscription=function(a){var c=(0,n.useRef)();c.current=a,(0,n.useEffect)(function(){function l(u){c.current&&c.current(u)}return s.subscriptions.add(l),function(){s.subscriptions.delete(l)}},[])}}return i}();function o(){var i=(0,n.useRef)();return i.current||(i.current=new r),i.current}})(ea);const Ma=m.createContext({databaseType:me.GENERIC,diagramName:"",diagramId:"",tables:[],relationships:[],dependencies:[],schemas:[],filteredSchemas:[],filterSchemas:B,currentDiagram:{id:"",name:"",databaseType:me.GENERIC,createdAt:new Date,updatedAt:new Date},events:new ea.EventEmitter,updateDiagramId:B,updateDiagramName:B,updateDiagramUpdatedAt:B,loadDiagram:B,loadDiagramFromData:B,clearDiagramData:B,deleteDiagram:B,updateDatabaseType:B,updateDatabaseEdition:B,createTable:B,getTable:B,addTable:B,addTables:B,removeTable:B,removeTables:B,updateTable:B,updateTablesState:B,updateField:B,removeField:B,createField:B,addField:B,getField:B,createIndex:B,addIndex:B,getIndex:B,removeIndex:B,updateIndex:B,createRelationship:B,addRelationship:B,getRelationship:B,removeRelationship:B,updateRelationship:B,removeRelationships:B,addRelationships:B,createDependency:B,addDependency:B,getDependency:B,removeDependency:B,removeDependencies:B,addDependencies:B,updateDependency:B}),dr=()=>m.useContext(Ma);function hf(){var e=m.useRef(!0);return e.current?(e.current=!1,!0):e.current}var mf=function(e,t){var n=hf();m.useEffect(function(){if(!n)return e()},t)},pf=function(){};function Na(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function Ta(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var gf=typeof window<"u",yf=["mousedown","touchstart"],ka=function(e,t,n){n===void 0&&(n=yf);var r=m.useRef(t);m.useEffect(function(){r.current=t},[t]),m.useEffect(function(){for(var o=function(c){var l=e.current;l&&!l.contains(c.target)&&r.current(c)},i=0,s=n;i<s.length;i++){var a=s[i];Na(document,a,o)}return function(){for(var c=0,l=n;c<l.length;c++){var u=l[c];Ta(document,u,o)}}},[n,e])},xf=gf?window:null,hi=function(e){return!!e.addEventListener},mi=function(e){return!!e.on},vf=function(e,t,n,r){n===void 0&&(n=xf),m.useEffect(function(){if(t&&n)return hi(n)?Na(n,e,t,r):mi(n)&&n.on(e,t,r),function(){hi(n)?Ta(n,e,t,r):mi(n)&&n.off(e,t,r)}},[e,t,n,JSON.stringify(r)])},wf=function(e){return typeof e=="function"?e:typeof e=="string"?function(t){return t.key===e}:e?function(){return!0}:function(){return!1}},pi=function(e,t,n,r){t===void 0&&(t=pf),n===void 0&&(n={}),r===void 0&&(r=[e]);var o=n.event,i=o===void 0?"keydown":o,s=n.target,a=n.options,c=m.useMemo(function(){var l=wf(e),u=function(d){if(l(d))return t(d)};return u},r);vf(i,c,s,a)},bf=function(e){var t=m.useState([!1,null]),n=t[0],r=t[1];return pi(e,function(o){return r([!0,o])},{event:"keydown"},[n]),pi(e,function(o){return r([!1,o])},{event:"keyup"},[n]),n},Un=function(e,t,n,r){r===void 0&&(r=bf);var o=r(e),i=o[0],s=o[1];mf(function(){i&&t&&t(s)},[i])};function Ia(e){const t=e+"CollectionProvider",[n,r]=ar(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=h=>{const{scope:p,children:g}=h,w=be.useRef(null),y=be.useRef(new Map).current;return x.jsx(o,{scope:p,itemMap:y,collectionRef:w,children:g})};s.displayName=t;const a=e+"CollectionSlot",c=be.forwardRef((h,p)=>{const{scope:g,children:w}=h,y=i(a,g),C=Ke(p,y.collectionRef);return x.jsx(io,{ref:C,children:w})});c.displayName=a;const l=e+"CollectionItemSlot",u="data-radix-collection-item",d=be.forwardRef((h,p)=>{const{scope:g,children:w,...y}=h,C=be.useRef(null),b=Ke(p,C),v=i(l,g);return be.useEffect(()=>(v.itemMap.set(C,{ref:C,...y}),()=>void v.itemMap.delete(C))),x.jsx(io,{[u]:"",ref:b,children:w})});d.displayName=l;function f(h){const p=i(e+"CollectionConsumer",h);return be.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const y=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((v,M)=>y.indexOf(v.ref.current)-y.indexOf(M.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:c,ItemSlot:d},f,r]}var _f=m.createContext(void 0);function Ra(e){const t=m.useContext(_f);return e||t||"ltr"}var jr=0;function Cf(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??gi()),document.body.insertAdjacentElement("beforeend",e[1]??gi()),jr++,()=>{jr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),jr--}},[])}function gi(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Lr="focusScope.autoFocusOnMount",Or="focusScope.autoFocusOnUnmount",yi={bubbles:!1,cancelable:!0},Ef="FocusScope",Da=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[a,c]=m.useState(null),l=pt(o),u=pt(i),d=m.useRef(null),f=Ke(t,g=>c(g)),h=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let g=function(b){if(h.paused||!a)return;const v=b.target;a.contains(v)?d.current=v:nt(d.current,{select:!0})},w=function(b){if(h.paused||!a)return;const v=b.relatedTarget;v!==null&&(a.contains(v)||nt(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const M of b)M.removedNodes.length>0&&nt(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const C=new MutationObserver(y);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),C.disconnect()}}},[r,a,h.paused]),m.useEffect(()=>{if(a){vi.add(h);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(Lr,yi);a.addEventListener(Lr,l),a.dispatchEvent(y),y.defaultPrevented||(Sf(If(Aa(a)),{select:!0}),document.activeElement===g&&nt(a))}return()=>{a.removeEventListener(Lr,l),setTimeout(()=>{const y=new CustomEvent(Or,yi);a.addEventListener(Or,u),a.dispatchEvent(y),y.defaultPrevented||nt(g??document.body,{select:!0}),a.removeEventListener(Or,u),vi.remove(h)},0)}}},[a,l,u,h]);const p=m.useCallback(g=>{if(!n&&!r||h.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(w&&y){const C=g.currentTarget,[b,v]=Mf(C);b&&v?!g.shiftKey&&y===v?(g.preventDefault(),n&&nt(b,{select:!0})):g.shiftKey&&y===b&&(g.preventDefault(),n&&nt(v,{select:!0})):y===C&&g.preventDefault()}},[n,r,h.paused]);return x.jsx(Oe.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});Da.displayName=Ef;function Sf(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(nt(r,{select:t}),document.activeElement!==n)return}function Mf(e){const t=Aa(e),n=xi(t,e),r=xi(t.reverse(),e);return[n,r]}function Aa(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xi(e,t){for(const n of e)if(!Nf(n,{upTo:t}))return n}function Nf(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Tf(e){return e instanceof HTMLInputElement&&"select"in e}function nt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Tf(e)&&t&&e.select()}}var vi=kf();function kf(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=wi(e,t),e.unshift(t)},remove(t){var n;e=wi(e,t),(n=e[0])==null||n.resume()}}}function wi(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function If(e){return e.filter(t=>t.tagName!=="A")}var Fr="rovingFocusGroup.onEntryFocus",Rf={bubbles:!1,cancelable:!0},fr="RovingFocusGroup",[ho,Pa,Df]=Ia(fr),[Af,$a]=ar(fr,[Df]),[Pf,$f]=Af(fr),ja=m.forwardRef((e,t)=>x.jsx(ho.Provider,{scope:e.__scopeRovingFocusGroup,children:x.jsx(ho.Slot,{scope:e.__scopeRovingFocusGroup,children:x.jsx(jf,{...e,ref:t})})}));ja.displayName=fr;var jf=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=m.useRef(null),h=Ke(t,f),p=Ra(i),[g=null,w]=_d({prop:s,defaultProp:a,onChange:c}),[y,C]=m.useState(!1),b=pt(l),v=Pa(n),M=m.useRef(!1),[P,S]=m.useState(0);return m.useEffect(()=>{const I=f.current;if(I)return I.addEventListener(Fr,b),()=>I.removeEventListener(Fr,b)},[b]),x.jsx(Pf,{scope:n,orientation:r,dir:p,loop:o,currentTabStopId:g,onItemFocus:m.useCallback(I=>w(I),[w]),onItemShiftTab:m.useCallback(()=>C(!0),[]),onFocusableItemAdd:m.useCallback(()=>S(I=>I+1),[]),onFocusableItemRemove:m.useCallback(()=>S(I=>I-1),[]),children:x.jsx(Oe.div,{tabIndex:y||P===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:de(e.onMouseDown,()=>{M.current=!0}),onFocus:de(e.onFocus,I=>{const R=!M.current;if(I.target===I.currentTarget&&R&&!y){const A=new CustomEvent(Fr,Rf);if(I.currentTarget.dispatchEvent(A),!A.defaultPrevented){const O=v().filter(E=>E.focusable),H=O.find(E=>E.active),F=O.find(E=>E.id===g),k=[H,F,...O].filter(Boolean).map(E=>E.ref.current);Fa(k,u)}}M.current=!1}),onBlur:de(e.onBlur,()=>C(!1))})})}),La="RovingFocusGroupItem",Oa=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,...s}=e,a=so(),c=i||a,l=$f(La,n),u=l.currentTabStopId===c,d=Pa(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=l;return m.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),x.jsx(ho.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:x.jsx(Oe.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...s,ref:t,onMouseDown:de(e.onMouseDown,p=>{r?l.onItemFocus(c):p.preventDefault()}),onFocus:de(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:de(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){l.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=Ff(p,l.orientation,l.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=d().filter(C=>C.focusable).map(C=>C.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const C=y.indexOf(p.currentTarget);y=l.loop?Hf(y,C+1):y.slice(C+1)}setTimeout(()=>Fa(y))}})})})});Oa.displayName=La;var Lf={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Of(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ff(e,t,n){const r=Of(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Lf[r]}function Fa(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Hf(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var zf=ja,Bf=Oa,Vf=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},bt=new WeakMap,Cn=new WeakMap,En={},Hr=0,Ha=function(e){return e&&(e.host||Ha(e.parentNode))},Xf=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Ha(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Yf=function(e,t,n,r){var o=Xf(t,Array.isArray(e)?e:[e]);En[n]||(En[n]=new WeakMap);var i=En[n],s=[],a=new Set,c=new Set(o),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};o.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),p=h!==null&&h!=="false",g=(bt.get(f)||0)+1,w=(i.get(f)||0)+1;bt.set(f,g),i.set(f,w),s.push(f),g===1&&p&&Cn.set(f,!0),w===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(t),a.clear(),Hr++,function(){s.forEach(function(d){var f=bt.get(d)-1,h=i.get(d)-1;bt.set(d,f),i.set(d,h),f||(Cn.has(d)||d.removeAttribute(r),Cn.delete(d)),h||d.removeAttribute(n)}),Hr--,Hr||(bt=new WeakMap,bt=new WeakMap,Cn=new WeakMap,En={})}},Gf=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Vf(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),Yf(r,o,n,"aria-hidden")):function(){return null}},Fn="right-scroll-bar-position",Hn="width-before-scroll-bar",Wf="with-scroll-bars-hidden",Uf="--removed-body-scroll-bar-size";function zr(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Kf(e,t){var n=m.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var qf=typeof window<"u"?m.useLayoutEffect:m.useEffect,bi=new WeakMap;function Zf(e,t){var n=Kf(null,function(r){return e.forEach(function(o){return zr(o,r)})});return qf(function(){var r=bi.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(a){i.has(a)||zr(a,null)}),i.forEach(function(a){o.has(a)||zr(a,s)})}bi.set(n,e)},[e]),n}function Qf(e){return e}function Jf(e,t){t===void 0&&(t=Qf);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var c=function(){var u=s;s=[],u.forEach(i)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){s.push(u),l()},filter:function(u){return s=s.filter(u),n}}}};return o}function eh(e){e===void 0&&(e={});var t=Jf(null);return t.options=ke({async:!0,ssr:!1},e),t}var za=function(e){var t=e.sideCar,n=ur(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,ke({},n))};za.isSideCarExport=!0;function th(e,t){return e.useMedium(t),za}var Ba=eh(),Br=function(){},hr=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:Br,onWheelCapture:Br,onTouchMoveCapture:Br}),o=r[0],i=r[1],s=e.forwardProps,a=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,p=e.inert,g=e.allowPinchZoom,w=e.as,y=w===void 0?"div":w,C=e.gapMode,b=ur(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=f,M=Zf([n,t]),P=ke(ke({},b),o);return m.createElement(m.Fragment,null,u&&m.createElement(v,{sideCar:Ba,removeScrollBar:l,shards:d,noIsolation:h,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:C}),s?m.cloneElement(m.Children.only(a),ke(ke({},P),{ref:M})):m.createElement(y,ke({},P,{className:c,ref:M}),a))});hr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hr.classNames={fullWidth:Hn,zeroRight:Fn};var nh=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rh(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=nh();return t&&e.setAttribute("nonce",t),e}function oh(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ih(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var sh=function(){var e=0,t=null;return{add:function(n){e==0&&(t=rh())&&(oh(t,n),ih(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ah=function(){var e=sh();return function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Va=function(){var e=ah(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},ch={left:0,top:0,right:0,gap:0},Vr=function(e){return parseInt(e||"",10)||0},uh=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Vr(n),Vr(r),Vr(o)]},lh=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ch;var t=uh(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},dh=Va(),Nt="data-scroll-locked",fh=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Wf,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Nt,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fn,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Hn,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Fn," .").concat(Fn,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hn," .").concat(Hn,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Nt,`] {
    `).concat(Uf,": ").concat(a,`px;
  }
`)},_i=function(){var e=parseInt(document.body.getAttribute(Nt)||"0",10);return isFinite(e)?e:0},hh=function(){m.useEffect(function(){return document.body.setAttribute(Nt,(_i()+1).toString()),function(){var e=_i()-1;e<=0?document.body.removeAttribute(Nt):document.body.setAttribute(Nt,e.toString())}},[])},mh=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;hh();var i=m.useMemo(function(){return lh(o)},[o]);return m.createElement(dh,{styles:fh(i,!t,o,n?"":"!important")})},mo=!1;if(typeof window<"u")try{var Sn=Object.defineProperty({},"passive",{get:function(){return mo=!0,!0}});window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{mo=!1}var _t=mo?{passive:!1}:!1,ph=function(e){return e.tagName==="TEXTAREA"},Xa=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ph(e)&&n[t]==="visible")},gh=function(e){return Xa(e,"overflowY")},yh=function(e){return Xa(e,"overflowX")},Ci=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Ya(e,r);if(o){var i=Ga(e,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},xh=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},vh=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Ya=function(e,t){return e==="v"?gh(t):yh(t)},Ga=function(e,t){return e==="v"?xh(t):vh(t)},wh=function(e,t){return e==="h"&&t==="rtl"?-1:1},bh=function(e,t,n,r,o){var i=wh(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,c=t.contains(a),l=!1,u=s>0,d=0,f=0;do{var h=Ga(e,a),p=h[0],g=h[1],w=h[2],y=g-w-i*p;(p||y)&&Ya(e,a)&&(d+=y,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(l=!0),l},Mn=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ei=function(e){return[e.deltaX,e.deltaY]},Si=function(e){return e&&"current"in e?e.current:e},_h=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ch=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Eh=0,Ct=[];function Sh(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),o=m.useState(Eh++)[0],i=m.useState(Va)[0],s=m.useRef(e);m.useEffect(function(){s.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var g=$o([e.lockRef.current],(e.shards||[]).map(Si),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=m.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!s.current.allowPinchZoom;var y=Mn(g),C=n.current,b="deltaX"in g?g.deltaX:C[0]-y[0],v="deltaY"in g?g.deltaY:C[1]-y[1],M,P=g.target,S=Math.abs(b)>Math.abs(v)?"h":"v";if("touches"in g&&S==="h"&&P.type==="range")return!1;var I=Ci(S,P);if(!I)return!0;if(I?M=S:(M=S==="v"?"h":"v",I=Ci(S,P)),!I)return!1;if(!r.current&&"changedTouches"in g&&(b||v)&&(r.current=M),!M)return!0;var R=r.current||M;return bh(R,w,g,R==="h"?b:v)},[]),c=m.useCallback(function(g){var w=g;if(!(!Ct.length||Ct[Ct.length-1]!==i)){var y="deltaY"in w?Ei(w):Mn(w),C=t.current.filter(function(M){return M.name===w.type&&(M.target===w.target||w.target===M.shadowParent)&&_h(M.delta,y)})[0];if(C&&C.should){w.cancelable&&w.preventDefault();return}if(!C){var b=(s.current.shards||[]).map(Si).filter(Boolean).filter(function(M){return M.contains(w.target)}),v=b.length>0?a(w,b[0]):!s.current.noIsolation;v&&w.cancelable&&w.preventDefault()}}},[]),l=m.useCallback(function(g,w,y,C){var b={name:g,delta:w,target:y,should:C,shadowParent:Mh(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(v){return v!==b})},1)},[]),u=m.useCallback(function(g){n.current=Mn(g),r.current=void 0},[]),d=m.useCallback(function(g){l(g.type,Ei(g),g.target,a(g,e.lockRef.current))},[]),f=m.useCallback(function(g){l(g.type,Mn(g),g.target,a(g,e.lockRef.current))},[]);m.useEffect(function(){return Ct.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,_t),document.addEventListener("touchmove",c,_t),document.addEventListener("touchstart",u,_t),function(){Ct=Ct.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,_t),document.removeEventListener("touchmove",c,_t),document.removeEventListener("touchstart",u,_t)}},[]);var h=e.removeScrollBar,p=e.inert;return m.createElement(m.Fragment,null,p?m.createElement(i,{styles:Ch(o)}):null,h?m.createElement(mh,{gapMode:e.gapMode}):null)}function Mh(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Nh=th(Ba,Sh);var Wa=m.forwardRef(function(e,t){return m.createElement(hr,ke({},e,{ref:t,sideCar:Nh}))});Wa.classNames=hr.classNames;var po=["Enter"," "],Th=["ArrowDown","PageUp","Home"],Ua=["ArrowUp","PageDown","End"],kh=[...Th,...Ua],Ih={ltr:[...po,"ArrowRight"],rtl:[...po,"ArrowLeft"]},Rh={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pn="Menu",[nn,Dh,Ah]=Ia(pn),[xt,Ka]=ar(pn,[Ah,zs,$a]),gn=zs(),qa=$a(),[Za,st]=xt(pn),[Ph,yn]=xt(pn),Qa=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=e,a=gn(t),[c,l]=m.useState(null),u=m.useRef(!1),d=pt(i),f=Ra(o);return m.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),x.jsx(Bs,{...a,children:x.jsx(Za,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:x.jsx(Ph,{scope:t,onClose:m.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:s,children:r})})})};Qa.displayName=pn;var $h="MenuAnchor",jo=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=gn(n);return x.jsx(Cd,{...o,...r,ref:t})});jo.displayName=$h;var Lo="MenuPortal",[jh,Ja]=xt(Lo,{forceMount:void 0}),ec=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,i=st(Lo,t);return x.jsx(jh,{scope:t,forceMount:n,children:x.jsx(cr,{present:n||i.open,children:x.jsx(Us,{asChild:!0,container:o,children:r})})})};ec.displayName=Lo;var Ie="MenuContent",[Lh,Oo]=xt(Ie),tc=m.forwardRef((e,t)=>{const n=Ja(Ie,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,i=st(Ie,e.__scopeMenu),s=yn(Ie,e.__scopeMenu);return x.jsx(nn.Provider,{scope:e.__scopeMenu,children:x.jsx(cr,{present:r||i.open,children:x.jsx(nn.Slot,{scope:e.__scopeMenu,children:s.modal?x.jsx(Oh,{...o,ref:t}):x.jsx(Fh,{...o,ref:t})})})})}),Oh=m.forwardRef((e,t)=>{const n=st(Ie,e.__scopeMenu),r=m.useRef(null),o=Ke(t,r);return m.useEffect(()=>{const i=r.current;if(i)return Gf(i)},[]),x.jsx(Fo,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:de(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Fh=m.forwardRef((e,t)=>{const n=st(Ie,e.__scopeMenu);return x.jsx(Fo,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Fo=m.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...g}=e,w=st(Ie,n),y=yn(Ie,n),C=gn(n),b=qa(n),v=Dh(n),[M,P]=m.useState(null),S=m.useRef(null),I=Ke(t,S,w.onContentChange),R=m.useRef(0),A=m.useRef(""),O=m.useRef(0),H=m.useRef(null),F=m.useRef("right"),_=m.useRef(0),k=p?Wa:m.Fragment,E=p?{as:io,allowPinchZoom:!0}:void 0,$=T=>{var Y,G;const j=A.current+T,z=v().filter(ne=>!ne.disabled),V=document.activeElement,ee=(Y=z.find(ne=>ne.ref.current===V))==null?void 0:Y.textValue,U=z.map(ne=>ne.textValue),Z=Zh(U,j,ee),J=(G=z.find(ne=>ne.textValue===Z))==null?void 0:G.ref.current;(function ne(oe){A.current=oe,window.clearTimeout(R.current),oe!==""&&(R.current=window.setTimeout(()=>ne(""),1e3))})(j),J&&setTimeout(()=>J.focus())};m.useEffect(()=>()=>window.clearTimeout(R.current),[]),Cf();const D=m.useCallback(T=>{var z,V;return F.current===((z=H.current)==null?void 0:z.side)&&Jh(T,(V=H.current)==null?void 0:V.area)},[]);return x.jsx(Lh,{scope:n,searchRef:A,onItemEnter:m.useCallback(T=>{D(T)&&T.preventDefault()},[D]),onItemLeave:m.useCallback(T=>{var j;D(T)||((j=S.current)==null||j.focus(),P(null))},[D]),onTriggerLeave:m.useCallback(T=>{D(T)&&T.preventDefault()},[D]),pointerGraceTimerRef:O,onPointerGraceIntentChange:m.useCallback(T=>{H.current=T},[]),children:x.jsx(k,{...E,children:x.jsx(Da,{asChild:!0,trapped:o,onMountAutoFocus:de(i,T=>{var j;T.preventDefault(),(j=S.current)==null||j.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:x.jsx(Md,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:x.jsx(zf,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:P,onEntryFocus:de(c,T=>{y.isUsingKeyboardRef.current||T.preventDefault()}),preventScrollOnEntryFocus:!0,children:x.jsx(Nd,{role:"menu","aria-orientation":"vertical","data-state":xc(w.open),"data-radix-menu-content":"",dir:y.dir,...C,...g,ref:I,style:{outline:"none",...g.style},onKeyDown:de(g.onKeyDown,T=>{const z=T.target.closest("[data-radix-menu-content]")===T.currentTarget,V=T.ctrlKey||T.altKey||T.metaKey,ee=T.key.length===1;z&&(T.key==="Tab"&&T.preventDefault(),!V&&ee&&$(T.key));const U=S.current;if(T.target!==U||!kh.includes(T.key))return;T.preventDefault();const J=v().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);Ua.includes(T.key)&&J.reverse(),Kh(J)}),onBlur:de(e.onBlur,T=>{T.currentTarget.contains(T.target)||(window.clearTimeout(R.current),A.current="")}),onPointerMove:de(e.onPointerMove,rn(T=>{const j=T.target,z=_.current!==T.clientX;if(T.currentTarget.contains(j)&&z){const V=T.clientX>_.current?"right":"left";F.current=V,_.current=T.clientX}}))})})})})})})});tc.displayName=Ie;var Hh="MenuGroup",Ho=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return x.jsx(Oe.div,{role:"group",...r,ref:t})});Ho.displayName=Hh;var zh="MenuLabel",nc=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return x.jsx(Oe.div,{...r,ref:t})});nc.displayName=zh;var Kn="MenuItem",Mi="menu.itemSelect",mr=m.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,i=m.useRef(null),s=yn(Kn,e.__scopeMenu),a=Oo(Kn,e.__scopeMenu),c=Ke(t,i),l=m.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const f=new CustomEvent(Mi,{bubbles:!0,cancelable:!0});d.addEventListener(Mi,h=>r==null?void 0:r(h),{once:!0}),Sd(d,f),f.defaultPrevented?l.current=!1:s.onClose()}};return x.jsx(rc,{...o,ref:c,disabled:n,onClick:de(e.onClick,u),onPointerDown:d=>{var f;(f=e.onPointerDown)==null||f.call(e,d),l.current=!0},onPointerUp:de(e.onPointerUp,d=>{var f;l.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:de(e.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||po.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});mr.displayName=Kn;var rc=m.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=e,s=Oo(Kn,n),a=qa(n),c=m.useRef(null),l=Ke(t,c),[u,d]=m.useState(!1),[f,h]=m.useState("");return m.useEffect(()=>{const p=c.current;p&&h((p.textContent??"").trim())},[i.children]),x.jsx(nn.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:x.jsx(Bf,{asChild:!0,...a,focusable:!r,children:x.jsx(Oe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:l,onPointerMove:de(e.onPointerMove,rn(p=>{r?s.onItemLeave(p):(s.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:de(e.onPointerLeave,rn(p=>s.onItemLeave(p))),onFocus:de(e.onFocus,()=>d(!0)),onBlur:de(e.onBlur,()=>d(!1))})})})}),Bh="MenuCheckboxItem",oc=m.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return x.jsx(uc,{scope:e.__scopeMenu,checked:n,children:x.jsx(mr,{role:"menuitemcheckbox","aria-checked":qn(n)?"mixed":n,...o,ref:t,"data-state":Vo(n),onSelect:de(o.onSelect,()=>r==null?void 0:r(qn(n)?!0:!n),{checkForDefaultPrevented:!1})})})});oc.displayName=Bh;var ic="MenuRadioGroup",[Vh,Xh]=xt(ic,{value:void 0,onValueChange:()=>{}}),sc=m.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,i=pt(r);return x.jsx(Vh,{scope:e.__scopeMenu,value:n,onValueChange:i,children:x.jsx(Ho,{...o,ref:t})})});sc.displayName=ic;var ac="MenuRadioItem",cc=m.forwardRef((e,t)=>{const{value:n,...r}=e,o=Xh(ac,e.__scopeMenu),i=n===o.value;return x.jsx(uc,{scope:e.__scopeMenu,checked:i,children:x.jsx(mr,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":Vo(i),onSelect:de(r.onSelect,()=>{var s;return(s=o.onValueChange)==null?void 0:s.call(o,n)},{checkForDefaultPrevented:!1})})})});cc.displayName=ac;var zo="MenuItemIndicator",[uc,Yh]=xt(zo,{checked:!1}),lc=m.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,i=Yh(zo,n);return x.jsx(cr,{present:r||qn(i.checked)||i.checked===!0,children:x.jsx(Oe.span,{...o,ref:t,"data-state":Vo(i.checked)})})});lc.displayName=zo;var Gh="MenuSeparator",dc=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return x.jsx(Oe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});dc.displayName=Gh;var Wh="MenuArrow",fc=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=gn(n);return x.jsx(Td,{...o,...r,ref:t})});fc.displayName=Wh;var Bo="MenuSub",[Uh,hc]=xt(Bo),mc=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,i=st(Bo,t),s=gn(t),[a,c]=m.useState(null),[l,u]=m.useState(null),d=pt(o);return m.useEffect(()=>(i.open===!1&&d(!1),()=>d(!1)),[i.open,d]),x.jsx(Bs,{...s,children:x.jsx(Za,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:x.jsx(Uh,{scope:t,contentId:so(),triggerId:so(),trigger:a,onTriggerChange:c,children:n})})})};mc.displayName=Bo;var Ut="MenuSubTrigger",pc=m.forwardRef((e,t)=>{const n=st(Ut,e.__scopeMenu),r=yn(Ut,e.__scopeMenu),o=hc(Ut,e.__scopeMenu),i=Oo(Ut,e.__scopeMenu),s=m.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,l={__scopeMenu:e.__scopeMenu},u=m.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return m.useEffect(()=>u,[u]),m.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),x.jsx(jo,{asChild:!0,...l,children:x.jsx(rc,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":xc(n.open),...e,ref:Ed(t,o.onTriggerChange),onClick:d=>{var f;(f=e.onClick)==null||f.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:de(e.onPointerMove,rn(d=>{i.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:de(e.onPointerLeave,rn(d=>{var h,p;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const g=(p=n.content)==null?void 0:p.dataset.side,w=g==="right",y=w?-5:5,C=f[w?"left":"right"],b=f[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:C,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:C,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:de(e.onKeyDown,d=>{var h;const f=i.searchRef.current!=="";e.disabled||f&&d.key===" "||Ih[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});pc.displayName=Ut;var gc="MenuSubContent",yc=m.forwardRef((e,t)=>{const n=Ja(Ie,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,i=st(Ie,e.__scopeMenu),s=yn(Ie,e.__scopeMenu),a=hc(gc,e.__scopeMenu),c=m.useRef(null),l=Ke(t,c);return x.jsx(nn.Provider,{scope:e.__scopeMenu,children:x.jsx(cr,{present:r||i.open,children:x.jsx(nn.Slot,{scope:e.__scopeMenu,children:x.jsx(Fo,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:l,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;s.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:de(e.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:de(e.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:de(e.onKeyDown,u=>{var h;const d=u.currentTarget.contains(u.target),f=Rh[s.dir].includes(u.key);d&&f&&(i.onOpenChange(!1),(h=a.trigger)==null||h.focus(),u.preventDefault())})})})})})});yc.displayName=gc;function xc(e){return e?"open":"closed"}function qn(e){return e==="indeterminate"}function Vo(e){return qn(e)?"indeterminate":e?"checked":"unchecked"}function Kh(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function qh(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Zh(e,t,n){const o=t.length>1&&Array.from(t).every(l=>l===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=qh(e,Math.max(i,0));o.length===1&&(s=s.filter(l=>l!==n));const c=s.find(l=>l.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function Qh(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const a=t[i].x,c=t[i].y,l=t[s].x,u=t[s].y;c>r!=u>r&&n<(l-a)*(r-c)/(u-c)+a&&(o=!o)}return o}function Jh(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Qh(n,t)}function rn(e){return t=>t.pointerType==="mouse"?e(t):void 0}var em=Qa,tm=jo,nm=ec,rm=tc,om=Ho,im=nc,sm=mr,am=oc,cm=sc,um=cc,lm=lc,dm=dc,fm=fc,K1=mc,hm=pc,mm=yc;function Ze(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var pm=["color"],q1=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,pm);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),gm=["color"],ym=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,gm);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xm=["color"],Z1=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,xm);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),vm=["color"],wm=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,vm);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),bm=["color"],Q1=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,bm);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),_m=["color"],J1=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,_m);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Cm=["color"],Em=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,Cm);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),Sm=["color"],eb=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,Sm);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Mm=["color"],tb=m.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ze(e,Mm);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),m.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),vc={exports:{}},wc={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=m;function Nm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tm=typeof Object.is=="function"?Object.is:Nm,km=Dt.useState,Im=Dt.useEffect,Rm=Dt.useLayoutEffect,Dm=Dt.useDebugValue;function Am(e,t){var n=t(),r=km({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Rm(function(){o.value=n,o.getSnapshot=t,Xr(o)&&i({inst:o})},[e,n,t]),Im(function(){return Xr(o)&&i({inst:o}),e(function(){Xr(o)&&i({inst:o})})},[e]),Dm(n),n}function Xr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tm(e,n)}catch{return!0}}function Pm(e,t){return t()}var $m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Pm:Am;wc.useSyncExternalStore=Dt.useSyncExternalStore!==void 0?Dt.useSyncExternalStore:$m;vc.exports=wc;var jm=vc.exports;const Lm=m.createContext({openCreateDiagramDialog:B,closeCreateDiagramDialog:B,openOpenDiagramDialog:B,closeOpenDiagramDialog:B,openExportSQLDialog:B,closeExportSQLDialog:B,closeCreateRelationshipDialog:B,openCreateRelationshipDialog:B,openImportDatabaseDialog:B,closeImportDatabaseDialog:B,openTableSchemaDialog:B,closeTableSchemaDialog:B,openStarUsDialog:B,closeStarUsDialog:B,openExportImageDialog:B,closeExportImageDialog:B,openExportDiagramDialog:B,closeExportDiagramDialog:B,openImportDiagramDialog:B,closeImportDiagramDialog:B,openBuckleDialog:B,closeBuckleDialog:B,openImportDBMLDialog:B,closeImportDBMLDialog:B}),Om=()=>m.useContext(Lm);var Fm=(e=>(e.REDO="redo",e.UNDO="undo",e.OPEN_DIAGRAM="open_diagram",e.SAVE_DIAGRAM="save_diagram",e.TOGGLE_SIDE_PANEL="toggle_side_panel",e.SHOW_ALL="show_all",e))(Fm||{});const Ni={redo:{action:"redo",keyCombinationLabelMac:"Z",keyCombinationLabelWin:"Ctrl+Shift+Z",keyCombinationMac:"meta+shift+z",keyCombinationWin:"ctrl+shift+z"},undo:{action:"undo",keyCombinationLabelMac:"Z",keyCombinationLabelWin:"Ctrl+Z",keyCombinationMac:"meta+z",keyCombinationWin:"ctrl+z"},open_diagram:{action:"open_diagram",keyCombinationLabelMac:"O",keyCombinationLabelWin:"Ctrl+O",keyCombinationMac:"meta+o",keyCombinationWin:"ctrl+o"},save_diagram:{action:"save_diagram",keyCombinationLabelMac:"S",keyCombinationLabelWin:"Ctrl+S",keyCombinationMac:"meta+s",keyCombinationWin:"ctrl+s"},toggle_side_panel:{action:"toggle_side_panel",keyCombinationLabelMac:"B",keyCombinationLabelWin:"Ctrl+B",keyCombinationMac:"meta+b",keyCombinationWin:"ctrl+b"},show_all:{action:"show_all",keyCombinationLabelMac:"0",keyCombinationLabelWin:"Ctrl+0",keyCombinationMac:"meta+0",keyCombinationWin:"ctrl+0"}},Ti=kd(),nb=Object.keys(Ni).reduce((e,t)=>{const n=Ni[t],r=Ti==="mac"?n.keyCombinationLabelMac:n.keyCombinationLabelWin,o=Ti==="mac"?n.keyCombinationMac:n.keyCombinationWin;return{...e,[t]:{action:n.action,keyCombinationLabel:r,keyCombination:o}}},{}),Hm=m.createContext({undo:B,redo:B,hasUndo:!1,hasRedo:!1}),rb=()=>m.useContext(Hm),zm=m.createContext({openedTableInSidebar:void 0,selectedSidebarSection:"tables",openedRelationshipInSidebar:void 0,openRelationshipFromSidebar:B,closeAllRelationshipsInSidebar:B,openedDependencyInSidebar:void 0,openDependencyFromSidebar:B,closeAllDependenciesInSidebar:B,selectSidebarSection:B,openTableFromSidebar:B,closeAllTablesInSidebar:B,isSidePanelShowed:!1,hideSidePanel:B,showSidePanel:B,toggleSidePanel:B,isSelectSchemaOpen:!1,openSelectSchema:B,closeSelectSchema:B}),bc=()=>m.useContext(zm),Bm=m.createContext({closeAlert:B,showAlert:B}),ob=()=>m.useContext(Bm),Vm=1,Xm=1e6;let Yr=0;function Ym(){return Yr=(Yr+1)%Number.MAX_SAFE_INTEGER,Yr.toString()}const Gr=new Map,ki=e=>{if(Gr.has(e))return;const t=setTimeout(()=>{Gr.delete(e),Jt({type:"REMOVE_TOAST",toastId:e})},Xm);Gr.set(e,t)},Gm=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Vm)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ki(n):e.toasts.forEach(r=>{ki(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},zn=[];let Bn={toasts:[]};function Jt(e){Bn=Gm(Bn,e),zn.forEach(t=>{t(Bn)})}function Wm({...e}){const t=Ym(),n=o=>Jt({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Jt({type:"DISMISS_TOAST",toastId:t});return Jt({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function ib(){const[e,t]=be.useState(Bn);return be.useEffect(()=>(zn.push(t),()=>{const n=zn.indexOf(t);n>-1&&zn.splice(n,1)}),[e]),{...e,toast:Wm,dismiss:n=>Jt({type:"DISMISS_TOAST",toastId:n})}}const Um=m.createContext({redoStack:[],undoStack:[],addRedoAction:B,addUndoAction:B,resetRedoStack:B,resetUndoStack:B,hasRedo:!1,hasUndo:!1}),Km=()=>m.useContext(Um),qm={[me.POSTGRESQL]:"public",[me.SQL_SERVER]:"dbo",[me.CLICKHOUSE]:"default"};var Zm=function(){function e(){var t=this;this.subscriptions=new Set,this.emit=function(n){var r,o;try{for(var i=tn(t.subscriptions),s=i.next();!s.done;s=i.next()){var a=s.value;a(n)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},this.useSubscription=function(n){var r=m.useRef();r.current=n,m.useEffect(function(){function o(i){r.current&&r.current(i)}return t.subscriptions.add(o),function(){t.subscriptions.delete(o)}},[])}}return e}();function Qm(){var e=m.useRef();return e.current||(e.current=new Zm),e.current}const sb=({children:e,diagram:t,readonly:n})=>{let r=jd();const o=Qm(),{setSchemasFilter:i,schemasFilter:s}=gd(),{addUndoAction:a,resetRedoStack:c,resetUndoStack:l}=Km(),[u,d]=m.useState(""),[f,h]=m.useState(""),[p,g]=m.useState(new Date),[w,y]=m.useState(new Date),[C,b]=m.useState(me.GENERIC),[v,M]=m.useState(),[P,S]=m.useState((t==null?void 0:t.tables)??[]),[I,R]=m.useState((t==null?void 0:t.relationships)??[]),[A,O]=m.useState((t==null?void 0:t.dependencies)??[]),H=qm[C];n&&(r=Od);const F=m.useMemo(()=>Ld.includes(C)?[...new Set(P.map(N=>N.schema).filter(N=>!!N))].sort((N,L)=>N===H?-1:N.localeCompare(L)).map(N=>({id:Ws(N),name:N,tableCount:P.filter(L=>L.schema===N).length})):[],[P,H,C]),_=m.useCallback(N=>{i(L=>({...L,[u]:N}))},[u,i]),k=m.useMemo(()=>{var L,W;return F.length===0?void 0:((s[u]??[]).length===0?void 0:s[u])??[((L=F.find(X=>X.name===H))==null?void 0:L.id)??((W=F[0])==null?void 0:W.id)]},[s,u,F,H]),E=m.useMemo(()=>({id:u,name:f,createdAt:p,updatedAt:w,databaseType:C,databaseEdition:v,tables:P,relationships:I,dependencies:A}),[u,f,C,v,P,I,A,p,w]),$=m.useCallback(async()=>{const N=new Date;S([]),R([]),O([]),y(N),c(),l(),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:N}}),r.deleteDiagramTables(u),r.deleteDiagramRelationships(u),r.deleteDiagramDependencies(u)])},[r,u,c,l]),D=m.useCallback(async()=>{d(""),h(""),b(me.GENERIC),M(void 0),S([]),R([]),O([]),c(),l(),await Promise.all([r.deleteDiagramTables(u),r.deleteDiagramRelationships(u),r.deleteDiagram(u),r.deleteDiagramDependencies(u)])},[r,u,c,l]),T=m.useCallback(async()=>{const N=new Date;y(N),await r.updateDiagram({id:u,attributes:{updatedAt:N}})},[r,u,y]),j=m.useCallback(async N=>{b(N),await r.updateDiagram({id:u,attributes:{databaseType:N}})},[r,u,b]),z=m.useCallback(async N=>{M(N),await r.updateDiagram({id:u,attributes:{databaseEdition:N}})},[r,u,M]),V=m.useCallback(async N=>{const L=u;d(N),await r.updateDiagram({id:L,attributes:{id:N}})},[r,u,d]),ee=m.useCallback(async(N,L={updateHistory:!0})=>{const W=f;h(N);const X=new Date;y(X),await r.updateDiagram({id:u,attributes:{name:N,updatedAt:X}}),L.updateHistory&&(a({action:"updateDiagramName",redoData:{name:N},undoData:{name:W}}),c())},[r,u,h,a,f,c]),U=m.useCallback(async(N,L={updateHistory:!0})=>{S(X=>[...X,...N]);const W=new Date;y(W),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:W}}),...N.map(X=>r.addTable({diagramId:u,table:X}))]),o.emit({action:"add_tables",data:{tables:N}}),L.updateHistory&&(a({action:"addTables",redoData:{tables:N},undoData:{tableIds:N.map(X=>X.id)}}),c())},[r,u,S,a,c,o]),Z=m.useCallback(async(N,L={updateHistory:!0})=>U([N],L),[U]),J=m.useCallback(async N=>{const L={id:Ge(),name:`table_${P.length+1}`,x:0,y:0,fields:[{id:Ge(),name:"id",type:C===me.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!0,nullable:!1,primaryKey:!0,createdAt:Date.now()}],indexes:[],color:Gs(),createdAt:Date.now(),isView:!1,order:P.length,...N};return await Z(L),L},[Z,P,C]),Y=m.useCallback(N=>P.find(L=>L.id===N)??null,[P]),G=m.useCallback(async(N,L)=>{const W=N.map(q=>Y(q)).filter(q=>!!q),X=I.filter(q=>N.includes(q.sourceTableId)||N.includes(q.targetTableId)),K=A.filter(q=>N.includes(q.tableId)||N.includes(q.dependentTableId));R(q=>q.filter(ce=>!X.some(ae=>ae.id===ce.id))),O(q=>q.filter(ce=>!K.some(ae=>ae.id===ce.id))),S(q=>q.filter(ce=>!N.includes(ce.id))),o.emit({action:"remove_tables",data:{tableIds:N}});const re=new Date;y(re),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:re}}),...X.map(q=>r.deleteRelationship({diagramId:u,id:q.id})),...K.map(q=>r.deleteDependency({diagramId:u,id:q.id})),...N.map(q=>r.deleteTable({diagramId:u,id:q}))]),W.length>0&&(L!=null&&L.updateHistory)&&(a({action:"removeTables",redoData:{tableIds:N},undoData:{tables:W,relationships:X,dependencies:K}}),c())},[r,u,S,a,c,Y,I,o,A]),ne=m.useCallback(async(N,L={updateHistory:!0})=>G([N],L),[G]),oe=m.useCallback(async(N,L,W={updateHistory:!0})=>{const X=Y(N);S(re=>re.map(q=>q.id===N?{...q,...L}:q)),o.emit({action:"update_table",data:{id:N,table:L}});const K=new Date;y(K),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:K}}),r.updateTable({id:N,attributes:L})]),X&&W.updateHistory&&(a({action:"updateTable",redoData:{tableId:N,table:L},undoData:{tableId:N,table:X}}),c())},[r,S,a,c,Y,u,o]),se=m.useCallback(async(N,L={updateHistory:!0,forceOverride:!1})=>{const W=fe=>{const we=N(fe);return L.forceOverride?we:fe.map(Re=>{const wt=we.find(Pr=>Pr.id===Re.id);return wt?{...Re,...wt}:Re}).filter(Re=>we.some(wt=>wt.id===Re.id))},X=ao(P),K=W(P),re=X.filter(fe=>!K.some(we=>we.id===fe.id)),q=I.filter(fe=>re.some(we=>we.id===fe.sourceTableId||we.id===fe.targetTableId)),ce=A.filter(fe=>re.some(we=>we.id===fe.tableId||we.id===fe.dependentTableId));R(fe=>fe.filter(we=>!q.some(Re=>Re.id===we.id))),O(fe=>fe.filter(we=>!ce.some(Re=>Re.id===we.id))),S(W),o.emit({action:"remove_tables",data:{tableIds:re.map(fe=>fe.id)}});const ae=[];for(const fe of K)ae.push(r.putTable({diagramId:u,table:fe}));for(const fe of re)ae.push(r.deleteTable({diagramId:u,id:fe.id}));for(const fe of q)ae.push(r.deleteRelationship({diagramId:u,id:fe.id}));for(const fe of ce)ae.push(r.deleteDependency({diagramId:u,id:fe.id}));const ve=new Date;y(ve),ae.push(r.updateDiagram({id:u,attributes:{updatedAt:ve}})),await Promise.all(ae),L.updateHistory&&(a({action:"updateTablesState",redoData:{tables:K},undoData:{tables:X,relationships:q,dependencies:ce}}),c())},[r,P,S,u,a,c,I,o,A]),te=m.useCallback((N,L)=>{const W=Y(N);return(W==null?void 0:W.fields.find(X=>X.id===L))??null},[Y]),le=m.useCallback(async(N,L,W,X={updateHistory:!0})=>{const K=te(N,L);S(ce=>ce.map(ae=>ae.id===N?{...ae,fields:ae.fields.map(ve=>ve.id===L?{...ve,...W}:ve)}:ae));const re=await r.getTable({diagramId:u,id:N});if(!re)return;const q=new Date;y(q),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:q}}),r.updateTable({id:N,attributes:{...re,fields:re.fields.map(ce=>ce.id===L?{...ce,...W}:ce)}})]),K&&X.updateHistory&&(a({action:"updateField",redoData:{tableId:N,fieldId:L,field:{...K,...W}},undoData:{tableId:N,fieldId:L,field:K}}),c())},[r,u,S,a,c,te]),he=m.useCallback(async(N,L,W={updateHistory:!0})=>{var ce;const X=((ce=Y(N))==null?void 0:ce.fields)??[],K=te(N,L);S(ae=>ae.map(ve=>ve.id===N?{...ve,fields:ve.fields.filter(fe=>fe.id!==L)}:ve)),o.emit({action:"remove_field",data:{tableId:N,fieldId:L,fields:X.filter(ae=>ae.id!==L)}});const re=await r.getTable({diagramId:u,id:N});if(!re)return;const q=new Date;y(q),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:q}}),r.updateTable({id:N,attributes:{...re,fields:re.fields.filter(ae=>ae.id!==L)}})]),K&&W.updateHistory&&(a({action:"removeField",redoData:{tableId:N,fieldId:L},undoData:{tableId:N,field:K}}),c())},[r,u,S,a,c,te,Y,o]),ye=m.useCallback(async(N,L,W={updateHistory:!0})=>{var q;const X=((q=Y(N))==null?void 0:q.fields)??[];S(ce=>ce.map(ae=>ae.id===N?{...ae,fields:[...ae.fields,L]}:ae)),o.emit({action:"add_field",data:{tableId:N,field:L,fields:[...X,L]}});const K=await r.getTable({diagramId:u,id:N});if(!K)return;const re=new Date;y(re),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:re}}),r.updateTable({id:N,attributes:{...K,fields:[...K.fields,L]}})]),W.updateHistory&&(a({action:"addField",redoData:{tableId:N,field:L},undoData:{tableId:N,fieldId:L.id}}),c())},[r,u,S,a,c,o,Y]),Se=m.useCallback(async N=>{var X;const L=Y(N),W={id:Ge(),name:`field_${(((X=L==null?void 0:L.fields)==null?void 0:X.length)??0)+1}`,type:C===me.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!1,nullable:!0,primaryKey:!1,createdAt:Date.now()};return await ye(N,W),W},[ye,Y,C]),He=m.useCallback((N,L)=>{const W=Y(N);return(W==null?void 0:W.indexes.find(X=>X.id===L))??null},[Y]),at=m.useCallback(async(N,L,W={updateHistory:!0})=>{S(re=>re.map(q=>q.id===N?{...q,indexes:[...q.indexes,L]}:q));const X=await r.getTable({diagramId:u,id:N});if(!X)return;const K=new Date;y(K),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:K}}),r.updateTable({id:N,attributes:{...X,indexes:[...X.indexes,L]}})]),W.updateHistory&&(a({action:"addIndex",redoData:{tableId:N,index:L},undoData:{tableId:N,indexId:L.id}}),c())},[r,u,S,a,c]),Ft=m.useCallback(async(N,L,W={updateHistory:!0})=>{const X=He(N,L);S(q=>q.map(ce=>ce.id===N?{...ce,indexes:ce.indexes.filter(ae=>ae.id!==L)}:ce));const K=await r.getTable({diagramId:u,id:N});if(!K)return;const re=new Date;y(re),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:re}}),r.updateTable({id:N,attributes:{...K,indexes:K.indexes.filter(q=>q.id!==L)}})]),X&&W.updateHistory&&(a({action:"removeIndex",redoData:{indexId:L,tableId:N},undoData:{tableId:N,index:X}}),c())},[r,u,S,a,c,He]),ct=m.useCallback(async N=>{var X;const L=Y(N),W={id:Ge(),name:`index_${(((X=L==null?void 0:L.indexes)==null?void 0:X.length)??0)+1}`,fieldIds:[],unique:!1,createdAt:Date.now()};return await at(N,W),W},[at,Y]),Ht=m.useCallback(async(N,L,W,X={updateHistory:!0})=>{const K=He(N,L);S(ce=>ce.map(ae=>ae.id===N?{...ae,indexes:ae.indexes.map(ve=>ve.id===L?{...ve,...W}:ve)}:ae));const re=await r.getTable({diagramId:u,id:N});if(!re)return;const q=new Date;y(q),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:q}}),r.updateTable({id:N,attributes:{...re,indexes:re.indexes.map(ce=>ce.id===L?{...ce,...W}:ce)}})]),K&&X.updateHistory&&(a({action:"updateIndex",redoData:{tableId:N,indexId:L,index:W},undoData:{tableId:N,indexId:L,index:K}}),c())},[r,u,S,a,c,He]),ze=m.useCallback(async(N,L={updateHistory:!0})=>{R(X=>[...X,...N]);const W=new Date;y(W),await Promise.all([...N.map(X=>r.addRelationship({diagramId:u,relationship:X})),r.updateDiagram({id:u,attributes:{updatedAt:W}})]),L.updateHistory&&(a({action:"addRelationships",redoData:{relationships:N},undoData:{relationshipIds:N.map(X=>X.id)}}),c())},[r,u,R,a,c]),Be=m.useCallback(async(N,L={updateHistory:!0})=>ze([N],L),[ze]),zt=m.useCallback(async({sourceTableId:N,targetTableId:L,sourceFieldId:W,targetFieldId:X})=>{const K=Y(N),re=(K==null?void 0:K.name)??"",q=K==null?void 0:K.fields.find(ve=>ve.id===W),ce=(q==null?void 0:q.name)??"",ae={id:Ge(),name:`${re}_${ce}_fk`,sourceSchema:K==null?void 0:K.schema,sourceTableId:N,targetSchema:K==null?void 0:K.schema,targetTableId:L,sourceFieldId:W,targetFieldId:X,sourceCardinality:"one",targetCardinality:"one",createdAt:Date.now()};return await Be(ae),ae},[Be,Y]),Ve=m.useCallback(N=>I.find(L=>L.id===N)??null,[I]),Xe=m.useCallback(async(N,L={updateHistory:!0})=>{const W=[...I.filter(K=>N.includes(K.id))];R(K=>K.filter(re=>!N.includes(re.id)));const X=new Date;y(X),await Promise.all([...N.map(K=>r.deleteRelationship({diagramId:u,id:K})),r.updateDiagram({id:u,attributes:{updatedAt:X}})]),W.length>0&&L.updateHistory&&(a({action:"removeRelationships",redoData:{relationshipsIds:N},undoData:{relationships:W}}),c())},[r,u,R,I,a,c]),vt=m.useCallback(async(N,L={updateHistory:!0})=>Xe([N],L),[Xe]),kr=m.useCallback(async(N,L,W={updateHistory:!0})=>{const X=Ve(N);R(re=>re.map(q=>q.id===N?{...q,...L}:q));const K=new Date;y(K),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:K}}),r.updateRelationship({id:N,attributes:L})]),X&&W.updateHistory&&(a({action:"updateRelationship",redoData:{relationshipId:N,relationship:L},undoData:{relationshipId:N,relationship:X}}),c())},[r,R,a,Ve,c,u]),ut=m.useCallback(async(N,L={updateHistory:!0})=>{O(X=>[...X,...N]);const W=new Date;y(W),await Promise.all([...N.map(X=>r.addDependency({diagramId:u,dependency:X})),r.updateDiagram({id:u,attributes:{updatedAt:W}})]),L.updateHistory&&(a({action:"addDependencies",redoData:{dependencies:N},undoData:{dependenciesIds:N.map(X=>X.id)}}),c())},[r,u,O,a,c]),Bt=m.useCallback(async(N,L={updateHistory:!0})=>ut([N],L),[ut]),Ir=m.useCallback(async({tableId:N,dependentTableId:L})=>{const W=Y(N),X=Y(L),K={id:Ge(),tableId:N,dependentTableId:L,dependentSchema:X==null?void 0:X.schema,schema:W==null?void 0:W.schema,createdAt:Date.now()};return await Bt(K),K},[Bt,Y]),Vt=m.useCallback(N=>A.find(L=>L.id===N)??null,[A]),Xt=m.useCallback(async(N,L={updateHistory:!0})=>{const W=[...A.filter(K=>N.includes(K.id))];O(K=>K.filter(re=>!N.includes(re.id)));const X=new Date;y(X),await Promise.all([...N.map(K=>r.deleteDependency({diagramId:u,id:K})),r.updateDiagram({id:u,attributes:{updatedAt:X}})]),W.length>0&&L.updateHistory&&(a({action:"removeDependencies",redoData:{dependenciesIds:N},undoData:{dependencies:W}}),c())},[r,u,O,a,c,A]),Rr=m.useCallback(async(N,L={updateHistory:!0})=>Xt([N],L),[Xt]),Dr=m.useCallback(async(N,L,W={updateHistory:!0})=>{const X=Vt(N);O(re=>re.map(q=>q.id===N?{...q,...L}:q));const K=new Date;y(K),await Promise.all([r.updateDiagram({id:u,attributes:{updatedAt:K}}),r.updateDependency({id:N,attributes:L})]),X&&W.updateHistory&&(a({action:"updateDependency",redoData:{dependencyId:N,dependency:L},undoData:{dependencyId:N,dependency:X}}),c())},[r,u,O,a,c,Vt]),Yt=m.useCallback(async N=>{d(N.id),h(N.name),b(N.databaseType),M(N.databaseEdition),S((N==null?void 0:N.tables)??[]),R((N==null?void 0:N.relationships)??[]),O((N==null?void 0:N.dependencies)??[]),g(N.createdAt),y(N.updatedAt),o.emit({action:"load_diagram",data:{diagram:N}})},[d,h,b,M,S,R,O,g,y,o]),Ar=m.useCallback(async N=>{const L=await r.getDiagram(N,{includeRelationships:!0,includeTables:!0,includeDependencies:!0});return L&&Yt(L),L},[r,Yt]);return x.jsx(Ma.Provider,{value:{diagramId:u,diagramName:f,databaseType:C,tables:P,relationships:I,dependencies:A,currentDiagram:E,schemas:F,filteredSchemas:k,events:o,readonly:n,filterSchemas:_,updateDiagramId:V,updateDiagramName:ee,loadDiagram:Ar,loadDiagramFromData:Yt,updateDatabaseType:j,updateDatabaseEdition:z,clearDiagramData:$,deleteDiagram:D,updateDiagramUpdatedAt:T,createTable:J,addTable:Z,addTables:U,getTable:Y,removeTable:ne,removeTables:G,updateTable:oe,updateTablesState:se,updateField:le,removeField:he,createField:Se,addField:ye,addIndex:at,createIndex:ct,removeIndex:Ft,getField:te,getIndex:He,updateIndex:Ht,addRelationship:Be,addRelationships:ze,createRelationship:zt,getRelationship:Ve,removeRelationship:vt,removeRelationships:Xe,updateRelationship:kr,addDependency:Bt,addDependencies:ut,createDependency:Ir,getDependency:Vt,removeDependency:Rr,removeDependencies:Xt,updateDependency:Dr},children:e})};function xe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=xe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Jm={value:()=>{}};function pr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Vn(n)}function Vn(e){this._=e}function ep(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Vn.prototype=pr.prototype={constructor:Vn,on:function(e,t){var n=this._,r=ep(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=tp(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=Ii(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ii(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function tp(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Ii(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Jm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var go="http://www.w3.org/1999/xhtml";const Ri={svg:"http://www.w3.org/2000/svg",xhtml:go,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ri.hasOwnProperty(t)?{space:Ri[t],local:e}:e}function np(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===go&&t.documentElement.namespaceURI===go?t.createElement(e):t.createElementNS(n,e)}}function rp(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _c(e){var t=gr(e);return(t.local?rp:np)(t)}function op(){}function Xo(e){return e==null?op:function(){return this.querySelector(e)}}function ip(e){typeof e!="function"&&(e=Xo(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),c,l,u=0;u<s;++u)(c=i[u])&&(l=e.call(c,c.__data__,u,i))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Te(r,this._parents)}function sp(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ap(){return[]}function Cc(e){return e==null?ap:function(){return this.querySelectorAll(e)}}function cp(e){return function(){return sp(e.apply(this,arguments))}}function up(e){typeof e=="function"?e=cp(e):e=Cc(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(e.call(c,c.__data__,l,s)),o.push(c));return new Te(r,o)}function Ec(e){return function(){return this.matches(e)}}function Sc(e){return function(t){return t.matches(e)}}var lp=Array.prototype.find;function dp(e){return function(){return lp.call(this.children,e)}}function fp(){return this.firstElementChild}function hp(e){return this.select(e==null?fp:dp(typeof e=="function"?e:Sc(e)))}var mp=Array.prototype.filter;function pp(){return Array.from(this.children)}function gp(e){return function(){return mp.call(this.children,e)}}function yp(e){return this.selectAll(e==null?pp:gp(typeof e=="function"?e:Sc(e)))}function xp(e){typeof e!="function"&&(e=Ec(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,l=0;l<s;++l)(c=i[l])&&e.call(c,c.__data__,l,i)&&a.push(c);return new Te(r,this._parents)}function Mc(e){return new Array(e.length)}function vp(){return new Te(this._enter||this._groups.map(Mc),this._parents)}function Zn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zn.prototype={constructor:Zn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function wp(e){return function(){return e}}function bp(e,t,n,r,o,i){for(var s=0,a,c=t.length,l=i.length;s<l;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new Zn(e,i[s]);for(;s<c;++s)(a=t[s])&&(o[s]=a)}function _p(e,t,n,r,o,i,s){var a,c,l=new Map,u=t.length,d=i.length,f=new Array(u),h;for(a=0;a<u;++a)(c=t[a])&&(f[a]=h=s.call(c,c.__data__,a,t)+"",l.has(h)?o[a]=c:l.set(h,c));for(a=0;a<d;++a)h=s.call(e,i[a],a,i)+"",(c=l.get(h))?(r[a]=c,c.__data__=i[a],l.delete(h)):n[a]=new Zn(e,i[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(f[a])===c&&(o[a]=c)}function Cp(e){return e.__data__}function Ep(e,t){if(!arguments.length)return Array.from(this,Cp);var n=t?_p:bp,r=this._parents,o=this._groups;typeof e!="function"&&(e=wp(e));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),l=0;l<i;++l){var u=r[l],d=o[l],f=d.length,h=Sp(e.call(u,u&&u.__data__,l,r)),p=h.length,g=a[l]=new Array(p),w=s[l]=new Array(p),y=c[l]=new Array(f);n(u,d,g,w,y,h,t);for(var C=0,b=0,v,M;C<p;++C)if(v=g[C]){for(C>=b&&(b=C+1);!(M=w[b])&&++b<p;);v._next=M||null}}return s=new Te(s,r),s._enter=a,s._exit=c,s}function Sp(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Mp(){return new Te(this._exit||this._groups.map(Mc),this._parents)}function Np(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Tp(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var l=n[c],u=r[c],d=l.length,f=a[c]=new Array(d),h,p=0;p<d;++p)(h=l[p]||u[p])&&(f[p]=h);for(;c<o;++c)a[c]=n[c];return new Te(a,this._parents)}function kp(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Ip(e){e||(e=Rp);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,c=o[i]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(t)}return new Te(o,this._parents).order()}function Rp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dp(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ap(){return Array.from(this)}function Pp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function $p(){let e=0;for(const t of this)++e;return e}function jp(){return!this.node()}function Lp(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function Op(e){return function(){this.removeAttribute(e)}}function Fp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hp(e,t){return function(){this.setAttribute(e,t)}}function zp(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bp(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Vp(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Xp(e,t){var n=gr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Fp:Op:typeof t=="function"?n.local?Vp:Bp:n.local?zp:Hp)(n,t))}function Nc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Yp(e){return function(){this.style.removeProperty(e)}}function Gp(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Wp(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Up(e,t,n){return arguments.length>1?this.each((t==null?Yp:typeof t=="function"?Wp:Gp)(e,t,n??"")):At(this.node(),e)}function At(e,t){return e.style.getPropertyValue(t)||Nc(e).getComputedStyle(e,null).getPropertyValue(t)}function Kp(e){return function(){delete this[e]}}function qp(e,t){return function(){this[e]=t}}function Zp(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Qp(e,t){return arguments.length>1?this.each((t==null?Kp:typeof t=="function"?Zp:qp)(e,t)):this.node()[e]}function Tc(e){return e.trim().split(/^|\s+/)}function Yo(e){return e.classList||new kc(e)}function kc(e){this._node=e,this._names=Tc(e.getAttribute("class")||"")}kc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ic(e,t){for(var n=Yo(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Rc(e,t){for(var n=Yo(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Jp(e){return function(){Ic(this,e)}}function eg(e){return function(){Rc(this,e)}}function tg(e,t){return function(){(t.apply(this,arguments)?Ic:Rc)(this,e)}}function ng(e,t){var n=Tc(e+"");if(arguments.length<2){for(var r=Yo(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?tg:t?Jp:eg)(n,t))}function rg(){this.textContent=""}function og(e){return function(){this.textContent=e}}function ig(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function sg(e){return arguments.length?this.each(e==null?rg:(typeof e=="function"?ig:og)(e)):this.node().textContent}function ag(){this.innerHTML=""}function cg(e){return function(){this.innerHTML=e}}function ug(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function lg(e){return arguments.length?this.each(e==null?ag:(typeof e=="function"?ug:cg)(e)):this.node().innerHTML}function dg(){this.nextSibling&&this.parentNode.appendChild(this)}function fg(){return this.each(dg)}function hg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mg(){return this.each(hg)}function pg(e){var t=typeof e=="function"?e:_c(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gg(){return null}function yg(e,t){var n=typeof e=="function"?e:_c(e),r=t==null?gg:typeof t=="function"?t:Xo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xg(){var e=this.parentNode;e&&e.removeChild(this)}function vg(){return this.each(xg)}function wg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _g(e){return this.select(e?bg:wg)}function Cg(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Eg(e){return function(t){e.call(this,t,this.__data__)}}function Sg(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Mg(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Ng(e,t,n){return function(){var r=this.__on,o,i=Eg(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Tg(e,t,n){var r=Sg(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(o=0,u=a[c];o<i;++o)if((s=r[o]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?Ng:Mg,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function Dc(e,t,n){var r=Nc(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function kg(e,t){return function(){return Dc(this,e,t)}}function Ig(e,t){return function(){return Dc(this,e,t.apply(this,arguments))}}function Rg(e,t){return this.each((typeof t=="function"?Ig:kg)(e,t))}function*Dg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Ac=[null];function Te(e,t){this._groups=e,this._parents=t}function xn(){return new Te([[document.documentElement]],Ac)}function Ag(){return this}Te.prototype=xn.prototype={constructor:Te,select:ip,selectAll:up,selectChild:hp,selectChildren:yp,filter:xp,data:Ep,enter:vp,exit:Mp,join:Np,merge:Tp,selection:Ag,order:kp,sort:Ip,call:Dp,nodes:Ap,node:Pp,size:$p,empty:jp,each:Lp,attr:Xp,style:Up,property:Qp,classed:ng,text:sg,html:lg,raise:fg,lower:mg,append:pg,insert:yg,remove:vg,clone:_g,datum:Cg,on:Tg,dispatch:Rg,[Symbol.iterator]:Dg};function Me(e){return typeof e=="string"?new Te([[document.querySelector(e)]],[document.documentElement]):new Te([[e]],Ac)}function Pg(e){let t;for(;t=e.sourceEvent;)e=t;return e}function De(e,t){if(e=Pg(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const $g={passive:!1},on={capture:!0,passive:!1};function Wr(e){e.stopImmediatePropagation()}function Tt(e){e.preventDefault(),e.stopImmediatePropagation()}function Pc(e){var t=e.document.documentElement,n=Me(e).on("dragstart.drag",Tt,on);"onselectstart"in t?n.on("selectstart.drag",Tt,on):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $c(e,t){var n=e.document.documentElement,r=Me(e).on("dragstart.drag",null);t&&(r.on("click.drag",Tt,on),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Nn=e=>()=>e;function yo(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}yo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function jg(e){return!e.ctrlKey&&!e.button}function Lg(){return this.parentNode}function Og(e,t){return t??{x:e.x,y:e.y}}function Fg(){return navigator.maxTouchPoints||"ontouchstart"in this}function jc(){var e=jg,t=Lg,n=Og,r=Fg,o={},i=pr("start","drag","end"),s=0,a,c,l,u,d=0;function f(v){v.on("mousedown.drag",h).filter(r).on("touchstart.drag",w).on("touchmove.drag",y,$g).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,M){if(!(u||!e.call(this,v,M))){var P=b(this,t.call(this,v,M),v,M,"mouse");P&&(Me(v.view).on("mousemove.drag",p,on).on("mouseup.drag",g,on),Pc(v.view),Wr(v),l=!1,a=v.clientX,c=v.clientY,P("start",v))}}function p(v){if(Tt(v),!l){var M=v.clientX-a,P=v.clientY-c;l=M*M+P*P>d}o.mouse("drag",v)}function g(v){Me(v.view).on("mousemove.drag mouseup.drag",null),$c(v.view,l),Tt(v),o.mouse("end",v)}function w(v,M){if(e.call(this,v,M)){var P=v.changedTouches,S=t.call(this,v,M),I=P.length,R,A;for(R=0;R<I;++R)(A=b(this,S,v,M,P[R].identifier,P[R]))&&(Wr(v),A("start",v,P[R]))}}function y(v){var M=v.changedTouches,P=M.length,S,I;for(S=0;S<P;++S)(I=o[M[S].identifier])&&(Tt(v),I("drag",v,M[S]))}function C(v){var M=v.changedTouches,P=M.length,S,I;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<P;++S)(I=o[M[S].identifier])&&(Wr(v),I("end",v,M[S]))}function b(v,M,P,S,I,R){var A=i.copy(),O=De(R||P,M),H,F,_;if((_=n.call(v,new yo("beforestart",{sourceEvent:P,target:f,identifier:I,active:s,x:O[0],y:O[1],dx:0,dy:0,dispatch:A}),S))!=null)return H=_.x-O[0]||0,F=_.y-O[1]||0,function k(E,$,D){var T=O,j;switch(E){case"start":o[I]=k,j=s++;break;case"end":delete o[I],--s;case"drag":O=De(D||$,M),j=s;break}A.call(E,v,new yo(E,{sourceEvent:$,subject:_,target:f,identifier:I,active:j,x:O[0]+H,y:O[1]+F,dx:O[0]-T[0],dy:O[1]-T[1],dispatch:A}),S)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Nn(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Nn(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Nn(v),f):n},f.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Nn(!!v),f):r},f.on=function(){var v=i.on.apply(i,arguments);return v===i?f:v},f.clickDistance=function(v){return arguments.length?(d=(v=+v)*v,f):Math.sqrt(d)},f}function Go(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Lc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vn(){}var sn=.7,Qn=1/sn,kt="\\s*([+-]?\\d+)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hg=/^#([0-9a-f]{3,8})$/,zg=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),Bg=new RegExp(`^rgb\\(${Le},${Le},${Le}\\)$`),Vg=new RegExp(`^rgba\\(${kt},${kt},${kt},${an}\\)$`),Xg=new RegExp(`^rgba\\(${Le},${Le},${Le},${an}\\)$`),Yg=new RegExp(`^hsl\\(${an},${Le},${Le}\\)$`),Gg=new RegExp(`^hsla\\(${an},${Le},${Le},${an}\\)$`),Di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Go(vn,cn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ai,formatHex:Ai,formatHex8:Wg,formatHsl:Ug,formatRgb:Pi,toString:Pi});function Ai(){return this.rgb().formatHex()}function Wg(){return this.rgb().formatHex8()}function Ug(){return Oc(this).formatHsl()}function Pi(){return this.rgb().formatRgb()}function cn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hg.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$i(t):n===3?new Ee(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Tn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Tn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zg.exec(e))?new Ee(t[1],t[2],t[3],1):(t=Bg.exec(e))?new Ee(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Vg.exec(e))?Tn(t[1],t[2],t[3],t[4]):(t=Xg.exec(e))?Tn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Yg.exec(e))?Oi(t[1],t[2]/100,t[3]/100,1):(t=Gg.exec(e))?Oi(t[1],t[2]/100,t[3]/100,t[4]):Di.hasOwnProperty(e)?$i(Di[e]):e==="transparent"?new Ee(NaN,NaN,NaN,0):null}function $i(e){return new Ee(e>>16&255,e>>8&255,e&255,1)}function Tn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ee(e,t,n,r)}function Kg(e){return e instanceof vn||(e=cn(e)),e?(e=e.rgb(),new Ee(e.r,e.g,e.b,e.opacity)):new Ee}function xo(e,t,n,r){return arguments.length===1?Kg(e):new Ee(e,t,n,r??1)}function Ee(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Go(Ee,xo,Lc(vn,{brighter(e){return e=e==null?Qn:Math.pow(Qn,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?sn:Math.pow(sn,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ee(ht(this.r),ht(this.g),ht(this.b),Jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ji,formatHex:ji,formatHex8:qg,formatRgb:Li,toString:Li}));function ji(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}`}function qg(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}${dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Li(){const e=Jn(this.opacity);return`${e===1?"rgb(":"rgba("}${ht(this.r)}, ${ht(this.g)}, ${ht(this.b)}${e===1?")":`, ${e})`}`}function Jn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dt(e){return e=ht(e),(e<16?"0":"")+e.toString(16)}function Oi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ae(e,t,n,r)}function Oc(e){if(e instanceof Ae)return new Ae(e.h,e.s,e.l,e.opacity);if(e instanceof vn||(e=cn(e)),!e)return new Ae;if(e instanceof Ae)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new Ae(s,a,c,e.opacity)}function Zg(e,t,n,r){return arguments.length===1?Oc(e):new Ae(e,t,n,r??1)}function Ae(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Go(Ae,Zg,Lc(vn,{brighter(e){return e=e==null?Qn:Math.pow(Qn,e),new Ae(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sn:Math.pow(sn,e),new Ae(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ee(Ur(e>=240?e-240:e+120,o,r),Ur(e,o,r),Ur(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Ae(Fi(this.h),kn(this.s),kn(this.l),Jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jn(this.opacity);return`${e===1?"hsl(":"hsla("}${Fi(this.h)}, ${kn(this.s)*100}%, ${kn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fi(e){return e=(e||0)%360,e<0?e+360:e}function kn(e){return Math.max(0,Math.min(1,e||0))}function Ur(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fc=e=>()=>e;function Qg(e,t){return function(n){return e+n*t}}function Jg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function e0(e){return(e=+e)==1?Hc:function(t,n){return n-t?Jg(t,n,e):Fc(isNaN(t)?n:t)}}function Hc(e,t){var n=t-e;return n?Qg(e,n):Fc(isNaN(e)?t:e)}const Hi=function e(t){var n=e0(t);function r(o,i){var s=n((o=xo(o)).r,(i=xo(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),l=Hc(o.opacity,i.opacity);return function(u){return o.r=s(u),o.g=a(u),o.b=c(u),o.opacity=l(u),o+""}}return r.gamma=e,r}(1);function rt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var vo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kr=new RegExp(vo.source,"g");function t0(e){return function(){return e}}function n0(e){return function(t){return e(t)+""}}function r0(e,t){var n=vo.lastIndex=Kr.lastIndex=0,r,o,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=vo.exec(e))&&(o=Kr.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:rt(r,o)})),n=Kr.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?n0(c[0].x):t0(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)a[(d=c[u]).i]=d.x(l);return a.join("")})}var zi=180/Math.PI,wo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zc(e,t,n,r,o,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*zi,skewX:Math.atan(c)*zi,scaleX:s,scaleY:a}}var In;function o0(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wo:zc(t.a,t.b,t.c,t.d,t.e,t.f)}function i0(e){return e==null||(In||(In=document.createElementNS("http://www.w3.org/2000/svg","g")),In.setAttribute("transform",e),!(e=In.transform.baseVal.consolidate()))?wo:(e=e.matrix,zc(e.a,e.b,e.c,e.d,e.e,e.f))}function Bc(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function i(l,u,d,f,h,p){if(l!==d||u!==f){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:rt(l,d)},{i:g-2,x:rt(u,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:rt(l,u)})):u&&d.push(o(d)+"rotate("+u+r)}function a(l,u,d,f){l!==u?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:rt(l,u)}):u&&d.push(o(d)+"skewX("+u+r)}function c(l,u,d,f,h,p){if(l!==d||u!==f){var g=h.push(o(h)+"scale(",null,",",null,")");p.push({i:g-4,x:rt(l,d)},{i:g-2,x:rt(u,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),i(l.translateX,l.translateY,u.translateX,u.translateY,d,f),s(l.rotate,u.rotate,d,f),a(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(h){for(var p=-1,g=f.length,w;++p<g;)d[(w=f[p]).i]=w.x(h);return d.join("")}}}var s0=Bc(o0,"px, ","px)","deg)"),a0=Bc(i0,", ",")",")"),c0=1e-12;function Bi(e){return((e=Math.exp(e))+1/e)/2}function u0(e){return((e=Math.exp(e))-1/e)/2}function l0(e){return((e=Math.exp(2*e))-1)/(e+1)}const d0=function e(t,n,r){function o(i,s){var a=i[0],c=i[1],l=i[2],u=s[0],d=s[1],f=s[2],h=u-a,p=d-c,g=h*h+p*p,w,y;if(g<c0)y=Math.log(f/l)/t,w=function(S){return[a+S*h,c+S*p,l*Math.exp(t*S*y)]};else{var C=Math.sqrt(g),b=(f*f-l*l+r*g)/(2*l*n*C),v=(f*f-l*l-r*g)/(2*f*n*C),M=Math.log(Math.sqrt(b*b+1)-b),P=Math.log(Math.sqrt(v*v+1)-v);y=(P-M)/t,w=function(S){var I=S*y,R=Bi(M),A=l/(n*C)*(R*l0(t*I+M)-u0(M));return[a+A*h,c+A*p,l*R/Bi(t*I+M)]}}return w.duration=y*1e3*t/Math.SQRT2,w}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},o}(Math.SQRT2,2,4);var Pt=0,Kt=0,Gt=0,Vc=1e3,er,qt,tr=0,gt=0,yr=0,un=typeof performance=="object"&&performance.now?performance:Date,Xc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wo(){return gt||(Xc(f0),gt=un.now()+yr)}function f0(){gt=0}function nr(){this._call=this._time=this._next=null}nr.prototype=Yc.prototype={constructor:nr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Wo():+n)+(t==null?0:+t),!this._next&&qt!==this&&(qt?qt._next=this:er=this,qt=this),this._call=e,this._time=n,bo()},stop:function(){this._call&&(this._call=null,this._time=1/0,bo())}};function Yc(e,t,n){var r=new nr;return r.restart(e,t,n),r}function h0(){Wo(),++Pt;for(var e=er,t;e;)(t=gt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pt}function Vi(){gt=(tr=un.now())+yr,Pt=Kt=0;try{h0()}finally{Pt=0,p0(),gt=0}}function m0(){var e=un.now(),t=e-tr;t>Vc&&(yr-=t,tr=e)}function p0(){for(var e,t=er,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:er=n);qt=e,bo(r)}function bo(e){if(!Pt){Kt&&(Kt=clearTimeout(Kt));var t=e-gt;t>24?(e<1/0&&(Kt=setTimeout(Vi,e-un.now()-yr)),Gt&&(Gt=clearInterval(Gt))):(Gt||(tr=un.now(),Gt=setInterval(m0,Vc)),Pt=1,Xc(Vi))}}function Xi(e,t,n){var r=new nr;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var g0=pr("start","end","cancel","interrupt"),y0=[],Gc=0,Yi=1,_o=2,Xn=3,Gi=4,Co=5,Yn=6;function xr(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;x0(e,n,{name:t,index:r,group:o,on:g0,tween:y0,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Gc})}function Uo(e,t){var n=je(e,t);if(n.state>Gc)throw new Error("too late; already scheduled");return n}function Fe(e,t){var n=je(e,t);if(n.state>Xn)throw new Error("too late; already running");return n}function je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function x0(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Yc(i,0,n.time);function i(l){n.state=Yi,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,d,f,h;if(n.state!==Yi)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===Xn)return Xi(s);h.state===Gi?(h.state=Yn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=Yn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(Xi(function(){n.state===Xn&&(n.state=Gi,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=_o,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_o){for(n.state=Xn,o=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Co,1),d=-1,f=o.length;++d<f;)o[d].call(e,u);n.state===Co&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Yn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Gn(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>_o&&r.state<Co,r.state=Yn,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function v0(e){return this.each(function(){Gn(this,e)})}function w0(e,t){var n,r;return function(){var o=Fe(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function b0(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Fe(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=a;break}c===l&&o.push(a)}i.tween=o}}function _0(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=je(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?w0:b0)(n,e,t))}function Ko(e,t,n){var r=e._id;return e.each(function(){var o=Fe(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return je(o,r).value[t]}}function Wc(e,t){var n;return(typeof t=="number"?rt:t instanceof cn?Hi:(n=cn(t))?(t=n,Hi):r0)(e,t)}function C0(e){return function(){this.removeAttribute(e)}}function E0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function S0(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function M0(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function N0(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function T0(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function k0(e,t){var n=gr(e),r=n==="transform"?a0:Wc;return this.attrTween(e,typeof t=="function"?(n.local?T0:N0)(n,r,Ko(this,"attr."+e,t)):t==null?(n.local?E0:C0)(n):(n.local?M0:S0)(n,r,t))}function I0(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function R0(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function D0(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&R0(e,i)),n}return o._value=t,o}function A0(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&I0(e,i)),n}return o._value=t,o}function P0(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=gr(e);return this.tween(n,(r.local?D0:A0)(r,t))}function $0(e,t){return function(){Uo(this,e).delay=+t.apply(this,arguments)}}function j0(e,t){return t=+t,function(){Uo(this,e).delay=t}}function L0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$0:j0)(t,e)):je(this.node(),t).delay}function O0(e,t){return function(){Fe(this,e).duration=+t.apply(this,arguments)}}function F0(e,t){return t=+t,function(){Fe(this,e).duration=t}}function H0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?O0:F0)(t,e)):je(this.node(),t).duration}function z0(e,t){if(typeof t!="function")throw new Error;return function(){Fe(this,e).ease=t}}function B0(e){var t=this._id;return arguments.length?this.each(z0(t,e)):je(this.node(),t).ease}function V0(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Fe(this,e).ease=n}}function X0(e){if(typeof e!="function")throw new Error;return this.each(V0(this._id,e))}function Y0(e){typeof e!="function"&&(e=Ec(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,l=0;l<s;++l)(c=i[l])&&e.call(c,c.__data__,l,i)&&a.push(c);return new qe(r,this._parents,this._name,this._id)}function G0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var c=t[a],l=n[a],u=c.length,d=s[a]=new Array(u),f,h=0;h<u;++h)(f=c[h]||l[h])&&(d[h]=f);for(;a<r;++a)s[a]=t[a];return new qe(s,this._parents,this._name,this._id)}function W0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function U0(e,t,n){var r,o,i=W0(t)?Uo:Fe;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function K0(e,t){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(e):this.each(U0(n,e,t))}function q0(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Z0(){return this.on("end.remove",q0(this._id))}function Q0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xo(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],c=a.length,l=i[s]=new Array(c),u,d,f=0;f<c;++f)(u=a[f])&&(d=e.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,xr(l[f],t,n,f,l,je(u,n)));return new qe(i,this._parents,t,n)}function J0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cc(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var c=r[a],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),h,p=je(u,n),g=0,w=f.length;g<w;++g)(h=f[g])&&xr(h,t,n,g,f,p);i.push(f),s.push(u)}return new qe(i,s,t,n)}var ey=xn.prototype.constructor;function ty(){return new ey(this._groups,this._parents)}function ny(e,t){var n,r,o;return function(){var i=At(this,e),s=(this.style.removeProperty(e),At(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function Uc(e){return function(){this.style.removeProperty(e)}}function ry(e,t,n){var r,o=n+"",i;return function(){var s=At(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function oy(e,t,n){var r,o,i;return function(){var s=At(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),At(this,e))),s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a))}}function iy(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var c=Fe(this,e),l=c.on,u=c.value[i]==null?a||(a=Uc(t)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(s,o=u),c.on=r}}function sy(e,t,n){var r=(e+="")=="transform"?s0:Wc;return t==null?this.styleTween(e,ny(e,r)).on("end.style."+e,Uc(e)):typeof t=="function"?this.styleTween(e,oy(e,r,Ko(this,"style."+e,t))).each(iy(this._id,e)):this.styleTween(e,ry(e,r,t),n).on("end.style."+e,null)}function ay(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function cy(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&ay(e,s,n)),r}return i._value=t,i}function uy(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,cy(e,t,n??""))}function ly(e){return function(){this.textContent=e}}function dy(e){return function(){var t=e(this);this.textContent=t??""}}function fy(e){return this.tween("text",typeof e=="function"?dy(Ko(this,"text",e)):ly(e==null?"":e+""))}function hy(e){return function(t){this.textContent=e.call(this,t)}}function my(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&hy(o)),t}return r._value=e,r}function py(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,my(e))}function gy(){for(var e=this._name,t=this._id,n=Kc(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=je(c,t);xr(c,e,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new qe(r,this._parents,e,n)}function yy(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o===0&&i()}};n.each(function(){var l=Fe(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),o===0&&i()})}var xy=0;function qe(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Kc(){return++xy}var Ye=xn.prototype;qe.prototype={constructor:qe,select:Q0,selectAll:J0,selectChild:Ye.selectChild,selectChildren:Ye.selectChildren,filter:Y0,merge:G0,selection:ty,transition:gy,call:Ye.call,nodes:Ye.nodes,node:Ye.node,size:Ye.size,empty:Ye.empty,each:Ye.each,on:K0,attr:k0,attrTween:P0,style:sy,styleTween:uy,text:fy,textTween:py,remove:Z0,tween:_0,delay:L0,duration:H0,ease:B0,easeVarying:X0,end:yy,[Symbol.iterator]:Ye[Symbol.iterator]};function vy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wy={time:null,delay:0,duration:250,ease:vy};function by(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _y(e){var t,n;e instanceof qe?(t=e._id,e=e._name):(t=Kc(),(n=wy).time=Wo(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,l=0;l<a;++l)(c=s[l])&&xr(c,e,t,l,s,n||by(c,t));return new qe(r,this._parents,e,t)}xn.prototype.interrupt=v0;xn.prototype.transition=_y;const Rn=e=>()=>e;function Cy(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function We(e,t,n){this.k=e,this.x=t,this.y=n}We.prototype={constructor:We,scale:function(e){return e===1?this:new We(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new We(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vr=new We(1,0,0);qc.prototype=We.prototype;function qc(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vr;return e.__zoom}function qr(e){e.stopImmediatePropagation()}function Wt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ey(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Sy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Wi(){return this.__zoom||vr}function My(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ny(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ty(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Zc(){var e=Ey,t=Sy,n=Ty,r=My,o=Ny,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=d0,l=pr("start","zoom","end"),u,d,f,h=500,p=150,g=0,w=10;function y(_){_.property("__zoom",Wi).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",A).filter(o).on("touchstart.zoom",O).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(_,k,E,$){var D=_.selection?_.selection():_;D.property("__zoom",Wi),_!==D?M(_,k,E,$):D.interrupt().each(function(){P(this,arguments).event($).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},y.scaleBy=function(_,k,E,$){y.scaleTo(_,function(){var D=this.__zoom.k,T=typeof k=="function"?k.apply(this,arguments):k;return D*T},E,$)},y.scaleTo=function(_,k,E,$){y.transform(_,function(){var D=t.apply(this,arguments),T=this.__zoom,j=E==null?v(D):typeof E=="function"?E.apply(this,arguments):E,z=T.invert(j),V=typeof k=="function"?k.apply(this,arguments):k;return n(b(C(T,V),j,z),D,s)},E,$)},y.translateBy=function(_,k,E,$){y.transform(_,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),s)},null,$)},y.translateTo=function(_,k,E,$,D){y.transform(_,function(){var T=t.apply(this,arguments),j=this.__zoom,z=$==null?v(T):typeof $=="function"?$.apply(this,arguments):$;return n(vr.translate(z[0],z[1]).scale(j.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof E=="function"?-E.apply(this,arguments):-E),T,s)},$,D)};function C(_,k){return k=Math.max(i[0],Math.min(i[1],k)),k===_.k?_:new We(k,_.x,_.y)}function b(_,k,E){var $=k[0]-E[0]*_.k,D=k[1]-E[1]*_.k;return $===_.x&&D===_.y?_:new We(_.k,$,D)}function v(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function M(_,k,E,$){_.on("start.zoom",function(){P(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event($).end()}).tween("zoom",function(){var D=this,T=arguments,j=P(D,T).event($),z=t.apply(D,T),V=E==null?v(z):typeof E=="function"?E.apply(D,T):E,ee=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),U=D.__zoom,Z=typeof k=="function"?k.apply(D,T):k,J=c(U.invert(V).concat(ee/U.k),Z.invert(V).concat(ee/Z.k));return function(Y){if(Y===1)Y=Z;else{var G=J(Y),ne=ee/G[2];Y=new We(ne,V[0]-G[0]*ne,V[1]-G[1]*ne)}j.zoom(null,Y)}})}function P(_,k,E){return!E&&_.__zooming||new S(_,k)}function S(_,k){this.that=_,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,k),this.taps=0}S.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,k){return this.mouse&&_!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var k=Me(this.that).datum();l.call(_,this.that,new Cy(_,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:l}),k)}};function I(_,...k){if(!e.apply(this,arguments))return;var E=P(this,k).event(_),$=this.__zoom,D=Math.max(i[0],Math.min(i[1],$.k*Math.pow(2,r.apply(this,arguments)))),T=De(_);if(E.wheel)(E.mouse[0][0]!==T[0]||E.mouse[0][1]!==T[1])&&(E.mouse[1]=$.invert(E.mouse[0]=T)),clearTimeout(E.wheel);else{if($.k===D)return;E.mouse=[T,$.invert(T)],Gn(this),E.start()}Wt(_),E.wheel=setTimeout(j,p),E.zoom("mouse",n(b(C($,D),E.mouse[0],E.mouse[1]),E.extent,s));function j(){E.wheel=null,E.end()}}function R(_,...k){if(f||!e.apply(this,arguments))return;var E=_.currentTarget,$=P(this,k,!0).event(_),D=Me(_.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",ee,!0),T=De(_,E),j=_.clientX,z=_.clientY;Pc(_.view),qr(_),$.mouse=[T,this.__zoom.invert(T)],Gn(this),$.start();function V(U){if(Wt(U),!$.moved){var Z=U.clientX-j,J=U.clientY-z;$.moved=Z*Z+J*J>g}$.event(U).zoom("mouse",n(b($.that.__zoom,$.mouse[0]=De(U,E),$.mouse[1]),$.extent,s))}function ee(U){D.on("mousemove.zoom mouseup.zoom",null),$c(U.view,$.moved),Wt(U),$.event(U).end()}}function A(_,...k){if(e.apply(this,arguments)){var E=this.__zoom,$=De(_.changedTouches?_.changedTouches[0]:_,this),D=E.invert($),T=E.k*(_.shiftKey?.5:2),j=n(b(C(E,T),$,D),t.apply(this,k),s);Wt(_),a>0?Me(this).transition().duration(a).call(M,j,$,_):Me(this).call(y.transform,j,$,_)}}function O(_,...k){if(e.apply(this,arguments)){var E=_.touches,$=E.length,D=P(this,k,_.changedTouches.length===$).event(_),T,j,z,V;for(qr(_),j=0;j<$;++j)z=E[j],V=De(z,this),V=[V,this.__zoom.invert(V),z.identifier],D.touch0?!D.touch1&&D.touch0[2]!==V[2]&&(D.touch1=V,D.taps=0):(D.touch0=V,T=!0,D.taps=1+!!u);u&&(u=clearTimeout(u)),T&&(D.taps<2&&(d=V[0],u=setTimeout(function(){u=null},h)),Gn(this),D.start())}}function H(_,...k){if(this.__zooming){var E=P(this,k).event(_),$=_.changedTouches,D=$.length,T,j,z,V;for(Wt(_),T=0;T<D;++T)j=$[T],z=De(j,this),E.touch0&&E.touch0[2]===j.identifier?E.touch0[0]=z:E.touch1&&E.touch1[2]===j.identifier&&(E.touch1[0]=z);if(j=E.that.__zoom,E.touch1){var ee=E.touch0[0],U=E.touch0[1],Z=E.touch1[0],J=E.touch1[1],Y=(Y=Z[0]-ee[0])*Y+(Y=Z[1]-ee[1])*Y,G=(G=J[0]-U[0])*G+(G=J[1]-U[1])*G;j=C(j,Math.sqrt(Y/G)),z=[(ee[0]+Z[0])/2,(ee[1]+Z[1])/2],V=[(U[0]+J[0])/2,(U[1]+J[1])/2]}else if(E.touch0)z=E.touch0[0],V=E.touch0[1];else return;E.zoom("touch",n(b(j,z,V),E.extent,s))}}function F(_,...k){if(this.__zooming){var E=P(this,k).event(_),$=_.changedTouches,D=$.length,T,j;for(qr(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),T=0;T<D;++T)j=$[T],E.touch0&&E.touch0[2]===j.identifier?delete E.touch0:E.touch1&&E.touch1[2]===j.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(j=De(j,this),Math.hypot(d[0]-j[0],d[1]-j[1])<w)){var z=Me(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return y.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Rn(+_),y):r},y.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Rn(!!_),y):e},y.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:Rn(!!_),y):o},y.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Rn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),y):t},y.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],y):[i[0],i[1]]},y.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(_){return arguments.length?(n=_,y):n},y.duration=function(_){return arguments.length?(a=+_,y):a},y.interpolate=function(_){return arguments.length?(c=_,y):c},y.on=function(){var _=l.on.apply(l,arguments);return _===l?y:_},y.clickDistance=function(_){return arguments.length?(g=(_=+_)*_,y):Math.sqrt(g)},y.tapDistance=function(_){return arguments.length?(w=+_,y):w},y}const Qe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},ln=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Qc=["Enter"," ","Escape"];var $t;(function(e){e.Strict="strict",e.Loose="loose"})($t||($t={}));var mt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mt||(mt={}));var dn;(function(e){e.Partial="partial",e.Full="full"})(dn||(dn={}));const Jc={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ot;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ot||(ot={}));var rr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(rr||(rr={}));var Q;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Q||(Q={}));const Ui={[Q.Left]:Q.Right,[Q.Right]:Q.Left,[Q.Top]:Q.Bottom,[Q.Bottom]:Q.Top};function eu(e){return e===null?null:e?"valid":"invalid"}const tu=e=>"id"in e&&"source"in e&&"target"in e,ky=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),qo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),wn=(e,t=[0,0])=>{const{width:n,height:r}=Je(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},Iy=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let s=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(o):qo(o)?o:t.nodeLookup.get(o.id));const a=s?or(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return wr(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return br(n)},bn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=or(r);n=wr(n,o)}}),br(n)},nu=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const a={..._n(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const l of e.values()){const{measured:u,selectable:d=!0,hidden:f=!1}=l;if(s&&!d||f)continue;const h=u.width??l.width??l.initialWidth??null,p=u.height??l.height??l.initialHeight??null,g=fn(a,Lt(l)),w=(h??0)*(p??0),y=i&&g>0;(!l.internals.handleBounds||y||g>=w||l.dragging)&&c.push(l)}return c},Ry=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Eo(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function So({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(e.size===0)return Promise.resolve(!1);const a=bn(e),c=Zo(a,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function ru({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:c,y:l}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??r;let d=o;if(s.extent==="parent"&&!s.expandParent)if(!a)i==null||i("005",Qe.error005());else{const h=a.measured.width,p=a.measured.height;h&&p&&(d=[[c,l],[c+h,l+p]])}else a&&Ot(s.extent)&&(d=[[s.extent[0][0]+c,s.extent[0][1]+l],[s.extent[1][0]+c,s.extent[1][1]+l]]);const f=Ot(d)?yt(t,d,s.measured):t;return{position:{x:f.x-c+s.measured.width*u[0],y:f.y-l+s.measured.height*u[1]},positionAbsolute:f}}async function Dy({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const h=i.has(f.id),p=!h&&f.parentId&&s.find(g=>g.id===f.parentId);(h||p)&&s.push(f)}const a=new Set(t.map(f=>f.id)),c=r.filter(f=>f.deletable!==!1),u=Ry(s,c);for(const f of c)a.has(f.id)&&!u.find(p=>p.id===f.id)&&u.push(f);if(!o)return{edges:u,nodes:s};const d=await o({nodes:s,edges:u});return typeof d=="boolean"?d?{edges:u,nodes:s}:{edges:[],nodes:[]}:d}const jt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),yt=(e={x:0,y:0},t,n)=>({x:jt(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:jt(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function ou(e,t,n){const{width:r,height:o}=Je(n),{x:i,y:s}=n.internals.positionAbsolute;return yt(e,[[i,s],[i+r,s+o]],t)}const Ki=(e,t,n)=>e<t?jt(Math.abs(e-t),1,t)/t:e>n?-jt(Math.abs(e-n),1,t)/t:0,iu=(e,t,n=15,r=40)=>{const o=Ki(e.x,r,t.width-r)*n,i=Ki(e.y,r,t.height-r)*n;return[o,i]},wr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Mo=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),br=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Lt=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=qo(e)?e.internals.positionAbsolute:wn(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},or=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=qo(e)?e.internals.positionAbsolute:wn(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},su=(e,t)=>br(wr(Mo(e),Mo(t))),fn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},qi=e=>Pe(e.width)&&Pe(e.height)&&Pe(e.x)&&Pe(e.y),Pe=e=>!isNaN(e)&&isFinite(e),Ay=(e,t)=>{},_r=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),_n=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?_r(a,s):a},au=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Zo=(e,t,n,r,o,i)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),l=jt(c,r,o),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,h=n/2-d*l;return{x:f,y:h,zoom:l}},ir=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ot(e){return e!==void 0&&e!=="parent"}function Je(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function cu(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function uu(e,t={width:0,height:0},n,r,o){const i={...e},s=r.get(n);if(s){const a=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function Zi(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function en(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:s}=Ue(e),a=_n({x:i-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},r),{x:c,y:l}=n?_r(a,t):a;return{xSnapped:c,ySnapped:l,...a}}const Cr=e=>({width:e.offsetWidth,height:e.offsetHeight}),lu=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Py=["INPUT","SELECT","TEXTAREA"];function No(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Py.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const du=e=>"clientX"in e,Ue=(e,t)=>{var i,s;const n=du(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Qi=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Cr(s)}})};function fu({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+o*.375+s*.375+n*.125,l=t*.125+i*.375+a*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function Dn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ji({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case Q.Left:return[t-Dn(t-r,i),n];case Q.Right:return[t+Dn(r-t,i),n];case Q.Top:return[t,n-Dn(n-o,i)];case Q.Bottom:return[t,n+Dn(o-n,i)]}}function hu({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:r,targetY:o,targetPosition:i=Q.Top,curvature:s=.25}){const[a,c]=Ji({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[l,u]=Ji({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[d,f,h,p]=fu({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${r},${o}`,d,f,h,p]}function mu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[i,a,o,s]}function $y({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?s:0)}function jy({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=wr(or(e),or(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return fn(s,br(i))>0}const Ly=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Oy=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Fy=(e,t)=>{if(!e.source||!e.target)return t;let n;return tu(e)?n={...e}:n={...e,id:Ly(e)},Oy(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function pu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=mu({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const es={[Q.Left]:{x:-1,y:0},[Q.Right]:{x:1,y:0},[Q.Top]:{x:0,y:-1},[Q.Bottom]:{x:0,y:1}},Hy=({source:e,sourcePosition:t=Q.Bottom,target:n})=>t===Q.Left||t===Q.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ts=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function zy({source:e,sourcePosition:t=Q.Bottom,target:n,targetPosition:r=Q.Top,center:o,offset:i}){const s=es[t],a=es[r],c={x:e.x+s.x*i,y:e.y+s.y*i},l={x:n.x+a.x*i,y:n.y+a.y*i},u=Hy({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let h=[],p,g;const w={x:0,y:0},y={x:0,y:0},[C,b,v,M]=mu({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){p=o.x??C,g=o.y??b;const S=[{x:p,y:c.y},{x:p,y:l.y}],I=[{x:c.x,y:g},{x:l.x,y:g}];s[d]===f?h=d==="x"?S:I:h=d==="x"?I:S}else{const S=[{x:c.x,y:l.y}],I=[{x:l.x,y:c.y}];if(d==="x"?h=s.x===f?I:S:h=s.y===f?S:I,t===r){const F=Math.abs(e[d]-n[d]);if(F<=i){const _=Math.min(i-1,i-F);s[d]===f?w[d]=(c[d]>e[d]?-1:1)*_:y[d]=(l[d]>n[d]?-1:1)*_}}if(t!==r){const F=d==="x"?"y":"x",_=s[d]===a[F],k=c[F]>l[F],E=c[F]<l[F];(s[d]===1&&(!_&&k||_&&E)||s[d]!==1&&(!_&&E||_&&k))&&(h=d==="x"?S:I)}const R={x:c.x+w.x,y:c.y+w.y},A={x:l.x+y.x,y:l.y+y.y},O=Math.max(Math.abs(R.x-h[0].x),Math.abs(A.x-h[0].x)),H=Math.max(Math.abs(R.y-h[0].y),Math.abs(A.y-h[0].y));O>=H?(p=(R.x+A.x)/2,g=h[0].y):(p=h[0].x,g=(R.y+A.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...h,{x:l.x+y.x,y:l.y+y.y},n],p,g,v,M]}function By(e,t,n,r){const o=Math.min(ts(e,t)/2,ts(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${i+o*l},${s}Q ${i},${s} ${i},${s+o*u}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+o*c}Q ${i},${s} ${i+o*a},${s}`}function To({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:r,targetY:o,targetPosition:i=Q.Top,borderRadius:s=5,centerX:a,centerY:c,offset:l=20}){const[u,d,f,h,p]=zy({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:c},offset:l});return[u.reduce((w,y,C)=>{let b="";return C>0&&C<u.length-1?b=By(u[C-1],y,u[C+1],s):b=`${C===0?"M":"L"}${y.x} ${y.y}`,w+=b,w},""),d,f,h,p]}function ns(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Vy(e){var d;const{sourceNode:t,targetNode:n}=e;if(!ns(t)||!ns(n))return null;const r=t.internals.handleBounds||rs(t.handles),o=n.internals.handleBounds||rs(n.handles),i=os((r==null?void 0:r.source)??[],e.sourceHandle),s=os(e.connectionMode===$t.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!s)return(d=e.onError)==null||d.call(e,"008",Qe.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||Q.Bottom,c=(s==null?void 0:s.position)||Q.Top,l=hn(t,i,a),u=hn(n,s,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:c}}function rs(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function hn(e,t,n=Q.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Je(e);if(r)return{x:o+s/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case Q.Top:return{x:o+s/2,y:i};case Q.Right:return{x:o+s,y:i+a/2};case Q.Bottom:return{x:o+s/2,y:i+a};case Q.Left:return{x:o,y:i+a/2}}}function os(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function ko(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Xy(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const l=ko(c,t);i.has(l)||(s.push({id:l,color:c.color||n,...c}),i.add(l))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Qo={nodeOrigin:[0,0],nodeExtent:ln,elevateNodesOnSelect:!0,defaults:{}},Yy={...Qo,checkEquality:!0};function Jo(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Gy(e,t,n){const r=Jo(Qo,n);for(const o of e.values())if(o.parentId)ei(o,e,t,r);else{const i=wn(o,r.nodeOrigin),s=Ot(o.extent)?o.extent:r.nodeExtent,a=yt(i,s,Je(o));o.internals.positionAbsolute=a}}function Io(e,t,n,r){var a,c;const o=Jo(Yy,r),i=new Map(t),s=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=i.get(l.id);if(o.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const d=wn(l,o.nodeOrigin),f=Ot(l.extent)?l.extent:o.nodeExtent,h=yt(d,f,Je(l));u={...o.defaults,...l,measured:{width:(a=l.measured)==null?void 0:a.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:h,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:gu(l,s),userNode:l}},t.set(l.id,u)}l.parentId&&ei(u,t,n,r)}}function Wy(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function ei(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:s}=Jo(Qo,r),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Wy(e,n);const l=o?1e3:0,{x:u,y:d,z:f}=Uy(e,c,i,s,l),{positionAbsolute:h}=e.internals,p=u!==h.x||d!==h.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:u,y:d}:h,z:f}})}function gu(e,t){return(Pe(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Uy(e,t,n,r,o){const{x:i,y:s}=t.internals.positionAbsolute,a=Je(e),c=wn(e,n),l=Ot(e.extent)?yt(c,e.extent,a):c;let u=yt({x:i+l.x,y:s+l.y},r,a);e.extent==="parent"&&(u=ou(u,a,t));const d=gu(e,o),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>d?f:d}}function ti(e,t,n,r=[0,0]){var s;const o=[],i=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const l=((s=i.get(a.parentId))==null?void 0:s.expandedRect)??Lt(c),u=su(l,a.rect);i.set(a.parentId,{expandedRect:u,parent:c})}return i.size>0&&i.forEach(({expandedRect:a,parent:c},l)=>{var b;const u=c.internals.positionAbsolute,d=Je(c),f=c.origin??r,h=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,p=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,g=Math.max(d.width,Math.round(a.width)),w=Math.max(d.height,Math.round(a.height)),y=(g-d.width)*f[0],C=(w-d.height)*f[1];(h>0||p>0||y||C)&&(o.push({id:l,type:"position",position:{x:c.position.x-h+y,y:c.position.y-p+C}}),(b=n.get(l))==null||b.forEach(v=>{e.some(M=>M.id===v.id)||o.push({id:v.id,type:"position",position:{x:v.position.x+h,y:v.position.y+p}})})),(d.width<a.width||d.height<a.height||h||p)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:g+(h?f[0]*h-y:0),height:w+(p?f[1]*p-C:0)}})}),o}function Ky(e,t,n,r,o,i){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const c=[],l=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const h=t.get(f.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),a=!0;continue}const p=Cr(f.nodeElement),g=h.measured.width!==p.width||h.measured.height!==p.height;if(!!(p.width&&p.height&&(g||!h.internals.handleBounds||f.force))){const y=f.nodeElement.getBoundingClientRect(),C=Ot(h.extent)?h.extent:i;let{positionAbsolute:b}=h.internals;h.parentId&&h.extent==="parent"?b=ou(b,p,t.get(h.parentId)):C&&(b=yt(b,C,p));const v={...h,measured:p,internals:{...h.internals,positionAbsolute:b,handleBounds:{source:Qi("source",f.nodeElement,y,u,h.id),target:Qi("target",f.nodeElement,y,u,h.id)}}};t.set(h.id,v),h.parentId&&ei(v,t,n,{nodeOrigin:o}),a=!0,g&&(c.push({id:h.id,type:"dimensions",dimensions:p}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:Lt(v,o)}))}}if(d.length>0){const f=ti(d,t,n,o);c.push(...f)}return{changes:c,updatedInternals:a}}async function qy({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function is(e,t,n,r,o,i){let s=o;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${o}-${e}`;const c=r.get(s)||new Map;if(r.set(s,c.set(n,t)),i){s=`${o}-${e}-${i}`;const l=r.get(s)||new Map;r.set(s,l.set(n,t))}}function yu(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:s=null,targetHandle:a=null}=r,c={edgeId:r.id,source:o,target:i,sourceHandle:s,targetHandle:a},l=`${o}-${s}--${i}-${a}`,u=`${i}-${a}--${o}-${s}`;is("source",c,u,e,o,s),is("target",c,l,e,i,a),t.set(r.id,r)}}function xu(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:xu(n,t):!1}function ss(e,t,n){var o;let r=e;do{if((o=r==null?void 0:r.matches)!=null&&o.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Zy(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!xu(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(i);a&&o.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return o}function Zr({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,c;const o=[];for(const[l,u]of t){const d=(s=n.get(l))==null?void 0:s.internals.userNode;d&&o.push({...d,position:u.position,dragging:r})}if(!e)return[o[0],o];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:o[0],o]}function Qy({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,a=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,h=!1;function p({noDragClassName:w,handleSelector:y,domNode:C,isSelectable:b,nodeId:v,nodeClickDistance:M=0}){f=Me(C);function P({x:A,y:O},H){const{nodeLookup:F,nodeExtent:_,snapGrid:k,snapToGrid:E,nodeOrigin:$,onNodeDrag:D,onSelectionDrag:T,onError:j,updateNodePositions:z}=t();i={x:A,y:O};let V=!1,ee={x:0,y:0,x2:0,y2:0};if(a.size>1&&_){const U=bn(a);ee=Mo(U)}for(const[U,Z]of a){if(!F.has(U))continue;let J={x:A-Z.distance.x,y:O-Z.distance.y};E&&(J=_r(J,k));let Y=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];if(a.size>1&&_&&!Z.extent){const{positionAbsolute:oe}=Z.internals,se=oe.x-ee.x+_[0][0],te=oe.x+Z.measured.width-ee.x2+_[1][0],le=oe.y-ee.y+_[0][1],he=oe.y+Z.measured.height-ee.y2+_[1][1];Y=[[se,le],[te,he]]}const{position:G,positionAbsolute:ne}=ru({nodeId:U,nextPosition:J,nodeLookup:F,nodeExtent:Y,nodeOrigin:$,onError:j});V=V||Z.position.x!==G.x||Z.position.y!==G.y,Z.position=G,Z.internals.positionAbsolute=ne}if(V&&(z(a,!0),H&&(r||D||!v&&T))){const[U,Z]=Zr({nodeId:v,dragItems:a,nodeLookup:F});r==null||r(H,a,U,Z),D==null||D(H,U,Z),v||T==null||T(H,Z)}}async function S(){if(!u)return;const{transform:A,panBy:O,autoPanSpeed:H}=t(),[F,_]=iu(l,u,H);(F!==0||_!==0)&&(i.x=(i.x??0)-F/A[2],i.y=(i.y??0)-_/A[2],await O({x:F,y:_})&&P(i,null)),s=requestAnimationFrame(S)}function I(A){var V;const{nodeLookup:O,multiSelectionActive:H,nodesDraggable:F,transform:_,snapGrid:k,snapToGrid:E,selectNodesOnDrag:$,onNodeDragStart:D,onSelectionDragStart:T,unselectNodesAndEdges:j}=t();d=!0,(!$||!b)&&!H&&v&&((V=O.get(v))!=null&&V.selected||j()),b&&$&&v&&(e==null||e(v));const z=en(A.sourceEvent,{transform:_,snapGrid:k,snapToGrid:E,containerBounds:u});if(i=z,a=Zy(O,F,z,v),a.size>0&&(n||D||!v&&T)){const[ee,U]=Zr({nodeId:v,dragItems:a,nodeLookup:O});n==null||n(A.sourceEvent,a,ee,U),D==null||D(A.sourceEvent,ee,U),v||T==null||T(A.sourceEvent,U)}}const R=jc().clickDistance(M).on("start",A=>{const{domNode:O,nodeDragThreshold:H,transform:F,snapGrid:_,snapToGrid:k}=t();u=(O==null?void 0:O.getBoundingClientRect())||null,h=!1,H===0&&I(A),i=en(A.sourceEvent,{transform:F,snapGrid:_,snapToGrid:k,containerBounds:u}),l=Ue(A.sourceEvent,u)}).on("drag",A=>{const{autoPanOnNodeDrag:O,transform:H,snapGrid:F,snapToGrid:_,nodeDragThreshold:k,nodeLookup:E}=t(),$=en(A.sourceEvent,{transform:H,snapGrid:F,snapToGrid:_,containerBounds:u});if((A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1||v&&!E.has(v))&&(h=!0),!h){if(!c&&O&&d&&(c=!0,S()),!d){const D=$.xSnapped-(i.x??0),T=$.ySnapped-(i.y??0);Math.sqrt(D*D+T*T)>k&&I(A)}(i.x!==$.xSnapped||i.y!==$.ySnapped)&&a&&d&&(l=Ue(A.sourceEvent,u),P($,A.sourceEvent))}}).on("end",A=>{if(!(!d||h)&&(c=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:O,updateNodePositions:H,onNodeDragStop:F,onSelectionDragStop:_}=t();if(H(a,!1),o||F||!v&&_){const[k,E]=Zr({nodeId:v,dragItems:a,nodeLookup:O,dragging:!1});o==null||o(A.sourceEvent,a,k,E),F==null||F(A.sourceEvent,k,E),v||_==null||_(A.sourceEvent,E)}}}).filter(A=>{const O=A.target;return!A.button&&(!w||!ss(O,`.${w}`,C))&&(!y||ss(O,y,C))});f.call(R)}function g(){f==null||f.on(".drag",null)}return{update:p,destroy:g}}function Jy(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())fn(o,Lt(i))>0&&r.push(i);return r}const ex=250;function tx(e,t,n,r){var a,c;let o=[],i=1/0;const s=Jy(e,n,t+ex);for(const l of s){const u=[...((a=l.internals.handleBounds)==null?void 0:a.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:h}=hn(l,d,d.position,!0),p=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(h-e.y,2));p>t||(p<i?(o=[{...d,x:f,y:h}],i=p):p===i&&o.push({...d,x:f,y:h}))}}if(!o.length)return null;if(o.length>1){const l=r.type==="source"?"target":"source";return o.find(u=>u.type===l)??o[0]}return o[0]}function vu(e,t,n,r,o,i=!1){var l,u,d;const s=r.get(e);if(!s)return null;const a=o==="strict"?(l=s.internals.handleBounds)==null?void 0:l[t]:[...((u=s.internals.handleBounds)==null?void 0:u.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],c=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return c&&i?{...c,...hn(s,c,c.position,!0)}:c}function wu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function nx(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const bu=()=>!0;function rx(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:g,onConnectEnd:w,isValidConnection:y=bu,onReconnectEnd:C,updateConnection:b,getTransform:v,getFromHandle:M,autoPanSpeed:P}){const S=lu(e.target);let I=0,R;const{x:A,y:O}=Ue(e),H=S==null?void 0:S.elementFromPoint(A,O),F=wu(i,H),_=a==null?void 0:a.getBoundingClientRect();if(!_||!F)return;const k=vu(o,F,r,c,t);if(!k)return;let E=Ue(e,_),$=!1,D=null,T=!1,j=null;function z(){if(!u||!_)return;const[ne,oe]=iu(E,_,P);f({x:ne,y:oe}),I=requestAnimationFrame(z)}const V={...k,nodeId:o,type:F,position:k.position},ee=c.get(o),Z={inProgress:!0,isValid:null,from:hn(ee,V,Q.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:ee,to:E,toHandle:null,toPosition:Ui[V.position],toNode:null};b(Z);let J=Z;p==null||p(e,{nodeId:o,handleId:r,handleType:F});function Y(ne){if(!M()||!V){G(ne);return}const oe=v();E=Ue(ne,_),R=tx(_n(E,oe,!1,[1,1]),n,c,V),$||(z(),$=!0);const se=_u(ne,{handle:R,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:y,doc:S,lib:l,flowId:d,nodeLookup:c});j=se.handleDomNode,D=se.connection,T=nx(!!R,se.isValid);const te={...J,isValid:T,to:R&&T?au({x:R.x,y:R.y},oe):E,toHandle:se.toHandle,toPosition:T&&se.toHandle?se.toHandle.position:Ui[V.position],toNode:se.toHandle?c.get(se.toHandle.nodeId):null};T&&R&&J.toHandle&&te.toHandle&&J.toHandle.type===te.toHandle.type&&J.toHandle.nodeId===te.toHandle.nodeId&&J.toHandle.id===te.toHandle.id&&J.to.x===te.to.x&&J.to.y===te.to.y||(b(te),J=te)}function G(ne){(R||j)&&D&&T&&(g==null||g(D));const{inProgress:oe,...se}=J,te={...se,toPosition:J.toHandle?J.toPosition:null};w==null||w(ne,te),i&&(C==null||C(ne,te)),h(),cancelAnimationFrame(I),$=!1,T=!1,D=null,j=null,S.removeEventListener("mousemove",Y),S.removeEventListener("mouseup",G),S.removeEventListener("touchmove",Y),S.removeEventListener("touchend",G)}S.addEventListener("mousemove",Y),S.addEventListener("mouseup",G),S.addEventListener("touchmove",Y),S.addEventListener("touchend",G)}function _u(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:a,flowId:c,isValidConnection:l=bu,nodeLookup:u}){const d=i==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:p}=Ue(e),g=s.elementFromPoint(h,p),w=g!=null&&g.classList.contains(`${a}-flow__handle`)?g:f,y={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const C=wu(void 0,w),b=w.getAttribute("data-nodeid"),v=w.getAttribute("data-handleid"),M=w.classList.contains("connectable"),P=w.classList.contains("connectableend");if(!b||!C)return y;const S={source:d?b:r,sourceHandle:d?v:o,target:d?r:b,targetHandle:d?o:v};y.connection=S;const R=M&&P&&(n===$t.Strict?d&&C==="source"||!d&&C==="target":b!==r||v!==o);y.isValid=R&&l(S),y.toHandle=vu(b,C,v,u,n,!1)}return y}const Ro={onPointerDown:rx,isValid:_u};function ox({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Me(e);function i({translateExtent:a,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:f=!0,inversePan:h=!1}){const p=b=>{const v=n();if(b.sourceEvent.type!=="wheel"||!t)return;const M=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*u,P=v[2]*Math.pow(2,M);t.scaleTo(P)};let g=[0,0];const w=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(g=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},y=b=>{const v=n();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!t)return;const M=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],P=[M[0]-g[0],M[1]-g[1]];g=M;const S=r()*Math.max(v[2],Math.log(v[2]))*(h?-1:1),I={x:v[0]-P[0]*S,y:v[1]-P[1]*S},R=[[0,0],[c,l]];t.setViewportConstrained({x:I.x,y:I.y,zoom:v[2]},R,a)},C=Zc().on("start",w).on("zoom",d?y:null).on("zoom.wheel",f?p:null);o.call(C,{})}function s(){o.on("zoom",null)}return{update:i,destroy:s,pointer:De}}const ix=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Er=e=>({x:e.x,y:e.y,zoom:e.k}),Qr=({x:e,y:t,zoom:n})=>vr.translate(e,t).scale(n),Et=(e,t)=>e.target.closest(`.${t}`),Cu=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Jr=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Eu=e=>{const t=e.ctrlKey&&ir()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function sx({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Et(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&s){const w=De(u),y=Eu(u),C=d*Math.pow(2,y);r.scaleTo(n,C,w,u);return}const f=u.deltaMode===1?20:1;let h=o===mt.Vertical?0:u.deltaX*f,p=o===mt.Horizontal?0:u.deltaY*f;!ir()&&u.shiftKey&&o!==mt.Vertical&&(h=u.deltaY*f,p=0),r.translateBy(n,-(h/d)*i,-(p/d)*i,{internal:!0});const g=Er(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(u,g)),e.isPanScrolling&&(c==null||c(u,g),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,g),e.isPanScrolling=!1},150))}}function ax({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||Et(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function cx({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,s,a;if((i=r.sourceEvent)!=null&&i.internal)return;const o=Er(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function ux({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var s,a;e.usedRightMouseButton=!!(n&&Cu(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((a=i.sourceEvent)!=null&&a.internal)&&(o==null||o(i.sourceEvent,Er(i.transform)))}}function lx({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&Cu(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&ix(e.prevViewport,s.transform))){const c=Er(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,c)},n?150:0)}}}function dx({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:c,lib:l}){return u=>{var p;const d=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Et(u,`${l}-flow__node`)||Et(u,`${l}-flow__edge`)))return!0;if(!r&&!d&&!o&&!i&&!n||s||Et(u,a)&&u.type==="wheel"||Et(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((p=u.touches)==null?void 0:p.length)>1)return u.preventDefault(),!1;if(!d&&!o&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const h=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&h}}function fx({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Zc().clickDistance(!Pe(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),h=Me(e).call(f);b({x:i.x,y:i.y,zoom:jt(i.zoom,t,n)},[[0,0],[d.width,d.height]],o);const p=h.on("wheel.zoom"),g=h.on("dblclick.zoom");f.wheelDelta(Eu);function w(H,F){return h?new Promise(_=>{f==null||f.transform(Jr(h,F==null?void 0:F.duration,()=>_(!0)),H)}):Promise.resolve(!1)}function y({noWheelClassName:H,noPanClassName:F,onPaneContextMenu:_,userSelectionActive:k,panOnScroll:E,panOnDrag:$,panOnScrollMode:D,panOnScrollSpeed:T,preventScrolling:j,zoomOnPinch:z,zoomOnScroll:V,zoomOnDoubleClick:ee,zoomActivationKeyPressed:U,lib:Z,onTransformChange:J}){k&&!u.isZoomingOrPanning&&C();const G=E&&!U&&!k?sx({zoomPanValues:u,noWheelClassName:H,d3Selection:h,d3Zoom:f,panOnScrollMode:D,panOnScrollSpeed:T,zoomOnPinch:z,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:c}):ax({noWheelClassName:H,preventScrolling:j,d3ZoomHandler:p});if(h.on("wheel.zoom",G,{passive:!1}),!k){const oe=cx({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:a});f.on("start",oe);const se=ux({zoomPanValues:u,panOnDrag:$,onPaneContextMenu:!!_,onPanZoom:s,onTransformChange:J});f.on("zoom",se);const te=lx({zoomPanValues:u,panOnDrag:$,panOnScroll:E,onPaneContextMenu:_,onPanZoomEnd:c,onDraggingChange:l});f.on("end",te)}const ne=dx({zoomActivationKeyPressed:U,panOnDrag:$,zoomOnScroll:V,panOnScroll:E,zoomOnDoubleClick:ee,zoomOnPinch:z,userSelectionActive:k,noPanClassName:F,noWheelClassName:H,lib:Z});f.filter(ne),ee?h.on("dblclick.zoom",g):h.on("dblclick.zoom",null)}function C(){f.on("zoom",null)}async function b(H,F,_){const k=Qr(H),E=f==null?void 0:f.constrain()(k,F,_);return E&&await w(E),new Promise($=>$(E))}async function v(H,F){const _=Qr(H);return await w(_,F),new Promise(k=>k(_))}function M(H){if(h){const F=Qr(H),_=h.property("__zoom");(_.k!==H.zoom||_.x!==H.x||_.y!==H.y)&&(f==null||f.transform(h,F,null,{sync:!0}))}}function P(){const H=h?qc(h.node()):{x:0,y:0,k:1};return{x:H.x,y:H.y,zoom:H.k}}function S(H,F){return h?new Promise(_=>{f==null||f.scaleTo(Jr(h,F==null?void 0:F.duration,()=>_(!0)),H)}):Promise.resolve(!1)}function I(H,F){return h?new Promise(_=>{f==null||f.scaleBy(Jr(h,F==null?void 0:F.duration,()=>_(!0)),H)}):Promise.resolve(!1)}function R(H){f==null||f.scaleExtent(H)}function A(H){f==null||f.translateExtent(H)}function O(H){const F=!Pe(H)||H<0?0:H;f==null||f.clickDistance(F)}return{update:y,destroy:C,setViewport:v,setViewportConstrained:b,getViewport:P,scaleTo:S,scaleBy:I,setScaleExtent:R,setTranslateExtent:A,syncViewport:M,setClickDistance:O}}var It;(function(e){e.Line="line",e.Handle="handle"})(It||(It={}));const hx=["top-left","top-right","bottom-left","bottom-right"],mx=["top","right","bottom","left"];function px({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,a=n-r,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}function gx(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function et(e,t){return Math.max(0,t-e)}function tt(e,t){return Math.max(0,e-t)}function An(e,t,n){return Math.max(0,t-e,e-n)}function as(e,t){return e?!t:t}function yx(e,t,n,r,o,i,s,a){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:h,ySnapped:p}=n,{minWidth:g,maxWidth:w,minHeight:y,maxHeight:C}=r,{x:b,y:v,width:M,height:P,aspectRatio:S}=e;let I=Math.floor(u?h-e.pointerX:0),R=Math.floor(d?p-e.pointerY:0);const A=M+(c?-I:I),O=P+(l?-R:R),H=-i[0]*M,F=-i[1]*P;let _=An(A,g,w),k=An(O,y,C);if(s){let D=0,T=0;c&&I<0?D=et(b+I+H,s[0][0]):!c&&I>0&&(D=tt(b+A+H,s[1][0])),l&&R<0?T=et(v+R+F,s[0][1]):!l&&R>0&&(T=tt(v+O+F,s[1][1])),_=Math.max(_,D),k=Math.max(k,T)}if(a){let D=0,T=0;c&&I>0?D=tt(b+I,a[0][0]):!c&&I<0&&(D=et(b+A,a[1][0])),l&&R>0?T=tt(v+R,a[0][1]):!l&&R<0&&(T=et(v+O,a[1][1])),_=Math.max(_,D),k=Math.max(k,T)}if(o){if(u){const D=An(A/S,y,C)*S;if(_=Math.max(_,D),s){let T=0;!c&&!l||c&&!l&&f?T=tt(v+F+A/S,s[1][1])*S:T=et(v+F+(c?I:-I)/S,s[0][1])*S,_=Math.max(_,T)}if(a){let T=0;!c&&!l||c&&!l&&f?T=et(v+A/S,a[1][1])*S:T=tt(v+(c?I:-I)/S,a[0][1])*S,_=Math.max(_,T)}}if(d){const D=An(O*S,g,w)/S;if(k=Math.max(k,D),s){let T=0;!c&&!l||l&&!c&&f?T=tt(b+O*S+H,s[1][0])/S:T=et(b+(l?R:-R)*S+H,s[0][0])/S,k=Math.max(k,T)}if(a){let T=0;!c&&!l||l&&!c&&f?T=et(b+O*S,a[1][0])/S:T=tt(b+(l?R:-R)*S,a[0][0])/S,k=Math.max(k,T)}}}R=R+(R<0?k:-k),I=I+(I<0?_:-_),o&&(f?A>O*S?R=(as(c,l)?-I:I)/S:I=(as(c,l)?-R:R)*S:u?(R=I/S,l=c):(I=R*S,c=l));const E=c?b+I:b,$=l?v+R:v;return{width:M+(c?-I:I),height:P+(l?-R:R),x:i[0]*I*(c?-1:1)+E,y:i[1]*R*(l?-1:1)+$}}const Su={width:0,height:0,x:0,y:0},xx={...Su,pointerX:0,pointerY:0,aspectRatio:1};function vx(e){return[[0,0],[e.measured.width,e.measured.height]]}function wx(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,c=n[1]*s;return[[r-a,o-c],[r+i-a,o+s-c]]}function bx({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Me(e);function s({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:d,onResize:f,onResizeEnd:h,shouldResize:p}){let g={...Su},w={...xx};const y=gx(c);let C,b=null,v=[],M,P,S;const I=jc().on("start",R=>{const{nodeLookup:A,transform:O,snapGrid:H,snapToGrid:F,nodeOrigin:_,paneDomNode:k}=n();if(C=A.get(t),!C)return;b=(k==null?void 0:k.getBoundingClientRect())??null;const{xSnapped:E,ySnapped:$}=en(R.sourceEvent,{transform:O,snapGrid:H,snapToGrid:F,containerBounds:b});g={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},w={...g,pointerX:E,pointerY:$,aspectRatio:g.width/g.height},M=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(M=A.get(C.parentId),P=M&&C.extent==="parent"?vx(M):void 0),v=[],S=void 0;for(const[D,T]of A)if(T.parentId===t&&(v.push({id:D,position:{...T.position},extent:T.extent}),T.extent==="parent"||T.expandParent)){const j=wx(T,C,T.origin??_);S?S=[[Math.min(j[0][0],S[0][0]),Math.min(j[0][1],S[0][1])],[Math.max(j[1][0],S[1][0]),Math.max(j[1][1],S[1][1])]]:S=j}d==null||d(R,{...g})}).on("drag",R=>{const{transform:A,snapGrid:O,snapToGrid:H,nodeOrigin:F}=n(),_=en(R.sourceEvent,{transform:A,snapGrid:O,snapToGrid:H,containerBounds:b}),k=[];if(!C)return;const{x:E,y:$,width:D,height:T}=g,j={},z=C.origin??F,{width:V,height:ee,x:U,y:Z}=yx(w,y,_,l,u,z,P,S),J=V!==D,Y=ee!==T,G=U!==E&&J,ne=Z!==$&&Y;if(!G&&!ne&&!J&&!Y)return;if((G||ne||z[0]===1||z[1]===1)&&(j.x=G?U:g.x,j.y=ne?Z:g.y,g.x=j.x,g.y=j.y,v.length>0)){const le=U-E,he=Z-$;for(const ye of v)ye.position={x:ye.position.x-le+z[0]*(V-D),y:ye.position.y-he+z[1]*(ee-T)},k.push(ye)}if((J||Y)&&(j.width=J?V:g.width,j.height=Y?ee:g.height,g.width=j.width,g.height=j.height),M&&C.expandParent){const le=z[0]*(j.width??0);j.x&&j.x<le&&(g.x=le,w.x=w.x-(j.x-le));const he=z[1]*(j.height??0);j.y&&j.y<he&&(g.y=he,w.y=w.y-(j.y-he))}const oe=px({width:g.width,prevWidth:D,height:g.height,prevHeight:T,affectsX:y.affectsX,affectsY:y.affectsY}),se={...g,direction:oe};(p==null?void 0:p(R,se))!==!1&&(f==null||f(R,se),r(j,k))}).on("end",R=>{h==null||h(R,{...g}),o==null||o()});i.call(I)}function a(){i.on(".drag",null)}return{update:s,destroy:a}}var Mu={exports:{}},Nu={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sr=m,_x=jm;function Cx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ex=typeof Object.is=="function"?Object.is:Cx,Sx=_x.useSyncExternalStore,Mx=Sr.useRef,Nx=Sr.useEffect,Tx=Sr.useMemo,kx=Sr.useDebugValue;Nu.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=Mx(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=Tx(function(){function c(h){if(!l){if(l=!0,u=h,h=r(h),o!==void 0&&s.hasValue){var p=s.value;if(o(p,h))return d=p}return d=h}if(p=d,Ex(u,h))return p;var g=r(h);return o!==void 0&&o(p,g)?(u=h,p):(u=h,d=g)}var l=!1,u,d,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,o]);var a=Sx(e,i[0],i[1]);return Nx(function(){s.hasValue=!0,s.value=a},[a]),kx(a),a};Mu.exports=Nu;var Ix=Mu.exports;const Rx=Id(Ix),Dx={},cs=e=>{let t;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,h))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Dx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,o,c);return c},Ax=e=>e?cs(e):cs,{useDebugValue:Px}=be,{useSyncExternalStoreWithSelector:$x}=Rx,jx=e=>e;function Tu(e,t=jx,n){const r=$x(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Px(r),r}const us=(e,t)=>{const n=Ax(e),r=(o,i=t)=>Tu(n,o,i);return Object.assign(r,n),r},Lx=(e,t)=>e?us(e,t):us;function ge(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Mr=m.createContext(null),Ox=Mr.Provider,ku=Qe.error001();function ue(e,t){const n=m.useContext(Mr);if(n===null)throw new Error(ku);return Tu(n,e,t)}function pe(){const e=m.useContext(Mr);if(e===null)throw new Error(ku);return m.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ls={display:"none"},Fx={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Iu="react-flow__node-desc",Ru="react-flow__edge-desc",Hx="react-flow__aria-live",zx=e=>e.ariaLiveMessage;function Bx({rfId:e}){const t=ue(zx);return x.jsx("div",{id:`${Hx}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Fx,children:t})}function Vx({rfId:e,disableKeyboardA11y:t}){return x.jsxs(x.Fragment,{children:[x.jsxs("div",{id:`${Iu}-${e}`,style:ls,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),x.jsx("div",{id:`${Ru}-${e}`,style:ls,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&x.jsx(Bx,{rfId:e})]})}const Xx=e=>e.userSelectionActive?"none":"all",ni=m.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const s=ue(Xx),a=`${e}`.split("-");return x.jsx("div",{className:xe(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},ref:i,...o,children:t})});function Yx({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:x.jsx(ni,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:x.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Gx=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Pn=e=>e.id;function Wx(e,t){return ge(e.selectedNodes.map(Pn),t.selectedNodes.map(Pn))&&ge(e.selectedEdges.map(Pn),t.selectedEdges.map(Pn))}function Ux({onSelectionChange:e}){const t=pe(),{selectedNodes:n,selectedEdges:r}=ue(Gx,Wx);return m.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(i=>i(o))},[n,r,e]),null}const Kx=e=>!!e.onSelectionChangeHandlers;function qx({onSelectionChange:e}){const t=ue(Kx);return e||t?x.jsx(Ux,{onSelectionChange:e}):null}const Du=[0,0],Zx={x:0,y:0,zoom:1},Qx=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],ds=[...Qx,"rfId"],Jx=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),fs={translateExtent:ln,nodeOrigin:Du,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function ev(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=ue(Jx,ge),u=pe();m.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=fs,a()}),[]);const d=m.useRef(fs);return m.useEffect(()=>{for(const f of ds){const h=e[f],p=d.current[f];h!==p&&(typeof e[f]>"u"||(f==="nodes"?t(h):f==="edges"?n(h):f==="minZoom"?r(h):f==="maxZoom"?o(h):f==="translateExtent"?i(h):f==="nodeExtent"?s(h):f==="paneClickDistance"?l(h):f==="fitView"?u.setState({fitViewOnInit:h}):f==="fitViewOptions"?u.setState({fitViewOnInitOptions:h}):u.setState({[f]:h})))}d.current=e},ds.map(f=>e[f])),null}function hs(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function tv(e){var r;const[t,n]=m.useState(e==="system"?null:e);return m.useEffect(()=>{if(e!=="system"){n(e);return}const o=hs(),i=()=>n(o!=null&&o.matches?"dark":"light");return i(),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}},[e]),t!==null?t:(r=hs())!=null&&r.matches?"dark":"light"}const ms=typeof document<"u"?document:null;function mn(e=null,t={target:ms,actInsideInputWithModifier:!0}){const[n,r]=m.useState(!1),o=m.useRef(!1),i=m.useRef(new Set([])),[s,a]=m.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=l.reduce((d,f)=>d.concat(...f),[]);return[l,u]}return[[],[]]},[e]);return m.useEffect(()=>{const c=(t==null?void 0:t.target)||ms;if(e!==null){const l=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&No(f))return!1;const p=gs(f.code,a);i.current.add(f[p]),ps(s,i.current,!1)&&(f.preventDefault(),r(!0))},u=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&No(f))return!1;const p=gs(f.code,a);ps(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(f[p]),f.key==="Meta"&&i.current.clear(),o.current=!1},d=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function ps(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function gs(e,t){return t.includes(e)?"code":"key"}const nv=()=>{const e=pe();return m.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:i,domNode:s}=e.getState();if(!i||!s)return Promise.resolve(!1);const a=Eo(n,t),{width:c,height:l}=Cr(s);return So({nodes:a,width:c,height:l,minZoom:r,maxZoom:o,panZoom:i},t)},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:s,panZoom:a}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,l=o/2-t*c,u=i/2-n*c;return a?(await a.setViewport({x:l,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),c=Zo(t,r,o,i,s,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:s,y:a}=i.getBoundingClientRect(),c={x:t.x-s,y:t.y-a};return _n(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=au(t,n);return{x:s.x+o,y:s.y+i}}}),[])};function Au(e,t){const n=[],r=new Map,o=[];for(const i of e)if(i.type==="add"){o.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const s=r.get(i.id);s?s.push(i):r.set(i.id,[i])}for(const i of t){const s=r.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...i};for(const c of s)rv(c,a);n.push(a)}return o.length&&o.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function rv(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Pu(e,t){return Au(e,t)}function $u(e,t){return Au(e,t)}function lt(e,t){return{id:e,type:"select",selected:t}}function St(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const s=t.has(o);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),r.push(lt(i.id,s)))}return r}function ys({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const a=t.get(s.id),c=((o=a==null?void 0:a.internals)==null?void 0:o.userNode)??a;c!==void 0&&c!==s&&n.push({id:s.id,item:s,type:"replace"}),c===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function xs(e){return{id:e.id,type:"remove"}}const vs=e=>ky(e),ov=e=>tu(e);function ju(e){return m.forwardRef(e)}const iv=typeof window<"u"?m.useLayoutEffect:m.useEffect;function ws(e){const[t,n]=m.useState(BigInt(0)),[r]=m.useState(()=>sv(()=>n(o=>o+BigInt(1))));return iv(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function sv(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Lu=m.createContext(null);function av({children:e}){const t=pe(),n=m.useCallback(a=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:d,nodeLookup:f}=t.getState();let h=c;for(const p of a)h=typeof p=="function"?p(h):p;u?l(h):d&&d(ys({items:h,lookup:f}))},[]),r=ws(n),o=m.useCallback(a=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:d,edgeLookup:f}=t.getState();let h=c;for(const p of a)h=typeof p=="function"?p(h):p;u?l(h):d&&d(ys({items:h,lookup:f}))},[]),i=ws(o),s=m.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return x.jsx(Lu.Provider,{value:s,children:e})}function cv(){const e=m.useContext(Lu);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const uv=e=>!!e.panZoom;function ri(){const e=nv(),t=pe(),n=cv(),r=ue(uv),o=m.useMemo(()=>{const i=d=>t.getState().nodeLookup.get(d),s=d=>{n.nodeQueue.push(d)},a=d=>{n.edgeQueue.push(d)},c=d=>{var y,C;const{nodeLookup:f,nodeOrigin:h}=t.getState(),p=vs(d)?d:f.get(d.id),g=p.parentId?uu(p.position,p.measured,p.parentId,f,h):p.position,w={...p,position:g,width:((y=p.measured)==null?void 0:y.width)??p.width,height:((C=p.measured)==null?void 0:C.height)??p.height};return Lt(w)},l=(d,f,h={replace:!1})=>{s(p=>p.map(g=>{if(g.id===d){const w=typeof f=="function"?f(g):f;return h.replace&&vs(w)?w:{...g,...w}}return g}))},u=(d,f,h={replace:!1})=>{a(p=>p.map(g=>{if(g.id===d){const w=typeof f=="function"?f(g):f;return h.replace&&ov(w)?w:{...g,...w}}return g}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=i(d))==null?void 0:f.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:s,setEdges:a,addNodes:d=>{const f=Array.isArray(d)?d:[d];n.nodeQueue.push(h=>[...h,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];n.edgeQueue.push(h=>[...h,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:h}=t.getState(),[p,g,w]=h;return{nodes:d.map(y=>({...y})),edges:f.map(y=>({...y})),viewport:{x:p,y:g,zoom:w}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:h,edges:p,onNodesDelete:g,onEdgesDelete:w,triggerNodeChanges:y,triggerEdgeChanges:C,onDelete:b,onBeforeDelete:v}=t.getState(),{nodes:M,edges:P}=await Dy({nodesToRemove:d,edgesToRemove:f,nodes:h,edges:p,onBeforeDelete:v}),S=P.length>0,I=M.length>0;if(S){const R=P.map(xs);w==null||w(P),C(R)}if(I){const R=M.map(xs);g==null||g(M),y(R)}return(I||S)&&(b==null||b({nodes:M,edges:P})),{deletedNodes:M,deletedEdges:P}},getIntersectingNodes:(d,f=!0,h)=>{const p=qi(d),g=p?d:c(d),w=h!==void 0;return g?(h||t.getState().nodes).filter(y=>{const C=t.getState().nodeLookup.get(y.id);if(C&&!p&&(y.id===d.id||!C.internals.positionAbsolute))return!1;const b=Lt(w?y:C),v=fn(b,g);return f&&v>0||v>=g.width*g.height}):[]},isNodeIntersecting:(d,f,h=!0)=>{const g=qi(d)?d:c(d);if(!g)return!1;const w=fn(g,f);return h&&w>0||w>=g.width*g.height},updateNode:l,updateNodeData:(d,f,h={replace:!1})=>{l(d,p=>{const g=typeof f=="function"?f(p):f;return h.replace?{...p,data:g}:{...p,data:{...p.data,...g}}},h)},updateEdge:u,updateEdgeData:(d,f,h={replace:!1})=>{u(d,p=>{const g=typeof f=="function"?f(p):f;return h.replace?{...p,data:g}:{...p,data:{...p.data,...g}}},h)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:h}=t.getState();return Iy(d,{nodeLookup:f,nodeOrigin:h})},getHandleConnections:({type:d,id:f,nodeId:h})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${h}-${d}${f?`-${f}`:""}`))==null?void 0:p.values())??[])},getNodeConnections:({type:d,handleId:f,nodeId:h})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${h}${d?f?`-${d}-${f}`:`-${d}`:""}`))==null?void 0:p.values())??[])}}},[]);return m.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const bs=e=>e.selected,lv={actInsideInputWithModifier:!1},dv=typeof window<"u"?window:void 0;function fv({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=pe(),{deleteElements:r}=ri(),o=mn(e,lv),i=mn(t,{target:dv});m.useEffect(()=>{if(o){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(bs),edges:s.filter(bs)}),n.setState({nodesSelectionActive:!1})}},[o]),m.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function hv(e){const t=pe();m.useEffect(()=>{const n=()=>{var o,i;if(!e.current)return!1;const r=Cr(e.current);(r.height===0||r.width===0)&&((i=(o=t.getState()).onError)==null||i.call(o,"004",Qe.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Nr={position:"absolute",width:"100%",height:"100%",top:0,left:0},mv=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function pv({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=mt.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:h=!0,children:p,noWheelClassName:g,noPanClassName:w,onViewportChange:y,isControlledViewport:C,paneClickDistance:b}){const v=pe(),M=m.useRef(null),{userSelectionActive:P,lib:S}=ue(mv,ge),I=mn(f),R=m.useRef();hv(M);const A=m.useCallback(O=>{y==null||y({x:O[0],y:O[1],zoom:O[2]}),C||v.setState({transform:O})},[y,C]);return m.useEffect(()=>{if(M.current){R.current=fx({domNode:M.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,paneClickDistance:b,onDraggingChange:_=>v.setState({paneDragging:_}),onPanZoomStart:(_,k)=>{const{onViewportChangeStart:E,onMoveStart:$}=v.getState();$==null||$(_,k),E==null||E(k)},onPanZoom:(_,k)=>{const{onViewportChange:E,onMove:$}=v.getState();$==null||$(_,k),E==null||E(k)},onPanZoomEnd:(_,k)=>{const{onViewportChangeEnd:E,onMoveEnd:$}=v.getState();$==null||$(_,k),E==null||E(k)}});const{x:O,y:H,zoom:F}=R.current.getViewport();return v.setState({panZoom:R.current,transform:[O,H,F],domNode:M.current.closest(".react-flow")}),()=>{var _;(_=R.current)==null||_.destroy()}}},[]),m.useEffect(()=>{var O;(O=R.current)==null||O.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:I,preventScrolling:h,noPanClassName:w,userSelectionActive:P,noWheelClassName:g,lib:S,onTransformChange:A})},[e,t,n,r,o,i,s,a,I,h,w,P,g,S,A]),x.jsx("div",{className:"react-flow__renderer",ref:M,style:Nr,children:p})}const gv=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function yv(){const{userSelectionActive:e,userSelectionRect:t}=ue(gv,ge);return e&&t?x.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const eo=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},xv=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function vv({isSelecting:e,selectionKeyPressed:t,selectionMode:n=dn.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:h}){const p=pe(),{userSelectionActive:g,elementsSelectable:w,dragging:y}=ue(xv,ge),C=w&&(e||g),b=m.useRef(null),v=m.useRef(),M=m.useRef(new Set),P=m.useRef(new Set),S=m.useRef(!1),I=m.useRef(!1),R=E=>{if(S.current){S.current=!1;return}a==null||a(E),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},A=E=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){E.preventDefault();return}c==null||c(E)},O=l?E=>l(E):void 0,H=E=>{var z,V;const{resetSelectedElements:$,domNode:D}=p.getState();if(v.current=D==null?void 0:D.getBoundingClientRect(),!w||!e||E.button!==0||E.target!==b.current||!v.current)return;(V=(z=E.target)==null?void 0:z.setPointerCapture)==null||V.call(z,E.pointerId),I.current=!0,S.current=!1;const{x:T,y:j}=Ue(E.nativeEvent,v.current);$(),p.setState({userSelectionRect:{width:0,height:0,startX:T,startY:j,x:T,y:j}}),i==null||i(E)},F=E=>{const{userSelectionRect:$,transform:D,nodeLookup:T,edgeLookup:j,connectionLookup:z,triggerNodeChanges:V,triggerEdgeChanges:ee,defaultEdgeOptions:U}=p.getState();if(!v.current||!$)return;S.current=!0;const{x:Z,y:J}=Ue(E.nativeEvent,v.current),{startX:Y,startY:G}=$,ne={startX:Y,startY:G,x:Z<Y?Z:Y,y:J<G?J:G,width:Math.abs(Z-Y),height:Math.abs(J-G)},oe=M.current,se=P.current;M.current=new Set(nu(T,ne,D,n===dn.Partial,!0).map(le=>le.id)),P.current=new Set;const te=(U==null?void 0:U.selectable)??!0;for(const le of M.current){const he=z.get(le);if(he)for(const{edgeId:ye}of he.values()){const Se=j.get(ye);Se&&(Se.selectable??te)&&P.current.add(ye)}}if(!Zi(oe,M.current)){const le=St(T,M.current,!0);V(le)}if(!Zi(se,P.current)){const le=St(j,P.current);ee(le)}p.setState({userSelectionRect:ne,userSelectionActive:!0,nodesSelectionActive:!1})},_=E=>{var D,T;if(E.button!==0||!I.current)return;(T=(D=E.target)==null?void 0:D.releasePointerCapture)==null||T.call(D,E.pointerId);const{userSelectionRect:$}=p.getState();!g&&$&&E.target===b.current&&(R==null||R(E)),p.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:M.current.size>0}),s==null||s(E),(t||o)&&(S.current=!1),I.current=!1},k=r===!0||Array.isArray(r)&&r.includes(0);return x.jsxs("div",{className:xe(["react-flow__pane",{draggable:k,dragging:y,selection:e}]),onClick:C?void 0:eo(R,b),onContextMenu:eo(A,b),onWheel:eo(O,b),onPointerEnter:C?void 0:u,onPointerDown:C?H:d,onPointerMove:C?F:d,onPointerUp:C?_:void 0,onPointerLeave:f,ref:b,style:Nr,children:[h,x.jsx(yv,{})]})}function Do({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:c}=t.getState(),l=a.get(e);if(!l){c==null||c("012",Qe.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&s)&&(i({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):o([e])}function Ou({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:s}){const a=pe(),[c,l]=m.useState(!1),u=m.useRef();return m.useEffect(()=>{u.current=Qy({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{Do({id:d,store:a,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),m.useEffect(()=>{var d,f;if(t)(d=u.current)==null||d.destroy();else if(e.current)return(f=u.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:s}),()=>{var h;(h=u.current)==null||h.destroy()}},[n,r,t,i,e,o]),c}const wv=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Fu(){const e=pe();return m.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:i,nodesDraggable:s,onError:a,updateNodePositions:c,nodeLookup:l,nodeOrigin:u}=e.getState(),d=new Map,f=wv(s),h=o?i[0]:5,p=o?i[1]:5,g=n.direction.x*h*n.factor,w=n.direction.y*p*n.factor;for(const[,y]of l){if(!f(y))continue;let C={x:y.internals.positionAbsolute.x+g,y:y.internals.positionAbsolute.y+w};o&&(C=_r(C,i));const{position:b,positionAbsolute:v}=ru({nodeId:y.id,nextPosition:C,nodeLookup:l,nodeExtent:r,nodeOrigin:u,onError:a});y.position=b,y.internals.positionAbsolute=v,d.set(y.id,y)}c(d)},[])}const oi=m.createContext(null),bv=oi.Provider;oi.Consumer;const Hu=()=>m.useContext(oi),_v=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Cv=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:a,toHandle:c,isValid:l}=s,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:u,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:i===$t.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,valid:u&&l}};function Ev({type:e="source",position:t=Q.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},h){var _,k;const p=s||null,g=e==="target",w=pe(),y=Hu(),{connectOnClick:C,noPanClassName:b,rfId:v}=ue(_v,ge),{connectingFrom:M,connectingTo:P,clickConnecting:S,isPossibleEndHandle:I,connectionInProcess:R,valid:A}=ue(Cv(y,p,e),ge);y||(k=(_=w.getState()).onError)==null||k.call(_,"010",Qe.error010());const O=E=>{const{defaultEdgeOptions:$,onConnect:D,hasDefaultEdges:T}=w.getState(),j={...$,...E};if(T){const{edges:z,setEdges:V}=w.getState();V(Fy(j,z))}D==null||D(j),a==null||a(j)},H=E=>{if(!y)return;const $=du(E.nativeEvent);if(o&&($&&E.button===0||!$)){const D=w.getState();Ro.onPointerDown(E.nativeEvent,{autoPanOnConnect:D.autoPanOnConnect,connectionMode:D.connectionMode,connectionRadius:D.connectionRadius,domNode:D.domNode,nodeLookup:D.nodeLookup,lib:D.lib,isTarget:g,handleId:p,nodeId:y,flowId:D.rfId,panBy:D.panBy,cancelConnection:D.cancelConnection,onConnectStart:D.onConnectStart,onConnectEnd:D.onConnectEnd,updateConnection:D.updateConnection,onConnect:O,isValidConnection:n||D.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:D.autoPanSpeed})}$?u==null||u(E):d==null||d(E)},F=E=>{const{onClickConnectStart:$,onClickConnectEnd:D,connectionClickStartHandle:T,connectionMode:j,isValidConnection:z,lib:V,rfId:ee,nodeLookup:U,connection:Z}=w.getState();if(!y||!T&&!o)return;if(!T){$==null||$(E.nativeEvent,{nodeId:y,handleId:p,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:y,type:e,id:p}});return}const J=lu(E.target),Y=n||z,{connection:G,isValid:ne}=Ro.isValid(E.nativeEvent,{handle:{nodeId:y,id:p,type:e},connectionMode:j,fromNodeId:T.nodeId,fromHandleId:T.id||null,fromType:T.type,isValidConnection:Y,flowId:ee,doc:J,lib:V,nodeLookup:U});ne&&G&&O(G);const oe=structuredClone(Z);delete oe.inProgress,oe.toPosition=oe.toHandle?oe.toHandle.position:null,D==null||D(E,oe),w.setState({connectionClickStartHandle:null})};return x.jsx("div",{"data-handleid":p,"data-nodeid":y,"data-handlepos":t,"data-id":`${v}-${y}-${p}-${e}`,className:xe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,l,{source:!g,target:g,connectable:r,connectablestart:o,connectableend:i,clickconnecting:S,connectingfrom:M,connectingto:P,valid:A,connectionindicator:r&&(!R||I)&&(R?i:o)}]),onMouseDown:H,onTouchStart:H,onClick:C?F:void 0,ref:h,...f,children:c})}const $e=m.memo(ju(Ev));function Sv({data:e,isConnectable:t,sourcePosition:n=Q.Bottom}){return x.jsxs(x.Fragment,{children:[e==null?void 0:e.label,x.jsx($e,{type:"source",position:n,isConnectable:t})]})}function Mv({data:e,isConnectable:t,targetPosition:n=Q.Top,sourcePosition:r=Q.Bottom}){return x.jsxs(x.Fragment,{children:[x.jsx($e,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,x.jsx($e,{type:"source",position:r,isConnectable:t})]})}function Nv(){return null}function Tv({data:e,isConnectable:t,targetPosition:n=Q.Top}){return x.jsxs(x.Fragment,{children:[x.jsx($e,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const sr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},_s={input:Sv,default:Mv,output:Tv,group:Nv};function kv(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const Iv=e=>{const{width:t,height:n,x:r,y:o}=bn(e.nodeLookup,{filter:i=>!!i.selected});return{width:Pe(t)?t:null,height:Pe(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function Rv({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=pe(),{width:o,height:i,transformString:s,userSelectionActive:a}=ue(Iv,ge),c=Fu(),l=m.useRef(null);if(m.useEffect(()=>{var f;n||(f=l.current)==null||f.focus({preventScroll:!0})},[n]),Ou({nodeRef:l}),a||!o||!i)return null;const u=e?f=>{const h=r.getState().nodes.filter(p=>p.selected);e(f,h)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(sr,f.key)&&(f.preventDefault(),c({direction:sr[f.key],factor:f.shiftKey?4:1}))};return x.jsx("div",{className:xe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:x.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:o,height:i}})})}const Cs=typeof window<"u"?window:void 0,Dv=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function zu({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:d,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:p,panActivationKeyCode:g,zoomActivationKeyCode:w,elementsSelectable:y,zoomOnScroll:C,zoomOnPinch:b,panOnScroll:v,panOnScrollSpeed:M,panOnScrollMode:P,zoomOnDoubleClick:S,panOnDrag:I,defaultViewport:R,translateExtent:A,minZoom:O,maxZoom:H,preventScrolling:F,onSelectionContextMenu:_,noWheelClassName:k,noPanClassName:E,disableKeyboardA11y:$,onViewportChange:D,isControlledViewport:T}){const{nodesSelectionActive:j,userSelectionActive:z}=ue(Dv),V=mn(l,{target:Cs}),ee=mn(g,{target:Cs}),U=ee||I,Z=ee||v,J=u&&U!==!0,Y=V||z||J;return fv({deleteKeyCode:c,multiSelectionKeyCode:p}),x.jsx(pv,{onPaneContextMenu:i,elementsSelectable:y,zoomOnScroll:C,zoomOnPinch:b,panOnScroll:Z,panOnScrollSpeed:M,panOnScrollMode:P,zoomOnDoubleClick:S,panOnDrag:!V&&U,defaultViewport:R,translateExtent:A,minZoom:O,maxZoom:H,zoomActivationKeyCode:w,preventScrolling:F,noWheelClassName:k,noPanClassName:E,onViewportChange:D,isControlledViewport:T,paneClickDistance:a,children:x.jsxs(vv,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:U,isSelecting:!!Y,selectionMode:d,selectionKeyPressed:V,selectionOnDrag:J,children:[e,j&&x.jsx(Rv,{onSelectionContextMenu:_,noPanClassName:E,disableKeyboardA11y:$})]})})}zu.displayName="FlowRenderer";const Av=m.memo(zu),Pv=e=>t=>e?nu(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function $v(e){return ue(m.useCallback(Pv(e),[e]),ge)}const jv=e=>e.updateNodeInternals;function Lv(){const e=ue(jv),[t]=m.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const i=o.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:o.target,force:!0})}),e(r)}));return m.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function Ov({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=pe(),i=m.useRef(null),s=m.useRef(null),a=m.useRef(e.sourcePosition),c=m.useRef(e.targetPosition),l=m.useRef(t),u=n&&!!e.internals.handleBounds;return m.useEffect(()=>{i.current&&!e.hidden&&(!u||s.current!==i.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(i.current),s.current=i.current)},[u,e.hidden]),m.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),m.useEffect(()=>{if(i.current){const d=l.current!==t,f=a.current!==e.sourcePosition,h=c.current!==e.targetPosition;(d||f||h)&&(l.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function Fv({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:s,nodesDraggable:a,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:p,rfId:g,nodeTypes:w,nodeExtent:y,nodeClickDistance:C,onError:b}){const{node:v,internals:M,isParent:P}=ue(G=>{const ne=G.nodeLookup.get(e),oe=G.parentLookup.has(e);return{node:ne,internals:ne.internals,isParent:oe}},ge);let S=v.type||"default",I=(w==null?void 0:w[S])||_s[S];I===void 0&&(b==null||b("003",Qe.error003(S)),S="default",I=_s.default);const R=!!(v.draggable||a&&typeof v.draggable>"u"),A=!!(v.selectable||c&&typeof v.selectable>"u"),O=!!(v.connectable||l&&typeof v.connectable>"u"),H=!!(v.focusable||u&&typeof v.focusable>"u"),F=pe(),_=cu(v),k=Ov({node:v,nodeType:S,hasDimensions:_,resizeObserver:d}),E=Ou({nodeRef:k,disabled:v.hidden||!R,noDragClassName:f,handleSelector:v.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:C}),$=Fu();if(v.hidden)return null;const D=Je(v),T=kv(v),j=A||R||t||n||r||o,z=n?G=>n(G,{...M.userNode}):void 0,V=r?G=>r(G,{...M.userNode}):void 0,ee=o?G=>o(G,{...M.userNode}):void 0,U=i?G=>i(G,{...M.userNode}):void 0,Z=s?G=>s(G,{...M.userNode}):void 0,J=G=>{const{selectNodesOnDrag:ne,nodeDragThreshold:oe}=F.getState();A&&(!ne||!R||oe>0)&&Do({id:e,store:F,nodeRef:k}),t&&t(G,{...M.userNode})},Y=G=>{if(!(No(G.nativeEvent)||p))if(Qc.includes(G.key)&&A){const ne=G.key==="Escape";Do({id:e,store:F,unselect:ne,nodeRef:k})}else R&&v.selected&&Object.prototype.hasOwnProperty.call(sr,G.key)&&(G.preventDefault(),F.setState({ariaLiveMessage:`Moved selected node ${G.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~M.positionAbsolute.x}, y: ${~~M.positionAbsolute.y}`}),$({direction:sr[G.key],factor:G.shiftKey?4:1}))};return x.jsx("div",{className:xe(["react-flow__node",`react-flow__node-${S}`,{[h]:R},v.className,{selected:v.selected,selectable:A,parent:P,draggable:R,dragging:E}]),ref:k,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:j?"all":"none",visibility:_?"visible":"hidden",...v.style,...T},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:V,onMouseLeave:ee,onContextMenu:U,onClick:J,onDoubleClick:Z,onKeyDown:H?Y:void 0,tabIndex:H?0:void 0,role:H?"button":void 0,"aria-describedby":p?void 0:`${Iu}-${g}`,"aria-label":v.ariaLabel,children:x.jsx(bv,{value:e,children:x.jsx(I,{id:e,data:v.data,type:S,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:v.selected??!1,selectable:A,draggable:R,deletable:v.deletable??!0,isConnectable:O,sourcePosition:v.sourcePosition,targetPosition:v.targetPosition,dragging:E,dragHandle:v.dragHandle,zIndex:M.z,parentId:v.parentId,...D})})})}const Hv=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Bu(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=ue(Hv,ge),s=$v(e.onlyRenderVisibleElements),a=Lv();return x.jsx("div",{className:"react-flow__nodes",style:Nr,children:s.map(c=>x.jsx(Fv,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},c))})}Bu.displayName="NodeRenderer";const zv=m.memo(Bu);function Bv(e){return ue(m.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const i=n.nodeLookup.get(o.source),s=n.nodeLookup.get(o.target);i&&s&&jy({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),ge)}const Vv=({color:e="none",strokeWidth:t=1})=>x.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Xv=({color:e="none",strokeWidth:t=1})=>x.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Es={[rr.Arrow]:Vv,[rr.ArrowClosed]:Xv};function Yv(e){const t=pe();return m.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(Es,e)?Es[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Qe.error009(e)),null)},[e])}const Gv=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=Yv(t);return c?x.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:x.jsx(c,{color:n,strokeWidth:s})}):null},Vu=({defaultColor:e,rfId:t})=>{const n=ue(i=>i.edges),r=ue(i=>i.defaultEdgeOptions),o=m.useMemo(()=>Xy(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?x.jsx("svg",{className:"react-flow__marker",children:x.jsx("defs",{children:o.map(i=>x.jsx(Gv,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};Vu.displayName="MarkerDefinitions";var Wv=m.memo(Vu);function Xu({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:l,...u}){const[d,f]=m.useState({x:1,y:0,width:0,height:0}),h=xe(["react-flow__edge-textwrapper",l]),p=m.useRef(null);return m.useEffect(()=>{if(p.current){const g=p.current.getBBox();f({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:x.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...u,children:[o&&x.jsx("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),x.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:p,style:r,children:n}),c]})}Xu.displayName="EdgeText";const Uv=m.memo(Xu);function Tr({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:l=20,...u}){return x.jsxs(x.Fragment,{children:[x.jsx("path",{...u,d:e,fill:"none",className:xe(["react-flow__edge-path",u.className])}),l&&x.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:l,className:"react-flow__edge-interaction"}),r&&Pe(t)&&Pe(n)?x.jsx(Uv,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function Ss({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Q.Left||e===Q.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Yu({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:r,targetY:o,targetPosition:i=Q.Top}){const[s,a]=Ss({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,l]=Ss({pos:i,x1:r,y1:o,x2:e,y2:t}),[u,d,f,h]=fu({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:l});return[`M${e},${t} C${s},${a} ${c},${l} ${r},${o}`,u,d,f,h]}function Gu(e){return m.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=Q.Bottom,targetPosition:a=Q.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:y})=>{const[C,b,v]=Yu({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a}),M=e.isInternal?void 0:t;return x.jsx(Tr,{id:M,path:C,labelX:b,labelY:v,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:y})})}const Kv=Gu({isInternal:!1}),Wu=Gu({isInternal:!0});Kv.displayName="SimpleBezierEdge";Wu.displayName="SimpleBezierEdgeInternal";function Uu(e){return m.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:h=Q.Bottom,targetPosition:p=Q.Top,markerEnd:g,markerStart:w,pathOptions:y,interactionWidth:C})=>{const[b,v,M]=To({sourceX:n,sourceY:r,sourcePosition:h,targetX:o,targetY:i,targetPosition:p,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset}),P=e.isInternal?void 0:t;return x.jsx(Tr,{id:P,path:b,labelX:v,labelY:M,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:w,interactionWidth:C})})}const Ku=Uu({isInternal:!1}),qu=Uu({isInternal:!0});Ku.displayName="SmoothStepEdge";qu.displayName="SmoothStepEdgeInternal";function Zu(e){return m.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return x.jsx(Ku,{...n,id:r,pathOptions:m.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const qv=Zu({isInternal:!1}),Qu=Zu({isInternal:!0});qv.displayName="StepEdge";Qu.displayName="StepEdgeInternal";function Ju(e){return m.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[w,y,C]=pu({sourceX:n,sourceY:r,targetX:o,targetY:i}),b=e.isInternal?void 0:t;return x.jsx(Tr,{id:b,path:w,labelX:y,labelY:C,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})})}const Zv=Ju({isInternal:!1}),el=Ju({isInternal:!0});Zv.displayName="StraightEdge";el.displayName="StraightEdgeInternal";function tl(e){return m.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=Q.Bottom,targetPosition:a=Q.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,pathOptions:y,interactionWidth:C})=>{const[b,v,M]=hu({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a,curvature:y==null?void 0:y.curvature}),P=e.isInternal?void 0:t;return x.jsx(Tr,{id:P,path:b,labelX:v,labelY:M,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:C})})}const Qv=tl({isInternal:!1}),nl=tl({isInternal:!0});Qv.displayName="BezierEdge";nl.displayName="BezierEdgeInternal";const Ms={default:nl,straight:el,step:Qu,smoothstep:qu,simplebezier:Wu},Ns={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Jv=(e,t,n)=>n===Q.Left?e-t:n===Q.Right?e+t:e,ew=(e,t,n)=>n===Q.Top?e-t:n===Q.Bottom?e+t:e,Ts="react-flow__edgeupdater";function ks({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:a}){return x.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:xe([Ts,`${Ts}-${a}`]),cx:Jv(t,r,e),cy:ew(n,r,e),r,stroke:"transparent",fill:"transparent"})}function tw({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:d,setReconnecting:f,setUpdateHover:h}){const p=pe(),g=(v,M)=>{if(v.button!==0)return;const{autoPanOnConnect:P,domNode:S,isValidConnection:I,connectionMode:R,connectionRadius:A,lib:O,onConnectStart:H,onConnectEnd:F,cancelConnection:_,nodeLookup:k,rfId:E,panBy:$,updateConnection:D}=p.getState(),T=M.type==="target";f(!0),u==null||u(v,n,M.type);const j=(V,ee)=>{f(!1),d==null||d(V,n,M.type,ee)},z=V=>l==null?void 0:l(n,V);Ro.onPointerDown(v.nativeEvent,{autoPanOnConnect:P,connectionMode:R,connectionRadius:A,domNode:S,handleId:M.id,nodeId:M.nodeId,nodeLookup:k,isTarget:T,edgeUpdaterType:M.type,lib:O,flowId:E,cancelConnection:_,panBy:$,isValidConnection:I,onConnect:z,onConnectStart:H,onConnectEnd:F,onReconnectEnd:j,updateConnection:D,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle})},w=v=>g(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),y=v=>g(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),C=()=>h(!0),b=()=>h(!1);return x.jsxs(x.Fragment,{children:[(e===!0||e==="source")&&x.jsx(ks,{position:a,centerX:r,centerY:o,radius:t,onMouseDown:w,onMouseEnter:C,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&x.jsx(ks,{position:c,centerX:i,centerY:s,radius:t,onMouseDown:y,onMouseEnter:C,onMouseOut:b,type:"target"})]})}function nw({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,rfId:p,edgeTypes:g,noPanClassName:w,onError:y,disableKeyboardA11y:C}){let b=ue(te=>te.edgeLookup.get(e));const v=ue(te=>te.defaultEdgeOptions);b=v?{...v,...b}:b;let M=b.type||"default",P=(g==null?void 0:g[M])||Ms[M];P===void 0&&(y==null||y("011",Qe.error011(M)),M="default",P=Ms.default);const S=!!(b.focusable||t&&typeof b.focusable>"u"),I=typeof d<"u"&&(b.reconnectable||n&&typeof b.reconnectable>"u"),R=!!(b.selectable||r&&typeof b.selectable>"u"),A=m.useRef(null),[O,H]=m.useState(!1),[F,_]=m.useState(!1),k=pe(),{zIndex:E,sourceX:$,sourceY:D,targetX:T,targetY:j,sourcePosition:z,targetPosition:V}=ue(m.useCallback(te=>{const le=te.nodeLookup.get(b.source),he=te.nodeLookup.get(b.target);if(!le||!he)return{zIndex:b.zIndex,...Ns};const ye=Vy({id:e,sourceNode:le,targetNode:he,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:te.connectionMode,onError:y});return{zIndex:$y({selected:b.selected,zIndex:b.zIndex,sourceNode:le,targetNode:he,elevateOnSelect:te.elevateEdgesOnSelect}),...ye||Ns}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),ge),ee=m.useMemo(()=>b.markerStart?`url('#${ko(b.markerStart,p)}')`:void 0,[b.markerStart,p]),U=m.useMemo(()=>b.markerEnd?`url('#${ko(b.markerEnd,p)}')`:void 0,[b.markerEnd,p]);if(b.hidden||$===null||D===null||T===null||j===null)return null;const Z=te=>{var Se;const{addSelectedEdges:le,unselectNodesAndEdges:he,multiSelectionActive:ye}=k.getState();R&&(k.setState({nodesSelectionActive:!1}),b.selected&&ye?(he({nodes:[],edges:[b]}),(Se=A.current)==null||Se.blur()):le([e])),o&&o(te,b)},J=i?te=>{i(te,{...b})}:void 0,Y=s?te=>{s(te,{...b})}:void 0,G=a?te=>{a(te,{...b})}:void 0,ne=c?te=>{c(te,{...b})}:void 0,oe=l?te=>{l(te,{...b})}:void 0,se=te=>{var le;if(!C&&Qc.includes(te.key)&&R){const{unselectNodesAndEdges:he,addSelectedEdges:ye}=k.getState();te.key==="Escape"?((le=A.current)==null||le.blur(),he({edges:[b]})):ye([e])}};return x.jsx("svg",{style:{zIndex:E},children:x.jsxs("g",{className:xe(["react-flow__edge",`react-flow__edge-${M}`,b.className,w,{selected:b.selected,animated:b.animated,inactive:!R&&!o,updating:O,selectable:R}]),onClick:Z,onDoubleClick:J,onContextMenu:Y,onMouseEnter:G,onMouseMove:ne,onMouseLeave:oe,onKeyDown:S?se:void 0,tabIndex:S?0:void 0,role:S?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":S?`${Ru}-${p}`:void 0,ref:A,children:[!F&&x.jsx(P,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:R,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:$,sourceY:D,targetX:T,targetY:j,sourcePosition:z,targetPosition:V,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:ee,markerEnd:U,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),I&&x.jsx(tw,{edge:b,isReconnectable:I,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,sourceX:$,sourceY:D,targetX:T,targetY:j,sourcePosition:z,targetPosition:V,setUpdateHover:H,setReconnecting:_})]})})}const rw=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function rl({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,disableKeyboardA11y:g}){const{edgesFocusable:w,edgesReconnectable:y,elementsSelectable:C,onError:b}=ue(rw,ge),v=Bv(t);return x.jsxs("div",{className:"react-flow__edges",children:[x.jsx(Wv,{defaultColor:e,rfId:n}),v.map(M=>x.jsx(nw,{id:M,edgesFocusable:w,edgesReconnectable:y,elementsSelectable:C,noPanClassName:o,onReconnect:i,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:d,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,rfId:n,onError:b,edgeTypes:r,disableKeyboardA11y:g},M))]})}rl.displayName="EdgeRenderer";const ow=m.memo(rl),iw=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function sw({children:e}){const t=ue(iw);return x.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function aw(e){const t=ri(),n=m.useRef(!1);m.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const cw=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function uw(e){const t=ue(cw),n=pe();return m.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function lw(e){return e.connection.inProgress?{...e.connection,to:_n(e.connection.to,e.transform)}:{...e.connection}}function dw(e){return lw}function ii(e){const t=dw();return ue(t,ge)}const fw=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function hw({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:s,isValid:a,inProgress:c}=ue(fw,ge);return!(i&&o&&c)?null:x.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:x.jsx("g",{className:xe(["react-flow__connection",eu(a)]),children:x.jsx(ol,{style:t,type:n,CustomComponent:r,isValid:a})})})}const ol=({style:e,type:t=ot.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:s,fromHandle:a,fromPosition:c,to:l,toNode:u,toHandle:d,toPosition:f}=ii();if(!o)return;if(n)return x.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:i.x,fromY:i.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:f,connectionStatus:eu(r),toNode:u,toHandle:d});let h="";const p={sourceX:i.x,sourceY:i.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:f};switch(t){case ot.Bezier:[h]=hu(p);break;case ot.SimpleBezier:[h]=Yu(p);break;case ot.Step:[h]=To({...p,borderRadius:0});break;case ot.SmoothStep:[h]=To(p);break;default:[h]=pu(p)}return x.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};ol.displayName="ConnectionLine";const mw={};function Is(e=mw){m.useRef(e),pe(),m.useEffect(()=>{},[e])}function pw(){pe(),m.useRef(!1),m.useEffect(()=>{},[])}function il({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:h,connectionLineType:p,connectionLineStyle:g,connectionLineComponent:w,connectionLineContainerStyle:y,selectionKeyCode:C,selectionOnDrag:b,selectionMode:v,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:S,deleteKeyCode:I,onlyRenderVisibleElements:R,elementsSelectable:A,defaultViewport:O,translateExtent:H,minZoom:F,maxZoom:_,preventScrolling:k,defaultMarkerColor:E,zoomOnScroll:$,zoomOnPinch:D,panOnScroll:T,panOnScrollSpeed:j,panOnScrollMode:z,zoomOnDoubleClick:V,panOnDrag:ee,onPaneClick:U,onPaneMouseEnter:Z,onPaneMouseMove:J,onPaneMouseLeave:Y,onPaneScroll:G,onPaneContextMenu:ne,paneClickDistance:oe,nodeClickDistance:se,onEdgeContextMenu:te,onEdgeMouseEnter:le,onEdgeMouseMove:he,onEdgeMouseLeave:ye,reconnectRadius:Se,onReconnect:He,onReconnectStart:at,onReconnectEnd:Ft,noDragClassName:ct,noWheelClassName:Ht,noPanClassName:ze,disableKeyboardA11y:Be,nodeExtent:zt,rfId:Ve,viewport:Xe,onViewportChange:vt}){return Is(e),Is(t),pw(),aw(n),uw(Xe),x.jsx(Av,{onPaneClick:U,onPaneMouseEnter:Z,onPaneMouseMove:J,onPaneMouseLeave:Y,onPaneContextMenu:ne,onPaneScroll:G,paneClickDistance:oe,deleteKeyCode:I,selectionKeyCode:C,selectionOnDrag:b,selectionMode:v,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:S,elementsSelectable:A,zoomOnScroll:$,zoomOnPinch:D,zoomOnDoubleClick:V,panOnScroll:T,panOnScrollSpeed:j,panOnScrollMode:z,panOnDrag:ee,defaultViewport:O,translateExtent:H,minZoom:F,maxZoom:_,onSelectionContextMenu:d,preventScrolling:k,noDragClassName:ct,noWheelClassName:Ht,noPanClassName:ze,disableKeyboardA11y:Be,onViewportChange:vt,isControlledViewport:!!Xe,children:x.jsxs(sw,{children:[x.jsx(ow,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:He,onReconnectStart:at,onReconnectEnd:Ft,onlyRenderVisibleElements:R,onEdgeContextMenu:te,onEdgeMouseEnter:le,onEdgeMouseMove:he,onEdgeMouseLeave:ye,reconnectRadius:Se,defaultMarkerColor:E,noPanClassName:ze,disableKeyboardA11y:Be,rfId:Ve}),x.jsx(hw,{style:g,type:p,component:w,containerStyle:y}),x.jsx("div",{className:"react-flow__edgelabel-renderer"}),x.jsx(zv,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:se,onlyRenderVisibleElements:R,noPanClassName:ze,noDragClassName:ct,disableKeyboardA11y:Be,nodeExtent:zt,rfId:Ve}),x.jsx("div",{className:"react-flow__viewport-portal"})]})})}il.displayName="GraphView";const gw=m.memo(il),Rs=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c}={})=>{const l=new Map,u=new Map,d=new Map,f=new Map,h=r??t??[],p=n??e??[],g=a??[0,0],w=c??ln;yu(d,f,h),Io(p,l,u,{nodeOrigin:g,nodeExtent:w,elevateNodesOnSelect:!1});let y=[0,0,1];if(s&&o&&i){const C=bn(l,{filter:P=>!!((P.width||P.initialWidth)&&(P.height||P.initialHeight))}),{x:b,y:v,zoom:M}=Zo(C,o,i,.5,2,.1);y=[b,v,M]}return{rfId:"1",width:0,height:0,transform:y,nodes:p,nodeLookup:l,parentLookup:u,edges:h,edgeLookup:f,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:ln,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:$t.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:g,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Jc},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Ay,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},yw=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c})=>Lx((l,u)=>({...Rs({nodes:e,edges:t,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:d=>{const{nodeLookup:f,parentLookup:h,nodeOrigin:p,elevateNodesOnSelect:g}=u();Io(d,f,h,{nodeOrigin:p,nodeExtent:c,elevateNodesOnSelect:g,checkEquality:!0}),l({nodes:d})},setEdges:d=>{const{connectionLookup:f,edgeLookup:h}=u();yu(f,h,d),l({edges:d})},setDefaultNodesAndEdges:(d,f)=>{if(d){const{setNodes:h}=u();h(d),l({hasDefaultNodes:!0})}if(f){const{setEdges:h}=u();h(f),l({hasDefaultEdges:!0})}},updateNodeInternals:(d,f={triggerFitView:!0})=>{const{triggerNodeChanges:h,nodeLookup:p,parentLookup:g,fitViewOnInit:w,fitViewDone:y,fitViewOnInitOptions:C,domNode:b,nodeOrigin:v,nodeExtent:M,debug:P,fitViewSync:S}=u(),{changes:I,updatedInternals:R}=Ky(d,p,g,b,v,M);if(R){if(Gy(p,g,{nodeOrigin:v,nodeExtent:M}),f.triggerFitView){let A=y;!y&&w&&(A=S({...C,nodes:C==null?void 0:C.nodes})),l({fitViewDone:A})}else l({});(I==null?void 0:I.length)>0&&(P&&console.log("React Flow: trigger node changes",I),h==null||h(I))}},updateNodePositions:(d,f=!1)=>{const h=[],p=[];for(const[g,w]of d){const y=!!(w!=null&&w.expandParent&&(w!=null&&w.parentId)&&(w!=null&&w.position)),C={id:g,type:"position",position:y?{x:Math.max(0,w.position.x),y:Math.max(0,w.position.y)}:w.position,dragging:f};y&&h.push({id:g,parentId:w.parentId,rect:{...w.internals.positionAbsolute,width:w.measured.width,height:w.measured.height}}),p.push(C)}if(h.length>0){const{nodeLookup:g,parentLookup:w,nodeOrigin:y}=u(),C=ti(h,g,w,y);p.push(...C)}u().triggerNodeChanges(p)},triggerNodeChanges:d=>{const{onNodesChange:f,setNodes:h,nodes:p,hasDefaultNodes:g,debug:w}=u();if(d!=null&&d.length){if(g){const y=Pu(d,p);h(y)}w&&console.log("React Flow: trigger node changes",d),f==null||f(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:f,setEdges:h,edges:p,hasDefaultEdges:g,debug:w}=u();if(d!=null&&d.length){if(g){const y=$u(d,p);h(y)}w&&console.log("React Flow: trigger edge changes",d),f==null||f(d)}},addSelectedNodes:d=>{const{multiSelectionActive:f,edgeLookup:h,nodeLookup:p,triggerNodeChanges:g,triggerEdgeChanges:w}=u();if(f){const y=d.map(C=>lt(C,!0));g(y);return}g(St(p,new Set([...d]),!0)),w(St(h))},addSelectedEdges:d=>{const{multiSelectionActive:f,edgeLookup:h,nodeLookup:p,triggerNodeChanges:g,triggerEdgeChanges:w}=u();if(f){const y=d.map(C=>lt(C,!0));w(y);return}w(St(h,new Set([...d]))),g(St(p,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:f}={})=>{const{edges:h,nodes:p,nodeLookup:g,triggerNodeChanges:w,triggerEdgeChanges:y}=u(),C=d||p,b=f||h,v=C.map(P=>{const S=g.get(P.id);return S&&(S.selected=!1),lt(P.id,!1)}),M=b.map(P=>lt(P.id,!1));w(v),y(M)},setMinZoom:d=>{const{panZoom:f,maxZoom:h}=u();f==null||f.setScaleExtent([d,h]),l({minZoom:d})},setMaxZoom:d=>{const{panZoom:f,minZoom:h}=u();f==null||f.setScaleExtent([h,d]),l({maxZoom:d})},setTranslateExtent:d=>{var f;(f=u().panZoom)==null||f.setTranslateExtent(d),l({translateExtent:d})},setPaneClickDistance:d=>{var f;(f=u().panZoom)==null||f.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:f,triggerNodeChanges:h,triggerEdgeChanges:p}=u(),g=f.reduce((y,C)=>C.selected?[...y,lt(C.id,!1)]:y,[]),w=d.reduce((y,C)=>C.selected?[...y,lt(C.id,!1)]:y,[]);h(g),p(w)},setNodeExtent:d=>{const{nodes:f,nodeLookup:h,parentLookup:p,nodeOrigin:g,elevateNodesOnSelect:w,nodeExtent:y}=u();d[0][0]===y[0][0]&&d[0][1]===y[0][1]&&d[1][0]===y[1][0]&&d[1][1]===y[1][1]||(Io(f,h,p,{nodeOrigin:g,nodeExtent:d,elevateNodesOnSelect:w,checkEquality:!1}),l({nodeExtent:d}))},panBy:d=>{const{transform:f,width:h,height:p,panZoom:g,translateExtent:w}=u();return qy({delta:d,panZoom:g,transform:f,translateExtent:w,width:h,height:p})},fitView:d=>{const{panZoom:f,width:h,height:p,minZoom:g,maxZoom:w,nodeLookup:y}=u();if(!f)return Promise.resolve(!1);const C=Eo(y,d);return So({nodes:C,width:h,height:p,panZoom:f,minZoom:g,maxZoom:w},d)},fitViewSync:d=>{const{panZoom:f,width:h,height:p,minZoom:g,maxZoom:w,nodeLookup:y}=u();if(!f)return!1;const C=Eo(y,d);return So({nodes:C,width:h,height:p,panZoom:f,minZoom:g,maxZoom:w},d),C.size>0},cancelConnection:()=>{l({connection:{...Jc}})},updateConnection:d=>{l({connection:d})},reset:()=>l({...Rs()})}),Object.is);function xw({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,fitView:s,nodeOrigin:a,nodeExtent:c,children:l}){const[u]=m.useState(()=>yw({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c}));return x.jsx(Ox,{value:u,children:x.jsx(av,{children:l})})}function vw({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:s,fitView:a,nodeOrigin:c,nodeExtent:l}){return m.useContext(Mr)?x.jsx(x.Fragment,{children:e}):x.jsx(xw,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:s,fitView:a,nodeOrigin:c,nodeExtent:l,children:e})}const ww={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function bw({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:s,onNodeClick:a,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:w,onClickConnectEnd:y,onNodeMouseEnter:C,onNodeMouseMove:b,onNodeMouseLeave:v,onNodeContextMenu:M,onNodeDoubleClick:P,onNodeDragStart:S,onNodeDrag:I,onNodeDragStop:R,onNodesDelete:A,onEdgesDelete:O,onDelete:H,onSelectionChange:F,onSelectionDragStart:_,onSelectionDrag:k,onSelectionDragStop:E,onSelectionContextMenu:$,onSelectionStart:D,onSelectionEnd:T,onBeforeDelete:j,connectionMode:z,connectionLineType:V=ot.Bezier,connectionLineStyle:ee,connectionLineComponent:U,connectionLineContainerStyle:Z,deleteKeyCode:J="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:G=!1,selectionMode:ne=dn.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:se=ir()?"Meta":"Control",zoomActivationKeyCode:te=ir()?"Meta":"Control",snapToGrid:le,snapGrid:he,onlyRenderVisibleElements:ye=!1,selectNodesOnDrag:Se,nodesDraggable:He,nodesConnectable:at,nodesFocusable:Ft,nodeOrigin:ct=Du,edgesFocusable:Ht,edgesReconnectable:ze,elementsSelectable:Be=!0,defaultViewport:zt=Zx,minZoom:Ve=.5,maxZoom:Xe=2,translateExtent:vt=ln,preventScrolling:kr=!0,nodeExtent:ut,defaultMarkerColor:Bt="#b1b1b7",zoomOnScroll:Ir=!0,zoomOnPinch:Vt=!0,panOnScroll:Xt=!1,panOnScrollSpeed:Rr=.5,panOnScrollMode:Dr=mt.Free,zoomOnDoubleClick:Yt=!0,panOnDrag:Ar=!0,onPaneClick:N,onPaneMouseEnter:L,onPaneMouseMove:W,onPaneMouseLeave:X,onPaneScroll:K,onPaneContextMenu:re,paneClickDistance:q=0,nodeClickDistance:ce=0,children:ae,onReconnect:ve,onReconnectStart:fe,onReconnectEnd:we,onEdgeContextMenu:Re,onEdgeDoubleClick:wt,onEdgeMouseEnter:Pr,onEdgeMouseMove:Ol,onEdgeMouseLeave:Fl,reconnectRadius:Hl=10,onNodesChange:zl,onEdgesChange:Bl,noDragClassName:Vl="nodrag",noWheelClassName:Xl="nowheel",noPanClassName:ai="nopan",fitView:ci,fitViewOptions:Yl,connectOnClick:Gl,attributionPosition:Wl,proOptions:Ul,defaultEdgeOptions:Kl,elevateNodesOnSelect:ql,elevateEdgesOnSelect:Zl,disableKeyboardA11y:ui=!1,autoPanOnConnect:Ql,autoPanOnNodeDrag:Jl,autoPanSpeed:ed,connectionRadius:td,isValidConnection:nd,onError:rd,style:od,id:li,nodeDragThreshold:id,viewport:sd,onViewportChange:ad,width:cd,height:ud,colorMode:ld="light",debug:dd,...fd},hd){const $r=li||"1",md=tv(ld);return x.jsx("div",{"data-testid":"rf__wrapper",...fd,style:{...od,...ww},ref:hd,className:xe(["react-flow",o,md]),id:li,children:x.jsxs(vw,{nodes:e,edges:t,width:cd,height:ud,fitView:ci,nodeOrigin:ct,nodeExtent:ut,children:[x.jsx(gw,{onInit:l,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:C,onNodeMouseMove:b,onNodeMouseLeave:v,onNodeContextMenu:M,onNodeDoubleClick:P,nodeTypes:i,edgeTypes:s,connectionLineType:V,connectionLineStyle:ee,connectionLineComponent:U,connectionLineContainerStyle:Z,selectionKeyCode:Y,selectionOnDrag:G,selectionMode:ne,deleteKeyCode:J,multiSelectionKeyCode:se,panActivationKeyCode:oe,zoomActivationKeyCode:te,onlyRenderVisibleElements:ye,defaultViewport:zt,translateExtent:vt,minZoom:Ve,maxZoom:Xe,preventScrolling:kr,zoomOnScroll:Ir,zoomOnPinch:Vt,zoomOnDoubleClick:Yt,panOnScroll:Xt,panOnScrollSpeed:Rr,panOnScrollMode:Dr,panOnDrag:Ar,onPaneClick:N,onPaneMouseEnter:L,onPaneMouseMove:W,onPaneMouseLeave:X,onPaneScroll:K,onPaneContextMenu:re,paneClickDistance:q,nodeClickDistance:ce,onSelectionContextMenu:$,onSelectionStart:D,onSelectionEnd:T,onReconnect:ve,onReconnectStart:fe,onReconnectEnd:we,onEdgeContextMenu:Re,onEdgeDoubleClick:wt,onEdgeMouseEnter:Pr,onEdgeMouseMove:Ol,onEdgeMouseLeave:Fl,reconnectRadius:Hl,defaultMarkerColor:Bt,noDragClassName:Vl,noWheelClassName:Xl,noPanClassName:ai,rfId:$r,disableKeyboardA11y:ui,nodeExtent:ut,viewport:sd,onViewportChange:ad}),x.jsx(ev,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:w,onClickConnectEnd:y,nodesDraggable:He,nodesConnectable:at,nodesFocusable:Ft,edgesFocusable:Ht,edgesReconnectable:ze,elementsSelectable:Be,elevateNodesOnSelect:ql,elevateEdgesOnSelect:Zl,minZoom:Ve,maxZoom:Xe,nodeExtent:ut,onNodesChange:zl,onEdgesChange:Bl,snapToGrid:le,snapGrid:he,connectionMode:z,translateExtent:vt,connectOnClick:Gl,defaultEdgeOptions:Kl,fitView:ci,fitViewOptions:Yl,onNodesDelete:A,onEdgesDelete:O,onDelete:H,onNodeDragStart:S,onNodeDrag:I,onNodeDragStop:R,onSelectionDrag:k,onSelectionDragStart:_,onSelectionDragStop:E,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:ai,nodeOrigin:ct,rfId:$r,autoPanOnConnect:Ql,autoPanOnNodeDrag:Jl,autoPanSpeed:ed,onError:rd,connectionRadius:td,isValidConnection:nd,selectNodesOnDrag:Se,nodeDragThreshold:id,onBeforeDelete:j,paneClickDistance:q,debug:dd}),x.jsx(qx,{onSelectionChange:F}),ae,x.jsx(Yx,{proOptions:Ul,position:Wl}),x.jsx(Vx,{rfId:$r,disableKeyboardA11y:ui})]})})}var ab=ju(bw);function sl(){const e=pe();return m.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),o=Array.isArray(t)?t:[t],i=new Map;o.forEach(s=>{const a=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${s}"]`);a&&i.set(s,{id:s,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(i,{triggerFitView:!1}))},[])}const _w=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function cb(){return ue(_w,ge)}function ub(e){const[t,n]=m.useState(e),r=m.useCallback(o=>n(i=>Pu(o,i)),[]);return[t,n,r]}function lb(e){const[t,n]=m.useState(e),r=m.useCallback(o=>n(i=>$u(o,i)),[]);return[t,n,r]}function db({onStart:e,onChange:t,onEnd:n}){const r=pe();m.useEffect(()=>{r.setState({onViewportChangeStart:e})},[e]),m.useEffect(()=>{r.setState({onViewportChange:t})},[t]),m.useEffect(()=>{r.setState({onViewportChangeEnd:n})},[n])}function Cw({dimensions:e,lineWidth:t,variant:n,className:r}){return x.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:xe(["react-flow__background-pattern",n,r])})}function Ew({radius:e,className:t}){return x.jsx("circle",{cx:e,cy:e,r:e,className:xe(["react-flow__background-pattern","dots",t])})}var it;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(it||(it={}));const Sw={[it.Dots]:1,[it.Lines]:1,[it.Cross]:6},Mw=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function al({id:e,variant:t=it.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:s,bgColor:a,style:c,className:l,patternClassName:u}){const d=m.useRef(null),{transform:f,patternId:h}=ue(Mw,ge),p=r||Sw[t],g=t===it.Dots,w=t===it.Cross,y=Array.isArray(n)?n:[n,n],C=[y[0]*f[2]||1,y[1]*f[2]||1],b=p*f[2],v=Array.isArray(i)?i:[i,i],M=w?[b,b]:C,P=[v[0]*f[2]||1+M[0]/2,v[1]*f[2]||1+M[1]/2],S=`${h}${e||""}`;return x.jsxs("svg",{className:xe(["react-flow__background",l]),style:{...c,...Nr,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:d,"data-testid":"rf__background",children:[x.jsx("pattern",{id:S,x:f[0]%C[0],y:f[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${P[0]},-${P[1]})`,children:g?x.jsx(Ew,{radius:b/2,className:u}):x.jsx(Cw,{dimensions:M,lineWidth:o,variant:t,className:u})}),x.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}al.displayName="Background";const fb=m.memo(al);function Nw(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:x.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Tw(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:x.jsx("path",{d:"M0 0h32v4.2H0z"})})}function kw(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:x.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Iw(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:x.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Rw(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:x.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function $n({children:e,className:t,...n}){return x.jsx("button",{type:"button",className:xe(["react-flow__controls-button",t]),...n,children:e})}const Dw=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function cl({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:l,children:u,position:d="bottom-left",orientation:f="vertical","aria-label":h="React Flow controls"}){const p=pe(),{isInteractive:g,minZoomReached:w,maxZoomReached:y}=ue(Dw,ge),{zoomIn:C,zoomOut:b,fitView:v}=ri(),M=()=>{C(),i==null||i()},P=()=>{b(),s==null||s()},S=()=>{v(o),a==null||a()},I=()=>{p.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),c==null||c(!g)},R=f==="horizontal"?"horizontal":"vertical";return x.jsxs(ni,{className:xe(["react-flow__controls",R,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":h,children:[t&&x.jsxs(x.Fragment,{children:[x.jsx($n,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y,children:x.jsx(Nw,{})}),x.jsx($n,{onClick:P,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:x.jsx(Tw,{})})]}),n&&x.jsx($n,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view",children:x.jsx(kw,{})}),r&&x.jsx($n,{className:"react-flow__controls-interactive",onClick:I,title:"toggle interactivity","aria-label":"toggle interactivity",children:g?x.jsx(Rw,{}):x.jsx(Iw,{})}),u]})}cl.displayName="Controls";const hb=m.memo(cl);function Aw({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:a,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:f,onClick:h}){const{background:p,backgroundColor:g}=i||{},w=s||p||g;return x.jsx("rect",{className:xe(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:u,ry:u,width:r,height:o,style:{fill:w,stroke:a,strokeWidth:c},shapeRendering:d,onClick:h?y=>h(y,e):void 0})}const Pw=m.memo(Aw),$w=e=>e.nodes.map(t=>t.id),to=e=>e instanceof Function?e:()=>e;function jw({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=Pw,onClick:s}){const a=ue($w,ge),c=to(t),l=to(e),u=to(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return x.jsx(x.Fragment,{children:a.map(f=>x.jsx(Ow,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:s,shapeRendering:d},f))})}function Lw({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:a,onClick:c}){const{node:l,x:u,y:d,width:f,height:h}=ue(p=>{const g=p.nodeLookup.get(e),{x:w,y}=g.internals.positionAbsolute,{width:C,height:b}=Je(g);return{node:g,x:w,y,width:C,height:b}},ge);return!l||l.hidden||!cu(l)?null:x.jsx(a,{x:u,y:d,width:f,height:h,style:l.style,selected:!!l.selected,className:r(l),color:t(l),borderRadius:o,strokeColor:n(l),strokeWidth:i,shapeRendering:s,onClick:c,id:l.id})}const Ow=m.memo(Lw);var Fw=m.memo(jw);const Hw=200,zw=150,Bw=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?su(bn(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},Vw="react-flow__minimap-desc";function ul({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:h,onNodeClick:p,pannable:g=!1,zoomable:w=!1,ariaLabel:y="React Flow mini map",inversePan:C,zoomStep:b=10,offsetScale:v=5}){const M=pe(),P=m.useRef(null),{boundingRect:S,viewBB:I,rfId:R,panZoom:A,translateExtent:O,flowWidth:H,flowHeight:F}=ue(Bw,ge),_=(e==null?void 0:e.width)??Hw,k=(e==null?void 0:e.height)??zw,E=S.width/_,$=S.height/k,D=Math.max(E,$),T=D*_,j=D*k,z=v*D,V=S.x-(T-S.width)/2-z,ee=S.y-(j-S.height)/2-z,U=T+z*2,Z=j+z*2,J=`${Vw}-${R}`,Y=m.useRef(0),G=m.useRef();Y.current=D,m.useEffect(()=>{if(P.current&&A)return G.current=ox({domNode:P.current,panZoom:A,getTransform:()=>M.getState().transform,getViewScale:()=>Y.current}),()=>{var se;(se=G.current)==null||se.destroy()}},[A]),m.useEffect(()=>{var se;(se=G.current)==null||se.update({translateExtent:O,width:H,height:F,inversePan:C,pannable:g,zoomStep:b,zoomable:w})},[g,w,C,b,O,H,F]);const ne=h?se=>{var he;const[te,le]=((he=G.current)==null?void 0:he.pointer(se))||[0,0];h(se,{x:te,y:le})}:void 0,oe=p?m.useCallback((se,te)=>{const le=M.getState().nodeLookup.get(te);p(se,le)},[]):void 0;return x.jsx(ni,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*D:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:xe(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:x.jsxs("svg",{width:_,height:k,viewBox:`${V} ${ee} ${U} ${Z}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":J,ref:P,onClick:ne,children:[y&&x.jsx("title",{id:J,children:y}),x.jsx(Fw,{onClick:oe,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:a}),x.jsx("path",{className:"react-flow__minimap-mask",d:`M${V-z},${ee-z}h${U+z*2}v${Z+z*2}h${-U-z*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ul.displayName="MiniMap";const mb=m.memo(ul);function Xw({nodeId:e,position:t,variant:n=It.Handle,className:r,style:o={},children:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:h,onResize:p,onResizeEnd:g}){const w=Hu(),y=typeof e=="string"?e:w,C=pe(),b=m.useRef(null),v=n===It.Line?"right":"bottom-right",M=t??v,P=m.useRef(null);m.useEffect(()=>{if(!(!b.current||!y))return P.current||(P.current=bx({domNode:b.current,nodeId:y,getStoreItems:()=>{const{nodeLookup:A,transform:O,snapGrid:H,snapToGrid:F,nodeOrigin:_,domNode:k}=C.getState();return{nodeLookup:A,transform:O,snapGrid:H,snapToGrid:F,nodeOrigin:_,paneDomNode:k}},onChange:(A,O)=>{const{triggerNodeChanges:H,nodeLookup:F,parentLookup:_,nodeOrigin:k}=C.getState(),E=[],$={x:A.x,y:A.y},D=F.get(y);if(D&&D.expandParent&&D.parentId){const T=D.origin??k,j=A.width??D.measured.width,z=A.height??D.measured.height,V={id:D.id,parentId:D.parentId,rect:{width:j,height:z,...uu({x:A.x??D.position.x,y:A.y??D.position.y},{width:j,height:z},D.parentId,F,T)}},ee=ti([V],F,_,k);E.push(...ee),$.x=A.x?Math.max(T[0]*j,A.x):void 0,$.y=A.y?Math.max(T[1]*z,A.y):void 0}if($.x!==void 0&&$.y!==void 0){const T={id:y,type:"position",position:{...$}};E.push(T)}if(A.width!==void 0&&A.height!==void 0){const T={id:y,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:A.width,height:A.height}};E.push(T)}for(const T of O){const j={...T,type:"position"};E.push(j)}H(E)},onEnd:()=>{const A={id:y,type:"dimensions",resizing:!1};C.getState().triggerNodeChanges([A])}})),P.current.update({controlPosition:M,boundaries:{minWidth:a,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,onResizeStart:h,onResize:p,onResizeEnd:g,shouldResize:f}),()=>{var A;(A=P.current)==null||A.destroy()}},[M,a,c,l,u,d,h,p,g,f]);const S=M.split("-"),I=n===It.Line?"borderColor":"backgroundColor",R=s?{...o,[I]:s}:o;return x.jsx("div",{className:xe(["react-flow__resize-control","nodrag",...S,n,r]),ref:b,style:R,children:i})}const Ds=m.memo(Xw);function Yw({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:h,onResize:p,onResizeEnd:g}){return t?x.jsxs(x.Fragment,{children:[mx.map(w=>x.jsx(Ds,{className:o,style:i,nodeId:e,position:w,variant:It.Line,color:s,minWidth:a,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:h,keepAspectRatio:d,shouldResize:f,onResize:p,onResizeEnd:g},w)),hx.map(w=>x.jsx(Ds,{className:n,style:r,nodeId:e,position:w,color:s,minWidth:a,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:h,keepAspectRatio:d,shouldResize:f,onResize:p,onResizeEnd:g},w))]}):null}const Gw=ie.object({id:ie.string(),name:ie.string(),unique:ie.boolean(),fieldIds:ie.array(ie.string()),createdAt:ie.number()}),Ww=({aggregatedIndexes:e,fields:t})=>e.map(n=>({id:Ge(),name:n.name,unique:n.unique,fieldIds:n.columns.sort((r,o)=>r.position-o.position).map(r=>{var o;return(o=t.find(i=>i.name===r.name))==null?void 0:o.id}).filter(r=>r!==void 0),createdAt:Date.now()})),Uw=[{name:"uint8",id:"uint8"},{name:"uint16",id:"uint16"},{name:"uint32",id:"uint32"},{name:"uint64",id:"uint64"},{name:"uint128",id:"uint128"},{name:"uint256",id:"uint256"},{name:"int8",id:"int8"},{name:"int16",id:"int16"},{name:"int32",id:"int32"},{name:"int64",id:"int64"},{name:"int128",id:"int128"},{name:"int256",id:"int256"},{name:"float32",id:"float32"},{name:"float64",id:"float64"},{name:"tinyint",id:"tinyint"},{name:"int1",id:"int1"},{name:"byte",id:"byte"},{name:"tinyint signed",id:"tinyint_signed"},{name:"int1 signed",id:"int1_signed"},{name:"smallint",id:"smallint"},{name:"smallint signed",id:"smallint_signed"},{name:"int",id:"int"},{name:"integer",id:"integer"},{name:"mediumint",id:"mediumint"},{name:"mediumint signed",id:"mediumint_signed"},{name:"int signed",id:"int_signed"},{name:"integer signed",id:"integer_signed"},{name:"bigint",id:"bigint"},{name:"signed",id:"signed"},{name:"bigint signed",id:"bigint_signed"},{name:"time",id:"time"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"real",id:"real"},{name:"single",id:"single"},{name:"double precision",id:"double_precision"},{name:"longtext",id:"longtext"},{name:"mediumtext",id:"mediumtext"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"longblob",id:"longblob"},{name:"mediumblob",id:"mediumblob"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"varchar",id:"varchar"},{name:"char",id:"char"},{name:"char large object",id:"char_large_object"},{name:"char varying",id:"char_varying"},{name:"character large object",id:"character_large_object"},{name:"character varying",id:"character_varying"},{name:"nchar large object",id:"nchar_large_object"},{name:"nchar varying",id:"nchar_varying"},{name:"national character large object",id:"national_character_large_object"},{name:"national character varying",id:"national_character_varying"},{name:"national char varying",id:"national_char_varying"},{name:"national character",id:"national_character"},{name:"national char",id:"national_char"},{name:"binary large object",id:"binary_large_object"},{name:"binary varying",id:"binary_varying"},{name:"fixedstring",id:"fixedstring"},{name:"string",id:"string"},{name:"date",id:"date"},{name:"date32",id:"date32"},{name:"datetime",id:"datetime"},{name:"datetime64",id:"datetime64"},{name:"object",id:"object"},{name:"json",id:"json"},{name:"uuid",id:"uuid"},{name:"boolean",id:"boolean"},{name:"enum",id:"enum"},{name:"lowcardinality",id:"lowcardinality"},{name:"array",id:"array"},{name:"tuple",id:"tuple"},{name:"map",id:"map"},{name:"simpleaggregatefunction",id:"simpleaggregatefunction"},{name:"aggregatefunction",id:"aggregatefunction"},{name:"nested",id:"nested"},{name:"ipv4",id:"ipv4"},{name:"ipv6",id:"ipv6"},{name:"point",id:"point"},{name:"ring",id:"ring"},{name:"polygon",id:"polygon"},{name:"multipolygon",id:"multipolygon"},{name:"expression",id:"expression"},{name:"set",id:"set"},{name:"nothing",id:"nothing"},{name:"interval",id:"interval"}],Kw=[{name:"bigint",id:"bigint"},{name:"binary",id:"binary"},{name:"blob",id:"blob"},{name:"boolean",id:"boolean"},{name:"char",id:"char"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"decimal",id:"decimal"},{name:"double",id:"double"},{name:"enum",id:"enum"},{name:"float",id:"float"},{name:"int",id:"int"},{name:"json",id:"json"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"set",id:"set"},{name:"smallint",id:"smallint"},{name:"text",id:"text"},{name:"time",id:"time"},{name:"timestamp",id:"timestamp"},{name:"uuid",id:"uuid"},{name:"varbinary",id:"varbinary"},{name:"varchar",id:"varchar"}],qw=[{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"int",id:"int"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"boolean",id:"boolean"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"timestamp",id:"timestamp"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char"},{name:"varchar",id:"varchar"},{name:"binary",id:"binary"},{name:"varbinary",id:"varbinary"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"},{name:"json",id:"json"},{name:"uuid",id:"uuid"}],Zw=[{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"int",id:"int"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"boolean",id:"boolean"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"timestamp",id:"timestamp"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char"},{name:"varchar",id:"varchar"},{name:"binary",id:"binary"},{name:"varbinary",id:"varbinary"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"},{name:"json",id:"json"}],As=[{name:"smallint",id:"smallint"},{name:"integer",id:"integer"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"double precision",id:"double_precision"},{name:"smallserial",id:"smallserial"},{name:"serial",id:"serial"},{name:"bigserial",id:"bigserial"},{name:"money",id:"money"},{name:"char",id:"char"},{name:"varchar",id:"varchar"},{name:"character varying",id:"character_varying"},{name:"text",id:"text"},{name:"bytea",id:"bytea"},{name:"date",id:"date"},{name:"timestamp",id:"timestamp"},{name:"timestamp with time zone",id:"timestamp_with_time_zone"},{name:"timestamp without time zone",id:"timestamp_without_time_zone"},{name:"time",id:"time"},{name:"time with time zone",id:"time_with_time_zone"},{name:"time without time zone",id:"time_without_time_zone"},{name:"interval",id:"interval"},{name:"boolean",id:"boolean"},{name:"enum",id:"enum"},{name:"point",id:"point"},{name:"line",id:"line"},{name:"lseg",id:"lseg"},{name:"box",id:"box"},{name:"path",id:"path"},{name:"polygon",id:"polygon"},{name:"circle",id:"circle"},{name:"cidr",id:"cidr"},{name:"inet",id:"inet"},{name:"macaddr",id:"macaddr"},{name:"macaddr8",id:"macaddr8"},{name:"bit",id:"bit"},{name:"bit varying",id:"bit_varying"},{name:"tsvector",id:"tsvector"},{name:"tsquery",id:"tsquery"},{name:"uuid",id:"uuid"},{name:"xml",id:"xml"},{name:"json",id:"json"},{name:"jsonb",id:"jsonb"},{name:"array",id:"array"},{name:"int4range",id:"int4range"},{name:"int8range",id:"int8range"},{name:"numrange",id:"numrange"},{name:"tsrange",id:"tsrange"},{name:"tstzrange",id:"tstzrange"},{name:"daterange",id:"daterange"},{name:"oid",id:"oid"},{name:"regproc",id:"regproc"},{name:"regprocedure",id:"regprocedure"},{name:"regoper",id:"regoper"},{name:"regoperator",id:"regoperator"},{name:"regclass",id:"regclass"},{name:"regtype",id:"regtype"},{name:"regrole",id:"regrole"},{name:"regnamespace",id:"regnamespace"},{name:"regconfig",id:"regconfig"},{name:"regdictionary",id:"regdictionary"},{name:"user-defined",id:"user-defined"}],Qw=[{name:"bigint",id:"bigint"},{name:"bit",id:"bit"},{name:"decimal",id:"decimal"},{name:"int",id:"int"},{name:"money",id:"money"},{name:"numeric",id:"numeric"},{name:"smallint",id:"smallint"},{name:"smallmoney",id:"smallmoney"},{name:"tinyint",id:"tinyint"},{name:"float",id:"float"},{name:"real",id:"real"},{name:"date",id:"date"},{name:"datetime2",id:"datetime2"},{name:"datetime",id:"datetime"},{name:"datetimeoffset",id:"datetimeoffset"},{name:"smalldatetime",id:"smalldatetime"},{name:"time",id:"time"},{name:"char",id:"char"},{name:"varchar",id:"varchar"},{name:"text",id:"text"},{name:"nchar",id:"nchar"},{name:"nvarchar",id:"nvarchar"},{name:"ntext",id:"ntext"},{name:"binary",id:"binary"},{name:"varbinary",id:"varbinary"},{name:"image",id:"image"},{name:"cursor",id:"cursor"},{name:"hierarchyid",id:"hierarchyid"},{name:"sql_variant",id:"sql_variant"},{name:"timestamp",id:"timestamp"},{name:"uniqueidentifier",id:"uniqueidentifier"},{name:"xml",id:"xml"},{name:"geometry",id:"geometry"},{name:"geography",id:"geography"},{name:"json",id:"json"}],Jw=[{name:"integer",id:"integer"},{name:"real",id:"real"},{name:"numeric",id:"numeric"},{name:"text",id:"text"},{name:"blob",id:"blob"},{name:"json",id:"json"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"int",id:"int"},{name:"float",id:"float"},{name:"boolean",id:"boolean"},{name:"varchar",id:"varchar"},{name:"decimal",id:"decimal"}],e1=ie.object({id:ie.string(),name:ie.string()}),t1={[me.GENERIC]:Kw,[me.POSTGRESQL]:As,[me.MYSQL]:Zw,[me.SQL_SERVER]:Qw,[me.MARIADB]:qw,[me.SQLITE]:Jw,[me.CLICKHOUSE]:Uw,[me.COCKROACHDB]:As},n1={[me.POSTGRESQL]:{serial:["integer"],smallserial:["smallint"],bigserial:["bigint"]},[me.MYSQL]:{int:["integer"],tinyint:["boolean"]},[me.SQL_SERVER]:{},[me.MARIADB]:{},[me.SQLITE]:{},[me.CLICKHOUSE]:{},[me.COCKROACHDB]:{},[me.GENERIC]:{}};function pb(e,t,n){var o,i;if(e.id===t.id)return!0;const r=n1[n]||{};return((o=r[e.id])==null?void 0:o.includes(t.id))||((i=r[t.id])==null?void 0:i.includes(e.id))}const gb=Object.values(t1).flat(),r1=ie.object({id:ie.string(),name:ie.string(),type:e1,primaryKey:ie.boolean(),unique:ie.boolean(),nullable:ie.boolean(),createdAt:ie.number(),characterMaximumLength:ie.string().optional(),precision:ie.number().optional(),scale:ie.number().optional(),default:ie.string().optional(),collation:ie.string().optional(),comments:ie.string().optional()}),o1=({columns:e,tableSchema:t,tableInfo:n,primaryKeys:r,aggregatedIndexes:o})=>{const i=e.filter(c=>Mt(c.schema)===t&&c.table===n.table).reduce((c,l)=>(c.has(l.name)||c.set(l.name,l),c),new Map),s=Array.from(i.values()).sort((c,l)=>c.ordinal_position-l.ordinal_position),a=r.filter(c=>c.table===n.table&&Mt(c.schema)===t).map(c=>c.column.trim());return s.map(c=>{var l,u;return{id:Ge(),name:c.name,type:{id:c.type.split(" ").join("_").toLowerCase(),name:c.type.toLowerCase()},primaryKey:a.includes(c.name),unique:Object.values(o).some(d=>d.unique&&d.columns.length===1&&d.columns[0].name===c.name),nullable:c.nullable,...c.character_maximum_length&&c.character_maximum_length!=="null"?{character_maximum_length:c.character_maximum_length}:{},...(l=c.precision)!=null&&l.precision?{precision:c.precision.precision}:{},...(u=c.precision)!=null&&u.scale?{scale:c.precision.scale}:{},...c.default?{default:c.default}:{},...c.collation?{collation:c.collation}:{},createdAt:Date.now(),comments:c.comment?c.comment:void 0}})},i1=({tableInfo:e,tableSchema:t,indexes:n})=>{const r=n.filter(o=>{const i=Mt(o.schema);return o.table===e.table&&i===t});return Object.values(r.reduce((o,i)=>{const s=`${i.schema}_${i.name}`;return o[s]?o[s].columns.push({name:i.column,position:i.column_position}):o[s]={...i,columns:[{name:i.column,position:i.column_position}]},o},{}))},yb=ie.object({id:ie.string(),name:ie.string(),schema:ie.string().optional(),x:ie.number(),y:ie.number(),fields:ie.array(r1),indexes:ie.array(Gw),color:ie.string(),isView:ie.boolean(),isMaterializedView:ie.boolean().optional(),createdAt:ie.number(),width:ie.number().optional(),comments:ie.string().optional(),hidden:ie.boolean().optional(),order:ie.number().optional()}),xb=(e,t)=>!t||!e.schema||t.includes(Ws(e.schema)),s1=(e,t)=>{if(!t)return"";let n;return e===me.SQL_SERVER?n=Rd(t):n=Dd(t),n},vb=({databaseMetadata:e,databaseType:t})=>{const{tables:n,pk_info:r,columns:o,indexes:i,views:s}=e;return n.map(a=>{const c=Mt(a.schema),l=i1({tableInfo:a,tableSchema:c,indexes:i}),u=o1({aggregatedIndexes:l,columns:o,primaryKeys:r,tableInfo:a,tableSchema:c}),d=Ww({aggregatedIndexes:l,fields:u}),f=s.some(p=>Mt(p.schema)===c&&p.view_name===a.table),h=s.some(p=>Mt(p.schema)===c&&p.view_name===a.table&&s1(t,p.view_definition).toLowerCase().includes("materialized"));return{id:Ge(),name:a.table,schema:c,x:Math.random()*1e3,y:Math.random()*800,fields:u,indexes:d,color:h?Pd:f?$d:Gs(),isView:f,isMaterializedView:h,createdAt:Date.now(),comments:a.comment?a.comment:void 0}})},wb=({relationships:e,tables:t,mode:n="all"})=>{const r=ao(t),o=ao(e),i=s=>{const h=new Map;o.forEach(v=>{h.has(v.sourceTableId)||h.set(v.sourceTableId,new Set),h.has(v.targetTableId)||h.set(v.targetTableId,new Set),h.get(v.sourceTableId).add(v.targetTableId),h.get(v.targetTableId).add(v.sourceTableId)});const p=[...s].sort((v,M)=>{var P,S;return(((P=h.get(M.id))==null?void 0:P.size)||0)-(((S=h.get(v.id))==null?void 0:S.size)||0)}),g=new Set,w=new Map,y=(v,M,P)=>{for(const[S,I]of w)if(S!==P&&Math.abs(v-I.x)<300&&Math.abs(M-I.y)<400)return!0;return!1},C=(v,M,P)=>{const S=Math.max(200,300)/2;let I=0,R=0,A=0;const O=1e3;for(;A<O;){const H=v+R*Math.cos(I),F=M+R*Math.sin(I);if(!y(H,F,P))return{x:H,y:F};I+=Math.PI/4,I>=2*Math.PI&&(I=0,R+=S),A++}return{x:v+R*Math.cos(I),y:M+R*Math.sin(I)}},b=(v,M,P)=>{if(g.has(v.id))return;const{x:S,y:I}=C(M,P,v.id);v.x=S,v.y=I,w.set(v.id,{x:v.x,y:v.y}),g.add(v.id);const R=h.get(v.id)||new Set;let A=0;const O=2*Math.PI/R.size;R.forEach(H=>{if(!g.has(H)){const F=s.find(_=>_.id===H);if(F){const _=S+Math.cos(A)*400,k=I+Math.sin(A)*(300+100*2);b(F,_,k),A+=O}}})};p.forEach((v,M)=>{if(!g.has(v.id)){const P=Math.floor(M/6),I=100+M%6*(200+100*2),R=100+P*(300+100*2);b(v,I,R)}}),s.forEach(v=>{const M=w.get(v.id);M&&(v.x=M.x,v.y=M.y)})};if(n==="perSchema"){const s=r.reduce((a,c)=>{const l=c.schema||"default";return a[l]||(a[l]=[]),a[l].push(c),a},{});Object.values(s).forEach(i)}else i(r);return r},ll=()=>({graph:new Map,lastUpdated:Date.now()}),Ps=(e,t)=>(e.graph.has(t)||e.graph.set(t,[]),{...e,lastUpdated:Date.now()}),a1=(e,t,n)=>{var r,o,i,s;return e.graph.has(t)||Ps(e,t),e.graph.has(n)||Ps(e,n),(r=e.graph.get(t))!=null&&r.includes(n)||(o=e.graph.get(t))==null||o.push(n),(i=e.graph.get(n))!=null&&i.includes(t)||(s=e.graph.get(n))==null||s.push(t),{...e,lastUpdated:Date.now()}},bb=(e,t)=>(e.graph.delete(t),e.graph.forEach(n=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}),{...e,lastUpdated:Date.now()}),c1=(e,t,n)=>{var r,o,i,s;if(e.graph.has(t)){const a=((r=e.graph.get(t))==null?void 0:r.indexOf(n))??-1;a!==-1&&((o=e.graph.get(t))==null||o.splice(a,1))}if(e.graph.has(n)){const a=((i=e.graph.get(n))==null?void 0:i.indexOf(t))??-1;a!==-1&&((s=e.graph.get(n))==null||s.splice(a,1))}return{...e,lastUpdated:Date.now()}},u1=m.createContext({reorderTables:B,fitView:B,setOverlapGraph:B,overlapGraph:ll()}),_b=()=>m.useContext(u1),$s="left_rel_",js="right_rel_",no="target_rel_",dl=be.memo(({field:e,focused:t,tableNodeId:n,highlighted:r,visible:o,isConnectable:i})=>{const{removeField:s,relationships:a,readonly:c,updateField:l}=dr(),[u,d]=m.useState(!1),[f,h]=m.useState(e.name),p=be.useRef(null),g=sl(),w=ii(),y=m.useMemo(()=>{var S,I;return w.inProgress&&w.fromNode.id!==n&&(((S=w.fromHandle.id)==null?void 0:S.startsWith(js))||((I=w.fromHandle.id)==null?void 0:I.startsWith($s)))},[w,n]),C=m.useMemo(()=>a.filter(S=>S.targetTableId===n&&S.targetFieldId===e.id).length,[a,n,e.id]),b=m.useRef(C);m.useEffect(()=>{b.current!==C&&(g(n),b.current=C)},[n,g,C]);const v=m.useCallback(()=>{u&&(f.trim()&&l(n,e.id,{name:f.trim()}),d(!1))},[f,e.id,l,u,n]),M=m.useCallback(()=>{d(!1),h(e.name)},[e.name]);ka(p,v),Un("Enter",v),Un("Escape",M);const P=S=>{S.stopPropagation(),d(!0)};return x.jsxs("div",{className:`group relative flex h-8 items-center justify-between gap-1 border-t px-3 text-sm last:rounded-b-[6px] hover:bg-slate-100 dark:hover:bg-slate-800 ${r?"bg-pink-100 dark:bg-pink-900":""} transition-all duration-200 ease-in-out ${o?"max-h-8 opacity-100":"z-0 max-h-0 overflow-hidden opacity-0"}`,children:[i?x.jsxs(x.Fragment,{children:[x.jsx($e,{id:`${js}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||c?"!invisible":""}`,position:Q.Right,type:"source"}),x.jsx($e,{id:`${$s}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||c?"!invisible":""}`,position:Q.Left,type:"source"})]}):null,(!w.inProgress||y)&&i&&x.jsxs(x.Fragment,{children:[Array.from({length:C},(S,I)=>I).map(S=>x.jsx($e,{id:`${no}${S}_${e.id}`,className:"!invisible",position:Q.Left,type:"target"},`${no}${S}_${e.id}`)),x.jsx($e,{id:`${no}${C}_${e.id}`,className:y?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:Q.Left,type:"target"})]}),x.jsxs("div",{className:Ne("flex items-center gap-1 truncate text-left",{"font-semibold":e.primaryKey||e.unique,"w-full":u}),children:[u?x.jsxs(x.Fragment,{children:[x.jsx(Ao,{ref:p,onBlur:v,placeholder:e.name,autoFocus:!0,type:"text",value:f,onClick:S=>S.stopPropagation(),onChange:S=>h(S.target.value),className:"h-5 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),x.jsx(Qt,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:v,children:x.jsx(Qs,{className:"size-4"})})]}):x.jsx("span",{className:"truncate",onDoubleClick:P,children:e.name}),e.comments&&!u?x.jsxs(Vs,{children:[x.jsx(Xs,{asChild:!0,children:x.jsx("div",{className:"shrink-0 cursor-pointer text-muted-foreground",children:x.jsx(rf,{size:14})})}),x.jsx(Ys,{children:e.comments})]}):null]}),u?null:x.jsxs("div",{className:"flex max-w-[35%] justify-end gap-1.5 truncate hover:shrink-0",children:[e.primaryKey?x.jsx("div",{className:Ne("text-muted-foreground",c?"":"group-hover:hidden"),children:x.jsx(nf,{size:14})}):null,x.jsxs("div",{className:Ne("content-center truncate text-right text-xs text-muted-foreground shrink-0",c?"":"group-hover:hidden"),children:[e.type.name,e.nullable?"?":""]}),c?null:x.jsx("div",{className:"hidden flex-row group-hover:flex",children:x.jsx(Qt,{variant:"ghost",className:"size-6 p-0 hover:bg-primary-foreground",onClick:S=>{S.stopPropagation(),s(n,e.id)},children:x.jsx(Js,{className:"size-3.5 text-red-700"})})})]})]})});dl.displayName="TableNodeField";var si="ContextMenu",[l1,Cb]=ar(si,[Ka]),Ce=Ka(),[d1,fl]=l1(si),hl=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:o,modal:i=!0}=e,[s,a]=m.useState(!1),c=Ce(t),l=pt(r),u=m.useCallback(d=>{a(d),l(d)},[l]);return x.jsx(d1,{scope:t,open:s,onOpenChange:u,modal:i,children:x.jsx(em,{...c,dir:o,open:s,onOpenChange:u,modal:i,children:n})})};hl.displayName=si;var ml="ContextMenuTrigger",pl=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=e,i=fl(ml,n),s=Ce(n),a=m.useRef({x:0,y:0}),c=m.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),l=m.useRef(0),u=m.useCallback(()=>window.clearTimeout(l.current),[]),d=f=>{a.current={x:f.clientX,y:f.clientY},i.onOpenChange(!0)};return m.useEffect(()=>u,[u]),m.useEffect(()=>void(r&&u()),[r,u]),x.jsxs(x.Fragment,{children:[x.jsx(tm,{...s,virtualRef:c}),x.jsx(Oe.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:de(e.onContextMenu,f=>{u(),d(f),f.preventDefault()}),onPointerDown:r?e.onPointerDown:de(e.onPointerDown,jn(f=>{u(),l.current=window.setTimeout(()=>d(f),700)})),onPointerMove:r?e.onPointerMove:de(e.onPointerMove,jn(u)),onPointerCancel:r?e.onPointerCancel:de(e.onPointerCancel,jn(u)),onPointerUp:r?e.onPointerUp:de(e.onPointerUp,jn(u))})]})});pl.displayName=ml;var f1="ContextMenuPortal",gl=e=>{const{__scopeContextMenu:t,...n}=e,r=Ce(t);return x.jsx(nm,{...r,...n})};gl.displayName=f1;var yl="ContextMenuContent",xl=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=fl(yl,n),i=Ce(n),s=m.useRef(!1);return x.jsx(rm,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var c;(c=e.onCloseAutoFocus)==null||c.call(e,a),!a.defaultPrevented&&s.current&&a.preventDefault(),s.current=!1},onInteractOutside:a=>{var c;(c=e.onInteractOutside)==null||c.call(e,a),!a.defaultPrevented&&!o.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xl.displayName=yl;var h1="ContextMenuGroup",m1=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(om,{...o,...r,ref:t})});m1.displayName=h1;var p1="ContextMenuLabel",vl=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(im,{...o,...r,ref:t})});vl.displayName=p1;var g1="ContextMenuItem",wl=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(sm,{...o,...r,ref:t})});wl.displayName=g1;var y1="ContextMenuCheckboxItem",bl=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(am,{...o,...r,ref:t})});bl.displayName=y1;var x1="ContextMenuRadioGroup",v1=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(cm,{...o,...r,ref:t})});v1.displayName=x1;var w1="ContextMenuRadioItem",_l=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(um,{...o,...r,ref:t})});_l.displayName=w1;var b1="ContextMenuItemIndicator",Cl=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(lm,{...o,...r,ref:t})});Cl.displayName=b1;var _1="ContextMenuSeparator",El=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(dm,{...o,...r,ref:t})});El.displayName=_1;var C1="ContextMenuArrow",E1=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(fm,{...o,...r,ref:t})});E1.displayName=C1;var S1="ContextMenuSubTrigger",Sl=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(hm,{...o,...r,ref:t})});Sl.displayName=S1;var M1="ContextMenuSubContent",Ml=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Ce(n);return x.jsx(mm,{...o,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ml.displayName=M1;function jn(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var N1=hl,T1=pl,k1=gl,Nl=xl,Tl=vl,kl=wl,Il=bl,Rl=_l,Dl=Cl,Al=El,Pl=Sl,$l=Ml;const I1=N1,R1=T1,D1=m.forwardRef(({className:e,inset:t,children:n,...r},o)=>x.jsxs(Pl,{ref:o,className:Ne("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,x.jsx(wm,{className:"ml-auto size-4"})]}));D1.displayName=Pl.displayName;const A1=m.forwardRef(({className:e,...t},n)=>x.jsx($l,{ref:n,className:Ne("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));A1.displayName=$l.displayName;const jl=m.forwardRef(({className:e,...t},n)=>x.jsx(k1,{children:x.jsx(Nl,{ref:n,className:Ne("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));jl.displayName=Nl.displayName;const Zt=m.forwardRef(({className:e,inset:t,...n},r)=>x.jsx(kl,{ref:r,className:Ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Zt.displayName=kl.displayName;const P1=m.forwardRef(({className:e,children:t,checked:n,...r},o)=>x.jsxs(Il,{ref:o,className:Ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[x.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:x.jsx(Dl,{children:x.jsx(ym,{className:"size-4"})})}),t]}));P1.displayName=Il.displayName;const $1=m.forwardRef(({className:e,children:t,...n},r)=>x.jsxs(Rl,{ref:r,className:Ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[x.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:x.jsx(Dl,{children:x.jsx(Em,{className:"size-4 fill-current"})})}),t]}));$1.displayName=Rl.displayName;const j1=m.forwardRef(({className:e,inset:t,...n},r)=>x.jsx(Tl,{ref:r,className:Ne("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n}));j1.displayName=Tl.displayName;const L1=m.forwardRef(({className:e,...t},n)=>x.jsx(Al,{ref:n,className:Ne("-mx-1 my-1 h-px bg-border",e),...t}));L1.displayName=Al.displayName;const O1=({children:e,table:t})=>{const{removeTable:n,readonly:r,createTable:o}=dr(),{openTableFromSidebar:i}=bc(),{t:s}=Zs(),{isMd:a}=Kd("md"),{openCreateRelationshipDialog:c}=Om(),l=m.useCallback(()=>{const h=Ad(t);h.name=`${h.name}_copy`,h.x+=30,h.y+=50,o(h)},[o,t]),u=m.useCallback(()=>{i(t.id)},[i,t.id]),d=m.useCallback(()=>{n(t.id)},[n,t.id]),f=m.useCallback(()=>{c({sourceTableId:t.id})},[c,t.id]);return!a||r?x.jsx(x.Fragment,{children:e}):x.jsxs(I1,{children:[x.jsx(R1,{children:e}),x.jsxs(jl,{children:[x.jsxs(Zt,{onClick:u,className:"flex justify-between gap-3",children:[x.jsx("span",{children:s("table_node_context_menu.edit_table")}),x.jsx(of,{className:"size-3.5"})]}),x.jsxs(Zt,{onClick:l,className:"flex justify-between gap-3",children:[x.jsx("span",{children:s("table_node_context_menu.duplicate_table")}),x.jsx(tf,{className:"size-3.5"})]}),x.jsxs(Zt,{onClick:f,className:"flex justify-between gap-3",children:[x.jsx("span",{children:s("table_node_context_menu.add_relationship")}),x.jsx(af,{className:"size-3.5"})]}),x.jsxs(Zt,{onClick:d,className:"flex justify-between gap-3",children:[x.jsx("span",{children:s("table_node_context_menu.delete_table")}),x.jsx(Js,{className:"size-3.5 text-red-700"})]})]})]})},Ls="top_dep_",F1="bottom_dep_",ro="target_dep_",Ll=be.memo(({table:e,focused:t})=>{const{dependencies:n}=dr(),r=sl(),o=ii(),i=m.useMemo(()=>{var c,l;return o.inProgress&&o.fromNode.id!==e.id&&(((c=o.fromHandle.id)==null?void 0:c.startsWith(Ls))||((l=o.fromHandle.id)==null?void 0:l.startsWith(F1)))},[o,e.id]),s=m.useMemo(()=>n.filter(c=>c.tableId===e.id).length,[n,e.id]),a=m.useRef(s);return m.useEffect(()=>{a.current!==s&&(r(e.id),a.current=s)},[e.id,r,s]),x.jsxs(x.Fragment,{children:[e.isView||e.isMaterializedView?x.jsx($e,{id:`${Ls}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${t?"":"!invisible"}`,position:Q.Top,type:"source"}):null,Array.from({length:s},(c,l)=>l).map(c=>x.jsx($e,{id:`${ro}${c}_${e.id}`,className:"!invisible",position:Q.Top,type:"target"},`${ro}${c}_${e.id}`)),i?x.jsx($e,{id:`${ro}${s}_${e.id}`,className:i?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:Q.Top,type:"target"}):null]})});Ll.displayName="TableNodeDependencyIndicator";const Ln=450,Os=337,Wn=224,On=10,H1=be.memo(({selected:e,dragging:t,id:n,data:{table:r,isOverlapping:o,highlightOverlappingTables:i}})=>{const{updateTable:s,relationships:a,readonly:c}=dr(),l=ue(k=>k.edges),{openTableFromSidebar:u,selectSidebarSection:d}=bc(),[f,h]=m.useState(!1),{t:p}=Zs(),[g,w]=m.useState(!1),[y,C]=m.useState(r.name),b=be.useRef(null),v=l.filter(k=>{var E;return(k.source===n||k.target===n)&&(k.selected||((E=k.data)==null?void 0:E.highlighted))&&k.type==="relationship-edge"}),M=!!e&&!t,P=()=>{d("tables"),u(r.id)},S=m.useCallback(()=>{s(r.id,{width:(r.width??Wn)<Os?Os:Ln})},[r.id,r.width,s]),I=m.useCallback(()=>{s(r.id,{width:Wn})},[r.id,s]),R=()=>{h(!f)},A=m.useCallback(k=>a.some(E=>E.sourceFieldId===k.id||E.targetFieldId===k.id)||k.primaryKey,[a]),O=m.useMemo(()=>{if(f)return r.fields;const k=r.fields.filter(j=>A(j)),E=r.fields.filter(j=>!A(j)),$=k.slice(0,On),D=On-$.length,T=E.slice(0,D);return[...$,...T].sort((j,z)=>r.fields.indexOf(j)-r.fields.indexOf(z))},[f,r.fields,A]),H=m.useCallback(()=>{g&&(y.trim()&&s(r.id,{name:y.trim()}),w(!1))},[y,r.id,s,g]),F=m.useCallback(()=>{w(!1),C(r.name)},[r.name]);ka(b,H),Un("Enter",H),Un("Escape",F);const _=k=>{k.stopPropagation(),w(!0)};return x.jsx(O1,{table:r,children:x.jsxs("div",{className:Ne("flex w-full flex-col border-2 bg-slate-50 dark:bg-slate-950 rounded-lg shadow-sm transition-transform duration-300",e?"border-pink-600":"border-slate-500 dark:border-slate-700",o?"ring-2 ring-offset-slate-50 dark:ring-offset-slate-900 ring-blue-500 ring-offset-2":"",!i&&o?"animate-scale":"",i&&o?"animate-scale-2":""),onClick:k=>{k.detail===2&&P()},children:[x.jsx(Yw,{isVisible:M,lineClassName:"!border-none !w-2",minWidth:Wn,maxWidth:Ln,shouldResize:k=>k.dy===0,handleClassName:"!hidden"}),x.jsx(Ll,{table:r,focused:M}),x.jsx("div",{className:"h-2 rounded-t-[6px]",style:{backgroundColor:r.color}}),x.jsxs("div",{className:"group flex h-9 items-center justify-between bg-slate-200 px-2 dark:bg-slate-900",children:[x.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[x.jsx(sf,{className:"size-3.5 shrink-0 text-gray-600 dark:text-primary"}),g?x.jsxs(x.Fragment,{children:[x.jsx(Ao,{ref:b,onBlur:H,placeholder:r.name,autoFocus:!0,type:"text",value:y,onClick:k=>k.stopPropagation(),onChange:k=>C(k.target.value),className:"h-6 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),x.jsx(Qt,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:H,children:x.jsx(Qs,{className:"size-4"})})]}):x.jsxs(Vs,{children:[x.jsx(Xs,{asChild:!0,children:x.jsx(Fd,{className:"text-editable truncate px-2 py-0.5 text-sm font-bold",onDoubleClick:_,children:r.name})}),x.jsx(Ys,{children:p("tool_tips.double_click_to_edit")})]})]}),x.jsxs("div",{className:"hidden shrink-0 flex-row group-hover:flex",children:[c||g?null:x.jsx(Qt,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:P,children:x.jsx(ef,{className:"size-4"})}),g?null:x.jsx(Qt,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:r.width!==Ln?S:I,children:r.width!==Ln?x.jsx(Qd,{className:"size-4"}):x.jsx(Jd,{className:"size-4"})})]})]}),x.jsx("div",{className:"transition-[max-height] duration-200 ease-in-out",style:{maxHeight:f?`${r.fields.length*2}rem`:`${On*2}rem`},children:r.fields.map(k=>x.jsx(dl,{focused:M,tableNodeId:n,field:k,highlighted:v.some(E=>{var $,D;return(($=E.data)==null?void 0:$.relationship.sourceFieldId)===k.id||((D=E.data)==null?void 0:D.relationship.targetFieldId)===k.id}),visible:O.includes(k),isConnectable:!r.isView},k.id))}),r.fields.length>On&&x.jsx("div",{className:"z-10 flex h-8 cursor-pointer items-center justify-center rounded-b-md border-t text-xs text-muted-foreground transition-colors duration-200 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:R,children:f?x.jsxs(x.Fragment,{children:[x.jsx(Zd,{className:"mr-1 size-3.5"}),p("show_less")]}):x.jsxs(x.Fragment,{children:[x.jsx(qd,{className:"mr-1 size-3.5"}),p("show_more")]})})]})})});H1.displayName="TableNode";const Eb=({cardinality:e,selected:t,side:n})=>`cardinality_${t?"selected":"not_selected"}_${e}_${n}`,oo=({node:e,table:t})=>{var a,c;const n=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",r=(e==null?void 0:e.position.x)??(t==null?void 0:t.x)??0,o=(e==null?void 0:e.position.y)??(t==null?void 0:t.y)??0,i=((a=e==null?void 0:e.measured)==null?void 0:a.width)??(e==null?void 0:e.data.table.width)??(t==null?void 0:t.width)??Wn,s=e?((c=e==null?void 0:e.measured)==null?void 0:c.height)??Hs((e==null?void 0:e.data.table.fields.length)??0):Hs((t==null?void 0:t.fields.length)??0);return{id:n,left:r,right:r+i,top:o,bottom:o+s}},Fs=({node:e,table:t},{nodes:n,tables:r},o)=>{const i=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",s=oo(e?{node:e}:{table:t});for(const a of n??r??[]){if(i===a.id)continue;const l=oo(!!n?{node:a}:{table:a});s.left<l.right&&s.right>l.left&&s.top<l.bottom&&s.bottom>l.top?o=a1(o,i,a.id):o=c1(o,i,a.id)}return o},Sb=({tables:e,nodes:t})=>{let n=ll();if(e)for(const r of e)n=Fs({table:r},{tables:e},n);else for(const r of t)n=Fs({node:r},{nodes:t},n);return n},Hs=e=>Math.min(e,11)*32+48;export{Cf as $,Fs as A,F1 as B,wm as C,eb as D,bb as E,Hs as F,Sb as G,xb as H,mn as I,ab as J,Fm as K,$s as L,Wn as M,hb as N,W1 as O,Q as P,of as Q,xw as R,U1 as S,H1 as T,mb as U,fb as V,it as W,Ra as X,Ia as Y,Us as Z,Gf as _,sb as a,Wa as a0,Da as a1,q1 as a2,ym as a3,Q1 as a4,Z1 as a5,ka as a6,Un as a7,tf as a8,Js as a9,fm as aA,hm as aB,mm as aC,Em as aD,jm as aE,J1 as aF,tb as aG,K1 as aH,$a as aI,zf as aJ,Bf as aK,zm as aL,Um as aM,Km as aN,Hm as aO,s1 as aP,vb as aQ,wb as aR,yb as aS,qd as aT,Zd as aU,Kw as aV,gb as aW,Lm as aX,Bm as aY,ll as aZ,u1 as a_,Ao as aa,ef as ab,Qs as ac,t1 as ad,nf as ae,rf as af,cb as ag,af as ah,co as ai,ft as aj,zd as ak,Vd as al,Xd as am,Ka as an,em as ao,tm as ap,nm as aq,rm as ar,om as as,im as at,dm as au,sm as av,am as aw,cm as ax,um as ay,lm as az,ri as b,dr as c,js as d,Eb as e,Zs as f,To as g,rb as h,db as i,Om as j,nb as k,Kd as l,I1 as m,R1 as n,jl as o,Zt as p,ib as q,ob as r,_b as s,ub as t,bc as u,lb as v,no as w,ro as x,Ls as y,pb as z};
