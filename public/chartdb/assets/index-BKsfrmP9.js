import{h as N}from"./index-DngGMs-x.js";var F={exports:{}};const v=typeof Buffer<"u",E=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,O=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function k(r,n,e){e==null&&n!==null&&typeof n=="object"&&(e=n,n=void 0),v&&Buffer.isBuffer(r)&&(r=r.toString()),r&&r.charCodeAt(0)===65279&&(r=r.slice(1));const t=JSON.parse(r,n);if(t===null||typeof t!="object")return t;const s=e&&e.protoAction||"error",c=e&&e.constructorAction||"error";if(s==="ignore"&&c==="ignore")return t;if(s!=="ignore"&&c!=="ignore"){if(E.test(r)===!1&&O.test(r)===!1)return t}else if(s!=="ignore"&&c==="ignore"){if(E.test(r)===!1)return t}else if(O.test(r)===!1)return t;return w(t,{protoAction:s,constructorAction:c,safe:e&&e.safe})}function w(r,{protoAction:n="error",constructorAction:e="error",safe:t}={}){let s=[r];for(;s.length;){const c=s;s=[];for(const i of c){if(n!=="ignore"&&Object.prototype.hasOwnProperty.call(i,"__proto__")){if(t===!0)return null;if(n==="error")throw new SyntaxError("Object contains forbidden prototype property");delete i.__proto__}if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(i,"constructor")&&Object.prototype.hasOwnProperty.call(i.constructor,"prototype")){if(t===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete i.constructor}for(const y in i){const h=i[y];h&&typeof h=="object"&&s.push(h)}}}return r}function _(r,n,e){const t=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return k(r,n,e)}finally{Error.stackTraceLimit=t}}function L(r,n){const e=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return k(r,n,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=e}}F.exports=_;F.exports.default=_;F.exports.parse=_;F.exports.safeParse=L;F.exports.scan=w;var C=F.exports;const J=N(C);function x(r){let n,e,t,s,c,i,y;return h(),{feed:P,reset:h};function h(){n=!0,e="",t=0,s=-1,c=void 0,i=void 0,y=""}function P(g){e=e?e+g:g,n&&A(e)&&(e=e.slice(j.length)),n=!1;const a=e.length;let o=0,d=!1;for(;o<a;){d&&(e[o]===`
`&&++o,d=!1);let u=-1,l=s,f;for(let p=t;u<0&&p<a;++p)f=e[p],f===":"&&l<0?l=p-o:f==="\r"?(d=!0,u=p-o):f===`
`&&(u=p-o);if(u<0){t=a-o,s=l;break}else t=0,s=-1;S(e,o,l,u),o+=u+1}o===a?e="":o>0&&(e=e.slice(o))}function S(g,a,o,d){if(d===0){y.length>0&&(r({type:"event",id:c,event:i||void 0,data:y.slice(0,-1)}),y="",c=void 0),i=void 0;return}const u=o<0,l=g.slice(a,a+(u?d:o));let f=0;u?f=d:g[a+o+1]===" "?f=o+2:f=o+1;const p=a+f,T=d-f,m=g.slice(p,p+T).toString();if(l==="data")y+=m?"".concat(m,`
`):`
`;else if(l==="event")i=m;else if(l==="id"&&!m.includes("\0"))c=m;else if(l==="retry"){const b=parseInt(m,10);Number.isNaN(b)||r({type:"reconnect-interval",value:b})}}}const j=[239,187,191];function A(r){return j.every((n,e)=>r.charCodeAt(e)===n)}export{J as S,x as c};
